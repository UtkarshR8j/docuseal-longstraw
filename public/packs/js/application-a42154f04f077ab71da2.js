(()=>{"use strict";var e,t,i,a={2357:(e,t,i)=>{var a={};i.r(a),i.d(a,{de:()=>As,en:()=>Fs,es:()=>Ds,fr:()=>Es,it:()=>Ss,pt:()=>Ls});i(89);var l=i(5736),s=i(3751),n=i(953),o=i(641),r=i(33);const d={style:{"max-width":"1600px"},class:"mx-auto pl-3 md:pl-4 h-full"},u={key:0,class:"top-1.5 sticky h-0 z-20 max-w-2xl mx-auto"},c={class:"alert border-base-content/30 py-2 px-2.5"},p={class:"flex items-center space-x-3"},h={key:0,href:"/"},m={class:"space-x-3 flex items-center flex-shrink-0"},f=["href","target","data-turbo-frame"],b={class:"hidden md:inline"},_=["href"],g={class:"hidden md:inline"},y={key:2,class:"flex"},v={class:"hidden md:inline"},w={class:"dropdown dropdown-end"},k={tabindex:"0",class:"base-button !rounded-l-none !pl-1 !pr-2 !border-l-neutral-500"},x={class:"text-sm align-text-top"},C={tabindex:"0",class:"dropdown-content p-2 mt-2 shadow menu text-base bg-base-100 rounded-box text-right"},F=["href"],D={class:"whitespace-nowrap"},S=["href"],L={class:"whitespace-nowrap"},E=["href"],A={class:"hidden md:inline"},T={id:"pages_container",class:"w-full overflow-y-hidden md:overflow-y-auto overflow-x-hidden mt-0.5 pt-0.5"},I={ref:"documents",class:"pr-3.5 pl-0.5"},$={key:0,class:"pb-4 space-y-2"},P={class:"bg-base-200 rounded-lg p-5 text-center space-y-4"},q={class:"sticky bottom-0"},R=(0,o.Lk)("div",{id:"docuseal_modal_container"},null,-1);const M=["for"],X={key:2},N={key:3},z={key:4},B={ref:"form",class:"hidden"},O=["id","accept"];var U=i(2327),W=i(7901);const V={name:"DocumentsUpload",components:{IconUpload:U.A,IconInnerShadowTop:W.A},inject:["baseFetch","t"],props:{templateId:{type:[Number,String],required:!0},acceptFileTypes:{type:String,required:!1,default:"image/*, application/pdf"}},emits:["success"],data:()=>({isLoading:!1,isProcessing:!1}),computed:{inputId:()=>"el"+Math.random().toString(32).split(".")[1]},methods:{async upload(){this.isLoading=!0,this.baseFetch(`/templates/${this.templateId}/documents`,{method:"POST",body:new FormData(this.$refs.form)}).then((e=>{e.ok?e.json().then((e=>{this.$emit("success",e),this.$refs.input.value=""})):422===e.status&&e.json().then((e=>{if("pdf_encrypted"===e.status){const e=new FormData(this.$refs.form);e.append("password",prompt(this.t("enter_pdf_password"))),this.baseFetch(`/templates/${this.templateId}/documents`,{method:"POST",body:e}).then((async e=>{e.ok?(this.$emit("success",await e.json()),this.$refs.input.value=""):alert(this.t("wrong_password"))}))}}))})).finally((()=>{this.isLoading=!1}))}}};var j=i(6262);const Q=(0,j.A)(V,[["render",function(e,t,i,a,l,s){const n=(0,o.g2)("IconInnerShadowTop"),d=(0,o.g2)("IconUpload");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("label",{id:"add_document_button",for:s.inputId,class:(0,r.C4)(["btn btn-outline w-full",{"btn-disabled":l.isLoading||l.isProcessing}])},[l.isLoading||l.isProcessing?((0,o.uX)(),(0,o.Wv)(n,{key:0,width:"20",class:"animate-spin"})):((0,o.uX)(),(0,o.Wv)(d,{key:1,width:"20"})),l.isLoading?((0,o.uX)(),(0,o.CE)("span",X,(0,r.v_)(s.t("uploading_")),1)):l.isProcessing?((0,o.uX)(),(0,o.CE)("span",N,(0,r.v_)(s.t("processing_")),1)):((0,o.uX)(),(0,o.CE)("span",z,(0,r.v_)(s.t("add_document")),1))],10,M),(0,o.Lk)("form",B,[(0,o.Lk)("input",{id:s.inputId,ref:"input",name:"files[]",type:"file",accept:i.acceptFileTypes,multiple:"",onChange:t[0]||(t[0]=(...e)=>s.upload&&s.upload(...e))},null,40,O)],512)])}]]),Y=["for"],H={class:"absolute top-0 right-0 left-0 bottom-0 flex items-center justify-center"},K={class:"flex flex-col items-center"},J={key:2,class:"font-medium text-lg mb-1"},Z={class:"text-sm"},G={class:"font-medium"},ee={ref:"form",class:"hidden"},te=["id","accept"];var ie=i(6204);const ae={name:"FileDropzone",components:{IconCloudUpload:ie.A,IconInnerShadowTop:W.A},inject:["baseFetch","t"],props:{templateId:{type:[Number,String],required:!0},acceptFileTypes:{type:String,required:!1,default:"image/*, application/pdf"}},emits:["success"],data:()=>({isLoading:!1,isProcessing:!1}),computed:{inputId:()=>"el"+Math.random().toString(32).split(".")[1],message(){return this.isLoading?this.t("uploading"):this.isProcessing?this.t("processing_"):"image/*, application/pdf"===this.acceptFileTypes?this.t("add_pdf_documents_or_images"):this.t("add_documents_or_images")}},methods:{upload:Q.methods.upload,onDropFiles(e){"image/*, application/pdf"!==this.acceptFileTypes||[...e.dataTransfer.files].every((e=>e.type.match(/(?:image\/)|(?:application\/pdf)/)))?(this.$refs.input.files=e.dataTransfer.files,this.upload()):alert(this.t("only_pdf_and_images_are_supported"))}}},le=(0,j.A)(ae,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("IconInnerShadowTop"),u=(0,o.g2)("IconCloudUpload");return(0,o.uX)(),(0,o.CE)("div",{class:"flex h-60 w-full",onDragover:t[1]||(t[1]=(0,s.D$)((()=>{}),["prevent"])),onDrop:t[2]||(t[2]=(0,s.D$)(((...e)=>n.onDropFiles&&n.onDropFiles(...e)),["prevent"]))},[(0,o.Lk)("label",{id:"document_dropzone",class:(0,r.C4)(["w-full relative hover:bg-base-200/30 rounded-md border border-2 border-base-content/10 border-dashed",{"opacity-50":l.isLoading||l.isProcessing}]),for:n.inputId},[(0,o.Lk)("div",H,[(0,o.Lk)("div",K,[l.isLoading||l.isProcessing?((0,o.uX)(),(0,o.Wv)(d,{key:0,class:"animate-spin",width:40,height:40})):((0,o.uX)(),(0,o.Wv)(u,{key:1,width:40,height:40})),n.message?((0,o.uX)(),(0,o.CE)("div",J,(0,r.v_)(n.message),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",Z,[(0,o.Lk)("span",G,(0,r.v_)(n.t("click_to_upload")),1),(0,o.eW)(" "+(0,r.v_)(n.t("or_drag_and_drop_files")),1)])])]),(0,o.Lk)("form",ee,[(0,o.Lk)("input",{id:n.inputId,ref:"input",type:"file",name:"files[]",accept:i.acceptFileTypes,multiple:"",onChange:t[0]||(t[0]=(...e)=>n.upload&&n.upload(...e))},null,40,te)],512)],10,Y)],32)}]]),se={key:0},ne=(0,o.Lk)("hr",{class:"mb-2"},null,-1),oe=["placeholder"],re=(0,o.Lk)("hr",{class:"mb-2"},null,-1),de={key:0,class:"top-0 bottom-0 text-center absolute flex items-center justify-center w-full flex-col"},ue=["onDragstart"],ce={class:"flex items-center justify-between relative cursor-grab"},pe={class:"flex items-center p-1 space-x-1"},he={class:"block pl-0.5"},me=["data-tip"],fe={key:1,class:"grid grid-cols-3 gap-1 pb-2"},be=["onDragstart","onClick"],_e={class:"flex items-center flex-col px-2 py-2"},ge={class:"text-xs mt-1"},ye=["data-tip"],ve={class:"w-0 absolute left-0"},we={class:"flex items-center flex-col px-2 py-2"},ke={class:"text-xs mt-1"},xe={key:2,class:"text-xs p-2 border border-base-200 rounded"},Ce={class:"list-disc list-outside ml-3"};const Fe={class:"list-field group mb-2"},De={class:"flex items-center justify-between relative group/contenteditable-container"},Se={class:"flex items-center p-1 space-x-1"},Le={key:0,class:"flex items-center relative"},Ee=["id"],Ae=["for"],Te={key:1,class:"flex items-center space-x-1"},Ie=["title"],$e=["title"],Pe=["title"],qe=["title"],Re=["title"],Me={class:"text-sm w-3.5"},Xe={key:0,class:"items-center flex w-full"},Ne=["onUpdate:modelValue","placeholder"],ze=["title","onClick"],Be=["onUpdate:modelValue","placeholder","readonly","onFocus"],Oe=["onClick"],Ue={key:0,class:"pb-1"};const We=["contenteditable"];const Ve={name:"ContenteditableField",components:{IconPencil:i(3615).A},inject:["t"],props:{modelValue:{type:String,required:!1,default:""},iconInline:{type:Boolean,required:!1,default:!1},iconWidth:{type:Number,required:!1,default:30},withRequired:{type:Boolean,required:!1,default:!1},selectOnEditClick:{type:Boolean,required:!1,default:!1},editable:{type:Boolean,required:!1,default:!0},iconStrokeWidth:{type:Number,required:!1,default:2}},emits:["update:model-value","focus","blur"],data:()=>({value:""}),watch:{modelValue:{handler(e){this.value=e},immediate:!0}},methods:{onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text/plain"),i=this.$el.getRootNode().getSelection();i.rangeCount&&(i.deleteFromDocument(),i.getRangeAt(0).insertNode(document.createTextNode(t)),i.collapseToEnd())},selectContent(){const e=this.$refs.contenteditable,t=document.createRange();t.selectNodeContents(e);const i=window.getSelection();i.removeAllRanges(),i.addRange(t)},onBlur(e){setTimeout((()=>{this.value=this.$refs.contenteditable.innerText.trim()||this.modelValue,this.$emit("update:model-value",this.value),this.$emit("blur",e)}),1)},focusContenteditable(){this.$refs.contenteditable.focus()},blurContenteditable(){this.$refs.contenteditable.blur()}}},je=(0,j.A)(Ve,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("IconPencil");return(0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)(["group/contenteditable relative overflow-visible",{"flex items-center":!i.iconInline}])},[(0,o.Lk)("span",{ref:"contenteditable",dir:"auto",contenteditable:i.editable,style:{"min-width":"2px"},class:(0,r.C4)([i.iconInline?"inline":"block","peer outline-none focus:block"]),onPaste:t[0]||(t[0]=(0,s.D$)(((...e)=>n.onPaste&&n.onPaste(...e)),["prevent"])),onKeydown:t[1]||(t[1]=(0,s.jR)((0,s.D$)(((...e)=>n.blurContenteditable&&n.blurContenteditable(...e)),["prevent"]),["enter"])),onFocus:t[2]||(t[2]=t=>e.$emit("focus",t)),onBlur:t[3]||(t[3]=(...e)=>n.onBlur&&n.onBlur(...e))},(0,r.v_)(l.value),43,We),i.withRequired?((0,o.uX)(),(0,o.CE)("span",{key:0,title:"Required",class:"text-red-500 peer-focus:hidden",onClick:t[4]||(t[4]=(...e)=>n.focusContenteditable&&n.focusContenteditable(...e))}," * ")):(0,o.Q3)("",!0),(0,o.bF)(d,{class:(0,r.C4)(["cursor-pointer flex-none opacity-0 group-hover/contenteditable-container:opacity-100 group-hover/contenteditable:opacity-100 align-middle peer-focus:hidden",{invisible:!i.editable,"ml-1":!i.withRequired,absolute:!i.iconInline,"inline align-bottom":i.iconInline}]),style:(0,r.Tr)(i.iconInline?{}:{right:-1.1*i.iconWidth+"px"}),title:n.t("edit"),width:i.iconWidth,"stroke-width":i.iconStrokeWidth,onClick:t[5]||(t[5]=e=>[n.focusContenteditable(),i.selectOnEditClick&&n.selectContent()])},null,8,["style","title","class","width","stroke-width"])],2)}]]),Qe=["title"],Ye={key:0},He=["onClick"];var Ke=i(394),Je=i(256),Ze=i(1921),Ge=i(1916),et=i(5890),tt=i(6885),it=i(4060),at=i(5291),lt=i(4087),st=i(8040),nt=i(5439),ot=i(1490),rt=i(8258),dt=i(201),ut=i(7313),ct=i(1326);const pt={name:"FiledTypeDropdown",inject:["withPhone","withPayment","t","fieldTypes"],props:{modelValue:{type:String,required:!0},menuClasses:{type:String,required:!1,default:"mt-1.5 bg-base-100"},menuStyle:{type:Object,required:!1,default:()=>({})},buttonClasses:{type:String,required:!1,default:""},editable:{type:Boolean,required:!1,default:!0},buttonWidth:{type:Number,required:!1,default:18}},emits:["update:model-value"],data:()=>({renderDropdown:!1}),computed:{fieldNames(){return{heading:this.t("heading"),text:this.t("text"),signature:this.t("signature"),initials:this.t("initials"),date:this.t("date"),number:this.t("number"),image:this.t("image"),file:this.t("file"),select:this.t("select"),checkbox:this.t("checkbox"),multiple:this.t("multiple"),radio:this.t("radio"),cells:this.t("cells"),stamp:this.t("stamp"),payment:this.t("payment"),phone:this.t("phone")}},fieldLabels(){return{text:this.t("text_field"),signature:this.t("signature_field"),initials:this.t("initials_field"),date:this.t("date_field"),number:this.t("number_field"),image:this.t("image_field"),file:this.t("file_field"),select:this.t("select_field"),checkbox:this.t("checkbox_field"),multiple:this.t("multiple_field"),radio:this.t("radio_field"),cells:this.t("cells_field"),stamp:this.t("stamp_field"),payment:this.t("payment_field"),phone:this.t("phone_field")}},fieldIcons:()=>({heading:Ke.A,text:Je.A,signature:Ze.A,initials:Ge.A,date:et.A,number:tt.A,image:it.A,checkbox:at.A,multiple:lt.A,file:st.A,radio:nt.A,select:ot.A,cells:rt.A,stamp:dt.A,payment:ut.A,phone:ct.A}),fieldIconsSorted(){return this.fieldTypes.length?this.fieldTypes.reduce(((e,t)=>(e[t]=this.fieldIcons[t],e)),{}):Object.fromEntries(Object.entries(this.fieldIcons).filter((([e])=>"heading"!==e)))}},methods:{closeDropdown(){document.activeElement.blur()}}},ht=(0,j.A)(pt,[["render",function(e,t,i,a,l,n){return(0,o.uX)(),(0,o.CE)("span",{class:"dropdown",onMouseenter:t[1]||(t[1]=e=>l.renderDropdown=!0),onTouchstart:t[2]||(t[2]=e=>l.renderDropdown=!0)},[(0,o.RG)(e.$slots,"default",{},(()=>[(0,o.Lk)("label",{tabindex:"0",title:n.fieldNames[i.modelValue],class:"cursor-pointer"},[((0,o.uX)(),(0,o.Wv)((0,o.$y)(n.fieldIcons[i.modelValue]),{width:i.buttonWidth,class:(0,r.C4)(i.buttonClasses),"stroke-width":1.6},null,8,["width","class"]))],8,Qe)])),i.editable&&l.renderDropdown?((0,o.uX)(),(0,o.CE)("ul",{key:0,tabindex:"0",class:(0,r.C4)(["dropdown-content menu menu-xs p-2 shadow rounded-box w-52 z-10 mb-3",i.menuClasses]),style:(0,r.Tr)(i.menuStyle),onClick:t[0]||(t[0]=(...e)=>n.closeDropdown&&n.closeDropdown(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.fieldIconsSorted,((t,a)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:a},[0!==n.fieldTypes.length&&!n.fieldTypes.includes(a)||!n.withPhone&&"phone"==a||!n.withPayment&&"payment"==a?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("li",Ye,[(0,o.Lk)("a",{href:"#",class:(0,r.C4)(["text-sm py-1 px-2",{active:a===i.modelValue}]),onClick:(0,s.D$)((t=>e.$emit("update:model-value",a)),["prevent"])},[((0,o.uX)(),(0,o.Wv)((0,o.$y)(t),{"stroke-width":1.6,width:20})),(0,o.eW)(" "+(0,r.v_)(n.fieldNames[a]),1)],10,He)]))],64)))),128))],6)):(0,o.Q3)("",!0)],32)}]]),mt=["title"],ft=["placeholder"],bt=["value"],_t=["placeholder"],gt=["placeholder"],yt={class:"flex items-center justify-center"},vt=(0,o.Lk)("span",{class:"h-2.5 border-l border-base-content mx-1"},null,-1),wt={key:0,class:"text-sm text-center"},kt={key:1,"data-turbo":"false",action:"/auth/stripe_connect","accept-charset":"UTF-8",target:"_blank",method:"post"},xt=["value"],Ct=["value"],Ft=(0,o.Lk)("input",{type:"hidden",name:"scope",value:"read_write",autocomplete:"off"},null,-1),Dt=["value"],St=["disabled"],Lt={key:0,class:"flex items-center space-x-1"},Et=(0,o.Lk)("span",null," Connect Stripe ",-1),At={key:1,class:"flex items-center space-x-1"},Tt=(0,o.Lk)("span",null," Connect Stripe ",-1),It={key:2,class:"block link text-center mt-1",href:"https://www.docuseal.co/blog/accept-payments-and-request-signatures-with-ease",target:"_blank","data-turbo":"false"},$t={key:2,class:"mb-1"},Pt={class:"text-sm"},qt=(0,o.Lk)("hr",null,null,-1),Rt={class:"text-sm"},Mt={class:"mt-1"},Xt={class:"text-sm"};var Nt=i(9339),zt=i(9092),Bt=i(1155),Ot=i(7222),Ut=i(3408),Wt=i(2896);const Vt=(0,n.KR)(!1),jt={name:"PaymentSettings",components:{IconSettings:Nt.A,IconCircleCheck:zt.A,IconRouteAltLeft:Bt.A,IconInfoCircle:Ot.A,IconMathFunction:Ut.A,IconInnerShadowTop:W.A,IconBrandStripe:Wt.A},inject:["backgroundColor","save","currencies","t","isPaymentConnected"],props:{field:{type:Object,required:!0}},emits:["click-condition","click-description","click-formula"],data:()=>({isLoading:!1}),computed:{isConnected:()=>Vt.value,isOauthSuccess:()=>document.location.search?.includes("stripe_connect_success"),redirectUri:()=>document.location.origin+"/auth/stripe_connect/callback",defaultCurrencies:()=>["USD","EUR","GBP","CAD","AUD"],currenciesList(){return this.currencies.length?this.currencies:this.defaultCurrencies},authenticityToken:()=>document.querySelector('meta[name="csrf-token"]')?.content,oauthState(){const e=new URLSearchParams("");return e.set("redir",document.location.href),e.toString()},defaultCurrency(){const e=Intl.DateTimeFormat().resolvedOptions().timeZone;return e.startsWith("Europe")?"EUR":e.includes("London")||e.includes("Belfast")?"GBP":e.includes("Vancouver")||e.includes("Toronto")||e.includes("Halifax")||e.includes("Edmonton")?"CAD":e.startsWith("Australia")?"AUD":"USD"}},created(){this.field.preferences||={}},mounted(){this.field.preferences.currency||=this.defaultCurrency,Vt.value||=this.isPaymentConnected,this.isConnected||this.checkStatus()},methods:{checkStatus(){this.isLoading=!0,fetch("/api/stripe_connect").then((async e=>{const{status:t}=await e.json();"connected"===t&&(Vt.value=!0)})).finally((()=>{this.isLoading=!1}))},closeDropdown(){document.activeElement.blur()}}},Qt=(0,j.A)(jt,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("IconSettings"),u=(0,o.g2)("IconCircleCheck"),c=(0,o.g2)("IconInnerShadowTop"),p=(0,o.g2)("IconBrandStripe"),h=(0,o.g2)("IconMathFunction"),m=(0,o.g2)("IconInfoCircle"),f=(0,o.g2)("IconRouteAltLeft");return(0,o.uX)(),(0,o.CE)("span",{class:(0,r.C4)(["dropdown dropdown-end",{"dropdown-open":(!i.field.preferences?.price&&!i.field.preferences?.formula||!n.isConnected)&&!l.isLoading}])},[(0,o.Lk)("label",{tabindex:"0",title:n.t("settings"),class:"cursor-pointer text-transparent group-hover:text-base-content"},[(0,o.bF)(d,{width:18,"stroke-width":1.6})],8,mt),(0,o.Lk)("ul",{tabindex:"0",class:"mt-1.5 dropdown-content menu menu-xs p-2 shadow bg-base-100 rounded-box w-52 z-10",draggable:"true",onDragstart:t[15]||(t[15]=(0,s.D$)((()=>{}),["prevent","stop"])),onClick:t[16]||(t[16]=(...e)=>n.closeDropdown&&n.closeDropdown(...e))},["price_id"in i.field.preferences?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:0,class:"py-1.5 px-1 relative",onClick:t[2]||(t[2]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.field.preferences.currency=e),placeholder:n.t("price"),class:"select select-bordered select-xs font-normal w-full max-w-xs !h-7 !outline-0",onChange:t[1]||(t[1]=(...e)=>n.save&&n.save(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.currenciesList,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,r.v_)(e),9,bt)))),128))],40,ft),[[s.u1,i.field.preferences.currency]]),(0,o.Lk)("label",{style:(0,r.Tr)([{backgroundColor:n.backgroundColor},{"font-size":"8px"}]),class:"absolute -top-1 left-2.5 px-1 h-4"},(0,r.v_)(n.t("currency")),5)])),(0,o.Lk)("div",{class:"py-1.5 px-1 relative",onClick:t[10]||(t[10]=(0,s.D$)((()=>{}),["stop"]))},[i.field.preferences.formula?((0,o.uX)(),(0,o.CE)("input",{key:0,type:"number",placeholder:n.t("price"),disabled:"true",class:"input input-bordered input-xs w-full max-w-xs h-7 !outline-0",onBlur:t[3]||(t[3]=(...e)=>n.save&&n.save(...e))},null,40,_t)):"price_id"in i.field.preferences?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=e=>i.field.preferences.price_id=e),placeholder:"Price ID: price_XXXXX",class:"input input-bordered input-xs w-full max-w-xs h-7 !outline-0",onBlur:t[5]||(t[5]=(...e)=>n.save&&n.save(...e))},null,544)),[[s.Jo,i.field.preferences.price_id]]):(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:2,"onUpdate:modelValue":t[6]||(t[6]=e=>i.field.preferences.price=e),type:"number",placeholder:n.t("price"),class:"input input-bordered input-xs w-full max-w-xs h-7 !outline-0",onBlur:t[7]||(t[7]=(...e)=>n.save&&n.save(...e))},null,40,gt)),[[s.Jo,i.field.preferences.price]]),i.field.preferences.price&&!i.field.preferences.formula?((0,o.uX)(),(0,o.CE)("label",{key:3,style:(0,r.Tr)([{backgroundColor:n.backgroundColor},{"font-size":"8px"}]),class:"absolute -top-1 left-2.5 px-1 h-4"},(0,r.v_)(n.t("price")),5)):(0,o.Q3)("",!0),(0,o.Lk)("div",yt,[(0,o.Lk)("a",{href:"#",class:(0,r.C4)(["hover:underline",{underline:!("price_id"in i.field.preferences)}]),style:{"font-size":"11px"},onClick:t[8]||(t[8]=e=>delete i.field.preferences.price_id)},(0,r.v_)(n.t("one_off")),3),vt,(0,o.Lk)("a",{href:"#",class:(0,r.C4)(["hover:underline",{underline:"price_id"in i.field.preferences}]),style:{"font-size":"11px"},onClick:t[9]||(t[9]=e=>i.field.preferences.price_id??="")},(0,r.v_)(n.t("recurrent")),3)])]),!n.isConnected||n.isOauthSuccess?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"py-1.5 px-1 relative",onClick:t[11]||(t[11]=(0,s.D$)((()=>{}),["stop"]))},[n.isConnected&&n.isOauthSuccess?((0,o.uX)(),(0,o.CE)("div",wt,[(0,o.bF)(u,{class:"inline text-green-600 w-4 h-4"}),(0,o.eW)(" Stripe Connected ")])):(0,o.Q3)("",!0),n.isConnected?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("form",kt,[(0,o.Lk)("input",{type:"hidden",name:"state",value:n.oauthState,autocomplete:"off"},null,8,xt),(0,o.Lk)("input",{type:"hidden",name:"redirect_uri",value:n.redirectUri,autocomplete:"off"},null,8,Ct),Ft,(0,o.Lk)("input",{type:"hidden",name:"authenticity_token",value:n.authenticityToken,autocomplete:"off"},null,8,Dt),(0,o.Lk)("button",{type:"submit",disabled:l.isLoading,class:"btn bg-[#7B73FF] hover:bg-[#0A2540] btn-sm text-white w-full"},[l.isLoading?((0,o.uX)(),(0,o.CE)("span",Lt,[(0,o.bF)(c,{class:"w-4 h-4 animate-spin inline"}),Et])):((0,o.uX)(),(0,o.CE)("span",At,[(0,o.bF)(p,{class:"w-4 h-4 inline"}),Tt]))],8,St)])),n.isConnected?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("a",It,(0,r.v_)(n.t("learn_more")),1))])):(0,o.Q3)("",!0),"price_id"in i.field.preferences?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("li",$t,[(0,o.Lk)("label",{class:"label-text cursor-pointer text-center w-full flex items-center",onClick:t[12]||(t[12]=t=>e.$emit("click-formula"))},[(0,o.bF)(h,{width:"18"}),(0,o.Lk)("span",Pt,(0,r.v_)(n.t("formula")),1)])])),qt,(0,o.Lk)("li",null,[(0,o.Lk)("label",{class:"label-text cursor-pointer text-center w-full flex items-center",onClick:t[13]||(t[13]=t=>e.$emit("click-description"))},[(0,o.bF)(m,{width:"18"}),(0,o.Lk)("span",Rt,(0,r.v_)(n.t("description")),1)])]),(0,o.Lk)("li",Mt,[(0,o.Lk)("label",{class:"label-text cursor-pointer text-center w-full flex items-center",onClick:t[14]||(t[14]=t=>e.$emit("click-condition"))},[(0,o.bF)(f,{width:"18"}),(0,o.Lk)("span",Xt,(0,r.v_)(n.t("condition")),1)])])],32)],2)}]]),Yt=["placeholder"],Ht=["value","selected"],Kt=["selected","value"],Jt=["placeholder"],Zt=["selected"],Gt=["value","selected"],ei=["placeholder","type"],ti=["selected"],ii=["selected","value"],ai=["selected","value"],li=["placeholder"],si=["placeholder"],ni=["value"],oi=["placeholder"],ri=["selected"],di=["selected"],ui=["selected"],ci={class:"cursor-pointer py-1.5"},pi=["disabled"],hi={class:"label-text"},mi={class:"cursor-pointer py-1.5"},fi=["checked"],bi={class:"label-text"},_i={class:"cursor-pointer py-1.5"},gi={class:"label-text"},yi={class:"cursor-pointer py-1.5"},vi={class:"label-text"},wi={class:"cursor-pointer py-1.5"},ki={class:"label-text"},xi={key:13,class:"pb-0.5 mt-0.5"},Ci={key:14},Fi={class:"text-sm"},Di={key:15},Si={class:"text-sm"},Li={key:16},Ei={class:"text-sm"},Ai=(0,o.Lk)("hr",{class:"pb-0.5 mt-0.5"},null,-1),Ti=["onClick"],Ii={key:0},$i={key:18};var Pi=i(6501),qi=i(5071),Ri=i(1763),Mi=i(1192);const Xi={name:"FieldSettings",components:{IconShape:Pi.A,IconInfoCircle:Ot.A,IconMathFunction:Ut.A,IconRouteAltLeft:Bt.A,IconCopy:qi.A,IconNewSection:Ri.A,IconX:Mi.A},inject:["template","save","t"],props:{field:{type:Object,required:!0},backgroundColor:{type:String,required:!1,default:null},defaultField:{type:Object,required:!1,default:null},withRequired:{type:Boolean,required:!1,default:!0},withAreas:{type:Boolean,required:!1,default:!0},editable:{type:Boolean,required:!1,default:!0}},emits:["set-draw","scroll-to","click-formula","click-description","click-condition","remove-area"],data:()=>({}),computed:{schemaAttachmentsIndexes(){return(this.template.schema||[]).reduce(((e,t,i)=>(e[t.attachment_uuid]=i,e)),{})},numberFormats:()=>["none","comma","dot","space"],dateFormats(){const e=["MM/DD/YYYY","DD/MM/YYYY","YYYY-MM-DD","DD-MM-YYYY","DD.MM.YYYY","MMM D, YYYY","MMMM D, YYYY","D MMM YYYY","D MMMM YYYY"];return(Intl.DateTimeFormat().resolvedOptions().timeZone?.includes("Seoul")||navigator.language?.startsWith("ko"))&&e.push("YYYY\ub144 MM\uc6d4 DD\uc77c"),this.field.preferences?.format&&!e.includes(this.field.preferences.format)&&e.unshift(this.field.preferences.format),e},validations:()=>({"^[0-9]{3}-[0-9]{2}-[0-9]{4}$":"ssn","^[0-9]{2}-[0-9]{7}$":"ein","^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$":"email","^https?://.*":"url","^[0-9]{5}(?:-[0-9]{4})?$":"zip","^[0-9]+$":"numbers_only","^[a-zA-Z]+$":"letters_only"}),sortedAreas(){return(this.field.areas||[]).sort(((e,t)=>this.schemaAttachmentsIndexes[e.attachment_uuid]-this.schemaAttachmentsIndexes[t.attachment_uuid]))}},methods:{onChangeValidation(e){"custom"===e.target.value?(this.field.validation={pattern:""},this.$nextTick((()=>this.$refs.validationCustom.focus()))):e.target.value?(this.field.validation||={},this.field.validation.pattern=e.target.value):delete this.field.validation,this.save()},copyToAllPages(e){const t=JSON.stringify(e.areas[0]);this.template.documents.forEach((i=>{const a=i.metadata?.pdf?.number_of_pages||i.preview_images.length;for(let l=0;l<=a-1;l++)e.areas.find((e=>e.attachment_uuid===i.uuid&&e.page===l))||e.areas.push({...JSON.parse(t),attachment_uuid:i.uuid,page:l})})),this.$emit("scroll-to",this.field.areas[this.field.areas.length-1]),this.save()},formatNumber:(e,t)=>"comma"===t?new Intl.NumberFormat("en-US").format(e):"dot"===t?new Intl.NumberFormat("de-DE").format(e):"space"===t?new Intl.NumberFormat("fr-FR").format(e):e,formatDate(e,t){const i=new Intl.DateTimeFormat([],{day:{D:"numeric",DD:"2-digit"}[t.match(/D+/)],month:{M:"numeric",MM:"2-digit",MMM:"short",MMMM:"long"}[t.match(/M+/)],year:{YYYY:"numeric",YY:"2-digit"}[t.match(/Y+/)]}).formatToParts(e);return t.replace(/D+/,i.find((e=>"day"===e.type)).value).replace(/M+/,i.find((e=>"month"===e.type)).value).replace(/Y+/,i.find((e=>"year"===e.type)).value)}}},Ni=(0,j.A)(Xi,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("IconInfoCircle"),u=(0,o.g2)("IconRouteAltLeft"),c=(0,o.g2)("IconMathFunction"),p=(0,o.g2)("IconShape"),h=(0,o.g2)("IconX"),m=(0,o.g2)("IconNewSection"),f=(0,o.g2)("IconCopy");return(0,o.uX)(),(0,o.CE)(o.FK,null,["number"===i.field.type?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"py-1.5 px-1 relative",onClick:t[1]||(t[1]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("select",{placeholder:n.t("format"),class:"select select-bordered select-xs font-normal w-full max-w-xs !h-7 !outline-0 bg-transparent",onChange:t[0]||(t[0]=e=>[i.field.preferences||={},i.field.preferences.format=e.target.value,n.save()])},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.numberFormats,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e,selected:e===i.field.preferences?.format||"none"===e&&!i.field.preferences?.format},(0,r.v_)(n.formatNumber(123456789.567,e)),9,Ht)))),128))],40,Yt),(0,o.Lk)("label",{style:(0,r.Tr)([{backgroundColor:i.backgroundColor},{"font-size":"8px"}]),class:"absolute -top-1 left-2.5 px-1 h-4"},(0,r.v_)(n.t("format")),5)])):(0,o.Q3)("",!0),["number"].includes(i.field.type)?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"py-1.5 px-1 relative",onClick:t[3]||(t[3]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("select",{class:"select select-bordered select-xs w-full max-w-xs h-7 !outline-0 font-normal bg-transparent",onChange:t[2]||(t[2]=e=>[i.field.preferences||={},i.field.preferences.align=e.target.value,n.save()])},[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(["left","right","center"],(e=>(0,o.Lk)("option",{key:e,selected:i.field.preferences?.align?e===i.field.preferences.align:"left"===e,value:e},(0,r.v_)(n.t(e)),9,Kt))),64))],32),(0,o.Lk)("label",{style:(0,r.Tr)([{backgroundColor:i.backgroundColor},{"font-size":"8px"}]),class:"absolute -top-1 left-2.5 px-1 h-4"},(0,r.v_)(n.t("align")),5)])):(0,o.Q3)("",!0),["select","radio"].includes(i.field.type)&&!i.defaultField?((0,o.uX)(),(0,o.CE)("div",{key:2,class:"py-1.5 px-1 relative",onClick:t[5]||(t[5]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("select",{placeholder:n.t("default_value"),dir:"auto",class:"select select-bordered select-xs w-full max-w-xs h-7 !outline-0 font-normal bg-transparent",onChange:t[4]||(t[4]=e=>[i.field.default_value=e.target.value,!i.field.default_value&&delete i.field.default_value,n.save()])},[(0,o.Lk)("option",{value:"",selected:!i.field.default_value},(0,r.v_)(n.t("none")),9,Zt),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.field.options||[],((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:e.uuid,value:e.value||`${n.t("option")} ${t+1}`,selected:i.field.default_value===(e.value||`${n.t("option")} ${t+1}`)},(0,r.v_)(e.value||`${n.t("option")} ${t+1}`),9,Gt)))),128))],40,Jt),(0,o.Lk)("label",{style:(0,r.Tr)([{backgroundColor:i.backgroundColor},{"font-size":"8px"}]),class:"absolute -top-1 left-2.5 px-1 h-4"},(0,r.v_)(n.t("default_value")),5)])):(0,o.Q3)("",!0),["text","number"].includes(i.field.type)&&!i.defaultField?((0,o.uX)(),(0,o.CE)("div",{key:3,class:"py-1.5 px-1 relative",onClick:t[8]||(t[8]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.field.default_value=e),placeholder:n.t("default_value"),dir:"auto",type:i.field.type,class:"input input-bordered input-xs w-full max-w-xs h-7 !outline-0 bg-transparent",onBlur:t[7]||(t[7]=(...e)=>n.save&&n.save(...e))},null,40,ei),[[s.hp,i.field.default_value]]),i.field.default_value?((0,o.uX)(),(0,o.CE)("label",{key:0,style:(0,r.Tr)([{backgroundColor:i.backgroundColor},{"font-size":"8px"}]),class:"absolute -top-1 left-2.5 px-1 h-4"},(0,r.v_)(n.t("default_value")),5)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),["text","cells"].includes(i.field.type)?((0,o.uX)(),(0,o.CE)("div",{key:4,class:"py-1.5 px-1 relative",onClick:t[10]||(t[10]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("select",{class:"select select-bordered select-xs w-full max-w-xs h-7 !outline-0 font-normal bg-transparent",onChange:t[9]||(t[9]=(...e)=>n.onChangeValidation&&n.onChangeValidation(...e))},[(0,o.Lk)("option",{selected:!i.field.validation,value:""},(0,r.v_)(n.t("none")),9,ti),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.validations,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:e,selected:i.field.validation?.pattern?t===i.field.validation.pattern:"none"===t,value:t},(0,r.v_)(n.t(e)),9,ii)))),128)),(0,o.Lk)("option",{selected:i.field.validation&&!n.validations[i.field.validation.pattern],value:n.validations[i.field.validation?.pattern]||!i.field.validation?.pattern?"custom":i.field.validation?.pattern},(0,r.v_)(n.t("custom")),9,ai)],32),(0,o.Lk)("label",{style:(0,r.Tr)([{backgroundColor:i.backgroundColor},{"font-size":"8px"}]),class:"absolute -top-1 left-2.5 px-1 h-4"},(0,r.v_)(n.t("validation")),5)])):(0,o.Q3)("",!0),["text","cells"].includes(i.field.type)&&i.field.validation&&!n.validations[i.field.validation.pattern]?((0,o.uX)(),(0,o.CE)("div",{key:5,class:"py-1.5 px-1 relative",onClick:t[13]||(t[13]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.bo)((0,o.Lk)("input",{ref:"validationCustom","onUpdate:modelValue":t[11]||(t[11]=e=>i.field.validation.pattern=e),placeholder:n.t("regexp_validation"),dir:"auto",class:"input input-bordered input-xs w-full max-w-xs h-7 !outline-0 bg-transparent",onBlur:t[12]||(t[12]=(...e)=>n.save&&n.save(...e))},null,40,li),[[s.Jo,i.field.validation.pattern]]),i.field.validation.pattern?((0,o.uX)(),(0,o.CE)("label",{key:0,style:(0,r.Tr)([{backgroundColor:i.backgroundColor},{"font-size":"8px"}]),class:"absolute -top-1 left-2.5 px-1 h-4"},(0,r.v_)(n.t("regexp_validation")),5)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),"date"===i.field.type?((0,o.uX)(),(0,o.CE)("div",{key:6,class:"py-1.5 px-1 relative",onClick:t[16]||(t[16]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>i.field.preferences.format=e),placeholder:n.t("format"),class:"select select-bordered select-xs font-normal w-full max-w-xs !h-7 !outline-0 bg-transparent",onChange:t[15]||(t[15]=(...e)=>n.save&&n.save(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.dateFormats,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,r.v_)(n.formatDate(new Date,e)),9,ni)))),128))],40,si),[[s.u1,i.field.preferences.format]]),(0,o.Lk)("label",{style:(0,r.Tr)([{backgroundColor:i.backgroundColor},{"font-size":"8px"}]),class:"absolute -top-1 left-2.5 px-1 h-4"},(0,r.v_)(n.t("format")),5)])):(0,o.Q3)("",!0),"signature"===i.field.type?((0,o.uX)(),(0,o.CE)("div",{key:7,class:"py-1.5 px-1 relative",onClick:t[18]||(t[18]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("select",{placeholder:n.t("format"),class:"select select-bordered select-xs font-normal w-full max-w-xs !h-7 !outline-0 bg-transparent",onChange:t[17]||(t[17]=e=>[i.field.preferences.format=e.target.value,n.save()])},[(0,o.Lk)("option",{value:"any",selected:!i.field.preferences?.format||"any"===i.field.preferences.format},(0,r.v_)(n.t("any")),9,ri),(0,o.Lk)("option",{value:"drawn",selected:"drawn"===i.field.preferences?.format},(0,r.v_)(n.t("drawn")),9,di),(0,o.Lk)("option",{value:"typed",selected:"typed"===i.field.preferences?.format},(0,r.v_)(n.t("typed")),9,ui)],40,oi),(0,o.Lk)("label",{style:(0,r.Tr)([{backgroundColor:i.backgroundColor},{"font-size":"8px"}]),class:"absolute -top-1 left-2.5 px-1 h-4"},(0,r.v_)(n.t("format")),5)])):(0,o.Q3)("",!0),i.withRequired&&"phone"!=i.field.type&&"stamp"!=i.field.type?((0,o.uX)(),(0,o.CE)("li",{key:8,onClick:t[21]||(t[21]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("label",ci,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":[t[19]||(t[19]=e=>i.field.required=e),t[20]||(t[20]=(...e)=>n.save&&n.save(...e))],type:"checkbox",disabled:!i.editable||i.defaultField,class:"toggle toggle-xs"},null,8,pi),[[s.lH,i.field.required]]),(0,o.Lk)("span",hi,(0,r.v_)(n.t("required")),1)])])):(0,o.Q3)("",!0),"stamp"==i.field.type?((0,o.uX)(),(0,o.CE)("li",{key:9,onClick:t[23]||(t[23]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("label",mi,[(0,o.Lk)("input",{checked:0!=i.field.preferences?.with_logo,type:"checkbox",class:"toggle toggle-xs",onChange:t[22]||(t[22]=e=>[i.field.preferences||={},i.field.preferences.with_logo=0==i.field.preferences.with_logo,n.save()])},null,40,fi),(0,o.Lk)("span",bi,(0,r.v_)(n.t("with_logo")),1)])])):(0,o.Q3)("",!0),"checkbox"==i.field.type?((0,o.uX)(),(0,o.CE)("li",{key:10,onClick:t[26]||(t[26]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("label",_i,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":[t[24]||(t[24]=e=>i.field.default_value=e),t[25]||(t[25]=e=>[i.field.default_value=e,i.field.readonly=e,n.save()])],type:"checkbox",class:"toggle toggle-xs"},null,512),[[s.lH,i.field.default_value]]),(0,o.Lk)("span",gi,(0,r.v_)(n.t("checked")),1)])])):(0,o.Q3)("",!0),"date"==i.field.type?((0,o.uX)(),(0,o.CE)("li",{key:11,onClick:t[29]||(t[29]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("label",yi,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":[t[27]||(t[27]=e=>i.field.readonly=e),t[28]||(t[28]=e=>[i.field.default_value=e?"{{date}}":null,i.field.readonly=e,n.save()])],type:"checkbox",class:"toggle toggle-xs"},null,512),[[s.lH,i.field.readonly]]),(0,o.Lk)("span",vi,(0,r.v_)(n.t("set_signing_date")),1)])])):(0,o.Q3)("",!0),["text","number"].includes(i.field.type)&&!i.defaultField?((0,o.uX)(),(0,o.CE)("li",{key:12,onClick:t[32]||(t[32]=(0,s.D$)((()=>{}),["stop"]))},[(0,o.Lk)("label",wi,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":[t[30]||(t[30]=e=>i.field.readonly=e),t[31]||(t[31]=(...e)=>n.save&&n.save(...e))],type:"checkbox",class:"toggle toggle-xs"},null,512),[[s.lH,i.field.readonly]]),(0,o.Lk)("span",ki,(0,r.v_)(n.t("read_only")),1)])])):(0,o.Q3)("",!0),"stamp"!=i.field.type?((0,o.uX)(),(0,o.CE)("hr",xi)):(0,o.Q3)("",!0),"stamp"!=i.field.type?((0,o.uX)(),(0,o.CE)("li",Ci,[(0,o.Lk)("label",{class:"label-text cursor-pointer text-center w-full flex items-center",onClick:t[33]||(t[33]=t=>e.$emit("click-description"))},[(0,o.bF)(d,{width:"18"}),(0,o.Lk)("span",Fi,(0,r.v_)(n.t("description")),1)])])):(0,o.Q3)("",!0),"stamp"!=i.field.type?((0,o.uX)(),(0,o.CE)("li",Di,[(0,o.Lk)("label",{class:"label-text cursor-pointer text-center w-full flex items-center",onClick:t[34]||(t[34]=t=>e.$emit("click-condition"))},[(0,o.bF)(u,{width:"18"}),(0,o.Lk)("span",Si,(0,r.v_)(n.t("condition")),1)])])):(0,o.Q3)("",!0),"number"==i.field.type?((0,o.uX)(),(0,o.CE)("li",Li,[(0,o.Lk)("label",{class:"label-text cursor-pointer text-center w-full flex items-center",onClick:t[35]||(t[35]=t=>e.$emit("click-formula"))},[(0,o.bF)(c,{width:"18"}),(0,o.Lk)("span",Ei,(0,r.v_)(n.t("formula")),1)])])):(0,o.Q3)("",!0),Ai,i.withAreas?((0,o.uX)(),(0,o.CE)(o.FK,{key:17},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.sortedAreas,((t,i)=>((0,o.uX)(),(0,o.CE)("li",{key:i},[(0,o.Lk)("a",{href:"#",class:"text-sm py-1 px-2 group/1",onClick:(0,s.D$)((i=>e.$emit("scroll-to",t)),["prevent"])},[(0,o.bF)(p,{width:20,"stroke-width":1.6}),(0,o.eW)(" "+(0,r.v_)(n.t("page"))+" ",1),n.template.schema.length>1?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)((0,r.v_)(n.template.schema.findIndex((e=>e.attachment_uuid===t.attachment_uuid))+1)+"-",1)],64)):(0,o.Q3)("",!0),(0,o.eW)((0,r.v_)(t.page+1)+" ",1),(0,o.bF)(h,{width:12,class:"group-hover/1:inline hidden",onClick:(0,s.D$)((i=>[e.$emit("remove-area",t),i.target.closest(".dropdown").querySelector("label").focus()]),["prevent","stop"])},null,8,["onClick"])],8,Ti)])))),128)),i.field.areas?.length&&["radio","multiple"].includes(i.field.type)?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("li",Ii,[(0,o.Lk)("a",{href:"#",class:"text-sm py-1 px-2",onClick:t[36]||(t[36]=(0,s.D$)((t=>e.$emit("set-draw",{field:i.field})),["prevent"]))},[(0,o.bF)(m,{width:20,"stroke-width":1.6}),(0,o.eW)(" "+(0,r.v_)(n.t("draw_new_area")),1)])]))],64)):(0,o.Q3)("",!0),1===i.field.areas?.length&&["date","signature","initials","text","cells"].includes(i.field.type)?((0,o.uX)(),(0,o.CE)("li",$i,[(0,o.Lk)("a",{href:"#",class:"text-sm py-1 px-2",onClick:t[37]||(t[37]=(0,s.D$)((e=>n.copyToAllPages(i.field)),["prevent"]))},[(0,o.bF)(f,{width:20,"stroke-width":1.6}),(0,o.eW)(" "+(0,r.v_)(n.t("copy_to_all_pages")),1)])])):(0,o.Q3)("",!0)],64)}]]),zi={class:"modal modal-open items-start !animate-none overflow-y-auto"},Bi={class:"modal-box pt-4 pb-6 px-6 mt-20 max-h-none w-full max-w-xl"},Oi={class:"flex justify-between items-center border-b pb-2 mb-2 font-medium"},Ui={key:0,class:"bg-base-300 rounded-xl py-2 px-3 text-center"},Wi={href:"https://www.docuseal.co/pricing",target:"_blank",class:"link"},Vi={class:"flex-inline mb-2 gap-2 space-y-1"},ji=["onClick"],Qi={class:"flex"},Yi=["readonly"],Hi={class:"mb-3 mt-1"},Ki={target:"blank",class:"text-sm mb-2 inline space-x-2"};const Ji={name:"FormulaModal",components:{IconCodePlus:i(1503).A},inject:["t","save","template","withFormula"],props:{field:{type:Object,required:!0},editable:{type:Boolean,required:!1,default:!0},buildDefaultName:{type:Function,required:!0}},emits:["close"],data:()=>({formula:""}),computed:{fields(){return this.template.fields.reduce(((e,t)=>(t!==this.field&&t.submitter_uuid===this.field.submitter_uuid&&["number"].includes(t.type)&&!t.preferences?.formula&&e.push(t),e)),[])}},created(){this.field.preferences||={}},mounted(){this.formula=this.humanizeFormula(this.field.preferences.formula||"")},methods:{humanizeFormula(e){return e.replace(/{{(.*?)}}/g,((e,t)=>{const i=this.fields.find((e=>e.uuid===t));return i?`{{${i.name||this.buildDefaultName(i,this.template.fields)}}}`:"{{FIELD NOT FOUND}}"}))},normalizeFormula(e){return e.replace(/{{(.*?)}}/g,((e,t)=>{const i=this.fields.find((e=>(e.name||this.buildDefaultName(e,this.template.fields)).trim()===t.trim()));return i?`{{${i.uuid}}}`:"{{FIELD NOT FOUND}}"}))},validateSaveAndClose(){if(!this.withFormula)return alert(this.t("available_only_in_pro"));const e=this.normalizeFormula(this.formula);e.includes("FIELD NOT FOUND")?alert(this.t("some_fields_are_missing_in_the_formula")):(this.field.preferences.formula=e,"payment"!==this.field.type&&(this.field.readonly=!!e),this.save(),this.$emit("close"))},insertTextUnderCursor(e){const t=this.$refs.textarea,i=t.selectionEnd,a=t.value.substring(0,i)+e+t.value.substring(i);this.formula=a,t.setSelectionRange(i+e.length,i+e.length),t.focus()},resizeTextarea(){const e=this.$refs.textarea;e.style.height="auto",e.style.height=e.scrollHeight+"px"}}},Zi=(0,j.A)(Ji,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("IconCodePlus");return(0,o.uX)(),(0,o.CE)("div",zi,[(0,o.Lk)("div",{class:"absolute top-0 bottom-0 right-0 left-0",onClick:t[0]||(t[0]=(0,s.D$)((t=>e.$emit("close")),["prevent"]))}),(0,o.Lk)("div",Bi,[(0,o.Lk)("div",Oi,[(0,o.Lk)("span",null,(0,r.v_)(n.t("formula"))+" - "+(0,r.v_)(i.field.name||i.buildDefaultName(i.field,n.template.fields)),1),(0,o.Lk)("a",{href:"#",class:"text-xl",onClick:t[1]||(t[1]=(0,s.D$)((t=>e.$emit("close")),["prevent"]))},"\xd7")]),(0,o.Lk)("div",null,[n.withFormula?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Ui,[(0,o.Lk)("a",Wi,(0,r.v_)(n.t("available_in_pro")),1)])),(0,o.Lk)("div",Vi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.fields,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e.uuid,class:"mr-1 btn btn-neutral btn-outline border-base-content/20 btn-sm normal-case font-normal bg-white !rounded-xl",onClick:(0,s.D$)((t=>n.insertTextUnderCursor(`{{${e.name||i.buildDefaultName(e,n.template.fields)}}}`)),["prevent"])},[(0,o.bF)(d,{width:"20",height:"20","stroke-width":"1.5"}),(0,o.eW)(" "+(0,r.v_)(e.name||i.buildDefaultName(e,n.template.fields)),1)],8,ji)))),128))]),(0,o.Lk)("div",null,[(0,o.Lk)("div",Qi,[(0,o.bo)((0,o.Lk)("textarea",{ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>l.formula=e),class:"base-textarea !rounded-xl !text-base font-mono w-full !outline-0 !ring-0 !px-3",readonly:!i.editable,required:"true",onInput:t[3]||(t[3]=(...e)=>n.resizeTextarea&&n.resizeTextarea(...e))},null,40,Yi),[[s.Jo,l.formula]])]),(0,o.Lk)("div",Hi,[(0,o.Lk)("div",Ki,[(0,o.Lk)("button",{class:"bg-base-200 px-2 rounded-xl",onClick:t[4]||(t[4]=e=>n.insertTextUnderCursor(" + "))}," + "),(0,o.Lk)("button",{class:"bg-base-200 px-2 rounded-xl",onClick:t[5]||(t[5]=e=>n.insertTextUnderCursor(" - "))}," - "),(0,o.Lk)("button",{class:"bg-base-200 px-2 rounded-xl",onClick:t[6]||(t[6]=e=>n.insertTextUnderCursor(" * "))}," * "),(0,o.Lk)("button",{class:"bg-base-200 px-2 rounded-xl",onClick:t[7]||(t[7]=e=>n.insertTextUnderCursor(" / "))}," / "),(0,o.Lk)("button",{class:"bg-base-200 px-2 rounded-xl",onClick:t[8]||(t[8]=e=>n.insertTextUnderCursor(" % "))}," % "),(0,o.Lk)("button",{class:"bg-base-200 px-2 rounded-xl",onClick:t[9]||(t[9]=e=>n.insertTextUnderCursor("^"))}," ^ "),(0,o.Lk)("button",{class:"bg-base-200 px-2 rounded-xl",onClick:t[10]||(t[10]=e=>n.insertTextUnderCursor("round()"))}," round(n, d) "),(0,o.Lk)("button",{class:"bg-base-200 px-2 rounded-xl",onClick:t[11]||(t[11]=e=>n.insertTextUnderCursor("abs()"))}," abs(n) ")])])]),(0,o.Lk)("button",{class:"base-button w-full",onClick:t[12]||(t[12]=(0,s.D$)(((...e)=>n.validateSaveAndClose&&n.validateSaveAndClose(...e)),["prevent"]))},(0,r.v_)(n.t("save")),1)])])])}]]),Gi={class:"modal modal-open items-start !animate-none overflow-y-auto"},ea={class:"modal-box pt-4 pb-6 px-6 mt-20 max-h-none w-full max-w-xl"},ta={class:"flex justify-between items-center border-b pb-2 mb-2 font-medium"},ia={key:0,class:"bg-base-300 rounded-xl py-2 px-3 text-center"},aa={href:"https://www.docuseal.co/pricing",target:"_blank",class:"link"},la={class:"my-4 space-y-5"},sa={key:0,class:"flex justify-between border-b mx-1 -mb-1 pb-1"},na={class:"text-sm"},oa=["onClick"],ra=["onChange"],da=["selected"],ua=["value","selected"],ca=["onUpdate:modelValue","required"],pa=["value"],ha=["onChange"],ma={value:"",disabled:"",selected:""},fa=["value","selected"],ba={class:"base-button w-full mt-2"},_a={key:1,class:"text-center w-full mt-4"};const ga={name:"ConditionModal",inject:["t","save","template","withConditions"],props:{field:{type:Object,required:!0},buildDefaultName:{type:Function,required:!0}},emits:["close"],data(){return{conditions:this.field.conditions?.[0]?JSON.parse(JSON.stringify(this.field.conditions)):[{}]}},computed:{fields(){return this.template.fields.reduce(((e,t)=>(t!==this.field&&t.submitter_uuid===this.field.submitter_uuid&&e.push(t),e)),[])}},created(){this.field.conditions||=[]},methods:{conditionField(e){return this.fields.find((t=>t.uuid===e.field_uuid))},conditionActions(e){return this.fieldActions(this.conditionField(e))},fieldActions(e){const t=[];return e?("checkbox"===e.type?t.push("checked","unchecked"):["radio","select"].includes(e.type)?t.push("equal","not_equal"):["multiple"].includes(e.type)?t.push("contains","does_not_contain"):t.push("not_empty","empty"),t):t},validateSaveAndClose(){if(!this.withConditions)return alert(this.t("available_only_in_pro"));this.conditions.find((e=>e.field_uuid))?this.field.conditions=this.conditions:delete this.field.conditions,this.save(),this.$emit("close")}}},ya=(0,j.A)(ga,[["render",function(e,t,i,a,l,n){return(0,o.uX)(),(0,o.CE)("div",Gi,[(0,o.Lk)("div",{class:"absolute top-0 bottom-0 right-0 left-0",onClick:t[0]||(t[0]=(0,s.D$)((t=>e.$emit("close")),["prevent"]))}),(0,o.Lk)("div",ea,[(0,o.Lk)("div",ta,[(0,o.Lk)("span",null,(0,r.v_)(n.t("condition"))+" - "+(0,r.v_)(i.field.name||i.buildDefaultName(i.field,n.template.fields)),1),(0,o.Lk)("a",{href:"#",class:"text-xl",onClick:t[1]||(t[1]=(0,s.D$)((t=>e.$emit("close")),["prevent"]))},"\xd7")]),(0,o.Lk)("div",null,[n.withConditions?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ia,[(0,o.Lk)("a",aa,(0,r.v_)(n.t("available_in_pro")),1)])),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>n.validateSaveAndClose&&n.validateSaveAndClose(...e)),["prevent"]))},[(0,o.Lk)("div",la,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.conditions,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"space-y-4 relative"},[l.conditions.length>1?((0,o.uX)(),(0,o.CE)("div",sa,[(0,o.Lk)("span",na,(0,r.v_)(n.t("condition"))+" "+(0,r.v_)(t+1),1),(0,o.Lk)("a",{href:"#",class:"link text-sm",onClick:(0,s.D$)((e=>l.conditions.splice(t,1)),["prevent"])},(0,r.v_)(n.t("remove")),9,oa)])):(0,o.Q3)("",!0),(0,o.Lk)("select",{class:(0,r.C4)(["select select-bordered select-sm w-full bg-white h-11 pl-4 text-base font-normal",{"text-gray-300":!e.field_uuid}]),required:"",onChange:t=>[e.field_uuid=t.target.value,delete e.value,n.conditionActions(e).includes(e.action)?"":e.action=n.conditionActions(e)[0]]},[(0,o.Lk)("option",{value:"",disabled:"",selected:!e.field_uuid},(0,r.v_)(n.t("select_field_")),9,da),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.fields,(t=>((0,o.uX)(),(0,o.CE)("option",{key:t.uuid,value:t.uuid,class:"text-base-content",selected:e.field_uuid===t.uuid},(0,r.v_)(t.name||i.buildDefaultName(t,n.template.fields)),9,ua)))),128))],42,ra),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t=>e.action=t,class:(0,r.C4)(["select select-bordered select-sm w-full h-11 pl-4 text-base font-normal",{"bg-white":e.field_uuid,"bg-base-300":!e.field_uuid}]),required:e.field_uuid},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.conditionActions(e),(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,r.v_)(n.t(e)),9,pa)))),128))],10,ca),[[s.u1,e.action]]),["radio","select","multiple"].includes(n.conditionField(e)?.type)&&n.conditionField(e)?.options?((0,o.uX)(),(0,o.CE)("select",{key:1,class:(0,r.C4)(["select select-bordered select-sm w-full bg-white h-11 pl-4 text-base font-normal",{"text-gray-300":!e.value}]),required:"",onChange:t=>e.value=t.target.value},[(0,o.Lk)("option",ma,(0,r.v_)(n.t("select_value_")),1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.conditionField(e).options,((t,i)=>((0,o.uX)(),(0,o.CE)("option",{key:t.uuid,value:t.uuid,selected:e.value===t.uuid,class:"text-base-content"},(0,r.v_)(t.value||`${n.t("option")} ${i+1}`),9,fa)))),128))],42,ha)):(0,o.Q3)("",!0)])))),128))]),(0,o.Lk)("a",{href:"#",class:"inline float-right link text-right mb-3 px-2",onClick:t[2]||(t[2]=(0,s.D$)((e=>l.conditions.push({})),["prevent"]))}," + "+(0,r.v_)(n.t("add_condition")),1),(0,o.Lk)("button",ba,(0,r.v_)(n.t("save")),1)],32),i.field.conditions?.[0]?.field_uuid?((0,o.uX)(),(0,o.CE)("div",_a,[(0,o.Lk)("button",{class:"link",onClick:t[4]||(t[4]=e=>[l.conditions=[],delete i.field.conditions,n.validateSaveAndClose()])},(0,r.v_)(n.t("remove_condition")),1)])):(0,o.Q3)("",!0)])])])}]]),va={class:"modal modal-open items-start !animate-none overflow-y-auto"},wa={class:"modal-box pt-4 pb-6 px-6 mt-20 max-h-none w-full max-w-xl"},ka={class:"flex justify-between items-center border-b pb-2 mb-2 font-medium"},xa={class:"space-y-1 mb-1"},Ca={dir:"auto",class:"label text-sm",for:"description_field"},Fa=["readonly"],Da={dir:"auto",class:"label text-sm",for:"title_field"},Sa=["readonly"],La={class:"base-button w-full mt-4"};const Ea={name:"DescriptionModal",inject:["t","save","template"],props:{field:{type:Object,required:!0},editable:{type:Boolean,required:!1,default:!0},buildDefaultName:{type:Function,required:!0}},emits:["close"],data(){return{description:this.field.description,title:this.field.title}},mounted(){this.resizeTextarea()},methods:{saveAndClose(){this.field.description=this.description,this.field.title=this.title,this.save(),this.$emit("close")},resizeTextarea(){const e=this.$refs.textarea;e.style.height="auto",e.style.height=e.scrollHeight+"px"}}},Aa=(0,j.A)(Ea,[["render",function(e,t,i,a,l,n){return(0,o.uX)(),(0,o.CE)("div",va,[(0,o.Lk)("div",{class:"absolute top-0 bottom-0 right-0 left-0",onClick:t[0]||(t[0]=(0,s.D$)((t=>e.$emit("close")),["prevent"]))}),(0,o.Lk)("div",wa,[(0,o.Lk)("div",ka,[(0,o.Lk)("span",null,(0,r.v_)(i.field.name||i.buildDefaultName(i.field,n.template.fields)),1),(0,o.Lk)("a",{href:"#",class:"text-xl",onClick:t[1]||(t[1]=(0,s.D$)((t=>e.$emit("close")),["prevent"]))},"\xd7")]),(0,o.Lk)("div",null,[(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>n.saveAndClose&&n.saveAndClose(...e)),["prevent"]))},[(0,o.Lk)("div",xa,[(0,o.Lk)("div",null,[(0,o.Lk)("label",Ca,(0,r.v_)(n.t("description")),1),(0,o.bo)((0,o.Lk)("textarea",{id:"description_field",ref:"textarea","onUpdate:modelValue":t[2]||(t[2]=e=>l.description=e),dir:"auto",class:"base-textarea !text-base w-full",readonly:!i.editable,onInput:t[3]||(t[3]=(...e)=>n.resizeTextarea&&n.resizeTextarea(...e))},null,40,Fa),[[s.Jo,l.description]])]),(0,o.Lk)("div",null,[(0,o.Lk)("label",Da,(0,r.v_)(n.t("display_title"))+" ("+(0,r.v_)(n.t("optional"))+") ",1),(0,o.bo)((0,o.Lk)("input",{id:"title_field","onUpdate:modelValue":t[4]||(t[4]=e=>l.title=e),dir:"auto",readonly:!i.editable,class:"base-input !text-base w-full"},null,8,Sa),[[s.Jo,l.title]])])]),(0,o.Lk)("button",La,(0,r.v_)(n.t("save")),1)],32)])])])}]]);var Ta=i(9992),Ia=i(3829);const $a={name:"TemplateField",components:{Contenteditable:je,IconSettings:Nt.A,FieldSettings:Ni,PaymentSettings:Qt,IconNewSection:Ri.A,FormulaModal:Zi,DescriptionModal:Aa,ConditionsModal:ya,IconRouteAltLeft:Bt.A,IconTrashX:Ta.A,IconMathFunction:Ut.A,FieldType:ht},inject:["template","save","backgroundColor","selectedAreaRef","t","locale"],props:{field:{type:Object,required:!0},defaultField:{type:Object,required:!1,default:null},editable:{type:Boolean,required:!1,default:!0}},emits:["set-draw","remove","scroll-to"],data:()=>({isNameFocus:!1,showPaymentModal:!1,isShowFormulaModal:!1,isShowConditionsModal:!1,isShowDescriptionModal:!1,renderDropdown:!1}),computed:{fieldNames:ht.computed.fieldNames,fieldLabels:ht.computed.fieldLabels,dropdownBgColor(){return["",null,"transparent"].includes(this.backgroundColor)?"white":this.backgroundColor},schemaAttachmentsIndexes(){return(this.template.schema||[]).reduce(((e,t,i)=>(e[t.attachment_uuid]=i,e)),{})},sortedAreas(){return(this.field.areas||[]).sort(((e,t)=>this.schemaAttachmentsIndexes[e.attachment_uuid]-this.schemaAttachmentsIndexes[t.attachment_uuid]))},modalContainerEl(){return this.$el.getRootNode().querySelector("#docuseal_modal_container")},defaultName(){return this.buildDefaultName(this.field,this.template.fields)},areas(){return this.field.areas||[]}},created(){this.field.preferences||={},"date"===this.field.type&&(this.field.preferences.format||={"de-DE":"DD.MM.YYYY"}[this.locale]||(Intl.DateTimeFormat().resolvedOptions().locale.endsWith("-US")||new Intl.DateTimeFormat("en-US",{timeZoneName:"short"}).format(new Date).match(/\s(?:CST|CDT|PST|PDT|EST|EDT)$/)?"MM/DD/YYYY":"DD/MM/YYYY"))},methods:{removeArea(e){this.field.areas.splice(this.field.areas.indexOf(e),1),this.save()},buildDefaultName(e,t){if("payment"===e.type&&e.preferences?.price&&!e.preferences?.formula){const{price:t,currency:i}=e.preferences||{},a=new Intl.NumberFormat([],{style:"currency",currency:i}).format(t);return`${this.fieldNames[e.type]} ${a}`}{const i=t.filter((t=>t.type===e.type)).indexOf(e);return"heading"===this.field.type?`${this.fieldNames[e.type]} ${i+1}`:`${this.fieldLabels[e.type]} ${i+1}`}},onNameFocus(e){this.isNameFocus=!0,this.field.name||setTimeout((()=>{this.$refs.name.$refs.contenteditable.innerText=" "}),1)},maybeFocusOnOptionArea(e){const t=this.field.areas.find((t=>t.option_uuid===e.uuid));t&&(this.selectedAreaRef.value=t)},scrollToFirstArea(){return this.sortedAreas[0]&&this.$emit("scroll-to",this.sortedAreas[0])},closeDropdown(){document.activeElement.blur()},addOption(){this.field.options.push({value:"",uuid:(0,Ia.A)()}),this.$nextTick((()=>{const e=this.$refs.options.querySelectorAll("input");e[e.length-1]?.focus()})),this.save()},removeOption(e){this.field.options.splice(this.field.options.indexOf(e),1);-1!==this.field.areas.findIndex((t=>t.option_uuid===e.uuid))&&this.field.areas.splice(this.field.areas.findIndex((t=>t.option_uuid===e.uuid)),1),this.save()},maybeUpdateOptions(){delete this.field.default_value,["radio","multiple","select"].includes(this.field.type)||delete this.field.options,["radio","multiple","select"].includes(this.field.type)&&(this.field.options||=[{value:"",uuid:(0,Ia.A)()}]),["heading"].includes(this.field.type)&&(this.field.readonly=!0),(this.field.areas||[]).forEach((e=>{"cells"===this.field.type?e.cell_w=2*e.w/Math.floor(e.w/e.h):delete e.cell_w}))},onNameBlur(e){const t=this.$refs.name.$refs.contenteditable.innerText.trim();t?this.field.name=t:(this.field.name="",this.$refs.name.$refs.contenteditable.innerText=this.defaultName),this.isNameFocus=!1,this.save()}}},Pa=(0,j.A)($a,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("FieldType"),u=(0,o.g2)("Contenteditable"),c=(0,o.g2)("IconNewSection"),p=(0,o.g2)("IconMathFunction"),h=(0,o.g2)("IconRouteAltLeft"),m=(0,o.g2)("PaymentSettings"),f=(0,o.g2)("IconSettings"),b=(0,o.g2)("FieldSettings"),_=(0,o.g2)("IconTrashX"),g=(0,o.g2)("FormulaModal"),y=(0,o.g2)("ConditionsModal"),v=(0,o.g2)("DescriptionModal");return(0,o.uX)(),(0,o.CE)("div",Fe,[(0,o.Lk)("div",{class:"border border-base-300 rounded rounded-tr-none relative group",style:(0,r.Tr)({backgroundColor:n.backgroundColor})},[(0,o.Lk)("div",De,[(0,o.Lk)("div",{class:"absolute top-0 bottom-0 right-0 left-0 cursor-pointer",onClick:t[0]||(t[0]=(...e)=>n.scrollToFirstArea&&n.scrollToFirstArea(...e))}),(0,o.Lk)("div",Se,[(0,o.bF)(d,{modelValue:i.field.type,"onUpdate:modelValue":[t[1]||(t[1]=e=>i.field.type=e),t[2]||(t[2]=e=>[n.maybeUpdateOptions(),n.save()])],editable:i.editable&&!i.defaultField&&"heading"!=i.field.type,"button-width":20,"menu-classes":"mt-1.5","menu-style":{backgroundColor:n.dropdownBgColor},onClick:n.scrollToFirstArea},null,8,["modelValue","editable","menu-style","onClick"]),(0,o.bF)(u,{ref:"name","model-value":i.defaultField&&i.field.title||i.field.name||n.defaultName,editable:i.editable&&!i.defaultField&&"heading"!=i.field.type,"icon-inline":!0,"icon-width":18,"icon-stroke-width":1.6,onFocus:t[3]||(t[3]=e=>[n.onNameFocus(),n.scrollToFirstArea()]),onBlur:n.onNameBlur},null,8,["model-value","editable","onBlur"])]),l.isNameFocus?((0,o.uX)(),(0,o.CE)("div",Le,["phone"!=i.field.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{id:`required-checkbox-${i.field.uuid}`,"onUpdate:modelValue":t[4]||(t[4]=e=>i.field.required=e),type:"checkbox",class:"checkbox checkbox-xs no-animation rounded",onMousedown:t[5]||(t[5]=(0,s.D$)((()=>{}),["prevent"]))},null,40,Ee),[[s.lH,i.field.required]]),(0,o.Lk)("label",{for:`required-checkbox-${i.field.uuid}`,class:"label text-xs",onClick:t[6]||(t[6]=(0,s.D$)((e=>i.field.required=!i.field.required),["prevent"])),onMousedown:t[7]||(t[7]=(0,s.D$)((()=>{}),["prevent"]))},(0,r.v_)(n.t("required")),41,Ae)],64)):(0,o.Q3)("",!0)])):i.editable?((0,o.uX)(),(0,o.CE)("div",Te,[i.field&&!i.field.areas?.length?((0,o.uX)(),(0,o.CE)("button",{key:0,title:n.t("draw"),class:"relative cursor-pointer text-transparent group-hover:text-base-content",onClick:t[8]||(t[8]=t=>e.$emit("set-draw",{field:i.field}))},[(0,o.bF)(c,{width:18,"stroke-width":1.6})],8,Ie)):(0,o.Q3)("",!0),i.field.preferences?.formula?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"relative cursor-pointer text-transparent group-hover:text-base-content",title:n.t("formula"),onClick:t[9]||(t[9]=e=>l.isShowFormulaModal=!0)},[(0,o.bF)(p,{width:18,"stroke-width":1.6})],8,$e)):(0,o.Q3)("",!0),i.field.conditions?.length?((0,o.uX)(),(0,o.CE)("button",{key:2,class:"relative cursor-pointer text-transparent group-hover:text-base-content",title:n.t("condition"),onClick:t[10]||(t[10]=e=>l.isShowConditionsModal=!0)},[(0,o.bF)(h,{width:18,"stroke-width":1.6})],8,Pe)):(0,o.Q3)("",!0),"payment"===i.field.type?((0,o.uX)(),(0,o.Wv)(m,{key:3,field:i.field,onClickCondition:t[11]||(t[11]=e=>l.isShowConditionsModal=!0),onClickDescription:t[12]||(t[12]=e=>l.isShowDescriptionModal=!0),onClickFormula:t[13]||(t[13]=e=>l.isShowFormulaModal=!0)},null,8,["field"])):"heading"!==i.field.type?((0,o.uX)(),(0,o.CE)("span",{key:4,class:"dropdown dropdown-end",onMouseenter:t[21]||(t[21]=e=>l.renderDropdown=!0),onTouchstart:t[22]||(t[22]=e=>l.renderDropdown=!0)},[(0,o.Lk)("label",{tabindex:"0",title:n.t("settings"),class:"cursor-pointer text-transparent group-hover:text-base-content"},[(0,o.bF)(f,{width:18,"stroke-width":1.6})],8,qe),l.renderDropdown?((0,o.uX)(),(0,o.CE)("ul",{key:0,tabindex:"0",class:"mt-1.5 dropdown-content menu menu-xs p-2 shadow rounded-box w-52 z-10",style:(0,r.Tr)({backgroundColor:n.dropdownBgColor}),draggable:"true",onDragstart:t[19]||(t[19]=(0,s.D$)((()=>{}),["prevent","stop"])),onClick:t[20]||(t[20]=(...e)=>n.closeDropdown&&n.closeDropdown(...e))},[(0,o.bF)(b,{field:i.field,"default-field":i.defaultField,editable:i.editable,"background-color":n.dropdownBgColor,onClickFormula:t[14]||(t[14]=e=>l.isShowFormulaModal=!0),onClickDescription:t[15]||(t[15]=e=>l.isShowDescriptionModal=!0),onClickCondition:t[16]||(t[16]=e=>l.isShowConditionsModal=!0),onSetDraw:t[17]||(t[17]=t=>e.$emit("set-draw",t)),onRemoveArea:n.removeArea,onScrollTo:t[18]||(t[18]=t=>e.$emit("scroll-to",t))},null,8,["field","default-field","editable","background-color","onRemoveArea"])],36)):(0,o.Q3)("",!0)],32)):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"relative text-transparent group-hover:text-base-content pr-1",title:n.t("remove"),onClick:t[23]||(t[23]=t=>e.$emit("remove",i.field))},[(0,o.bF)(_,{width:18,"stroke-width":1.6})],8,Re)])):(0,o.Q3)("",!0)]),i.field.options?((0,o.uX)(),(0,o.CE)("div",{key:0,ref:"options",class:"border-t border-base-300 mx-2 pt-2 space-y-1.5",draggable:"true",onDragstart:t[27]||(t[27]=(0,s.D$)((()=>{}),["prevent","stop"]))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.field.options,((a,l)=>((0,o.uX)(),(0,o.CE)("div",{key:a.uuid,class:"flex space-x-1.5 items-center"},[(0,o.Lk)("span",Me,(0,r.v_)(l+1)+". ",1),i.editable&&["radio","multiple"].includes(i.field.type)&&(l>0||i.field.areas.find((e=>e.option_uuid))||!i.field.areas.length)&&!i.field.areas.find((e=>e.option_uuid===a.uuid))?((0,o.uX)(),(0,o.CE)("div",Xe,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e=>a.value=e,class:"w-full input input-primary input-xs text-sm bg-transparent !pr-7 -mr-6",type:"text",dir:"auto",required:"",placeholder:`${n.t("option")} ${l+1}`,onBlur:t[24]||(t[24]=(...e)=>n.save&&n.save(...e))},null,40,Ne),[[s.Jo,a.value]]),(0,o.Lk)("button",{title:n.t("draw"),tabindex:"-1",onClick:(0,s.D$)((t=>e.$emit("set-draw",{field:i.field,option:a})),["prevent"])},[(0,o.bF)(c,{width:18,"stroke-width":1.6})],8,ze)])):(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:1,"onUpdate:modelValue":e=>a.value=e,class:"w-full input input-primary input-xs text-sm bg-transparent",placeholder:`${n.t("option")} ${l+1}`,type:"text",readonly:!i.editable,required:"",dir:"auto",onFocus:e=>n.maybeFocusOnOptionArea(a),onBlur:t[25]||(t[25]=(...e)=>n.save&&n.save(...e))},null,40,Be)),[[s.Jo,a.value]]),i.editable?((0,o.uX)(),(0,o.CE)("button",{key:2,class:"text-sm w-3.5",tabindex:"-1",onClick:e=>n.removeOption(a)}," \xd7 ",8,Oe)):(0,o.Q3)("",!0)])))),128)),i.field.options&&!i.editable?((0,o.uX)(),(0,o.CE)("div",Ue)):i.field.options&&i.editable?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"text-center text-sm w-full pb-1",onClick:t[26]||(t[26]=(...e)=>n.addOption&&n.addOption(...e))}," + "+(0,r.v_)(n.t("add_option")),1)):(0,o.Q3)("",!0)],544)):(0,o.Q3)("",!0)],4),l.isShowFormulaModal?((0,o.uX)(),(0,o.Wv)(o.Im,{key:0,to:n.modalContainerEl},[(0,o.bF)(g,{field:i.field,editable:i.editable&&!i.defaultField,"build-default-name":n.buildDefaultName,onClose:t[28]||(t[28]=e=>l.isShowFormulaModal=!1)},null,8,["field","editable","build-default-name"])],8,["to"])):(0,o.Q3)("",!0),l.isShowConditionsModal?((0,o.uX)(),(0,o.Wv)(o.Im,{key:1,to:n.modalContainerEl},[(0,o.bF)(y,{field:i.field,"build-default-name":n.buildDefaultName,onClose:t[29]||(t[29]=e=>l.isShowConditionsModal=!1)},null,8,["field","build-default-name"])],8,["to"])):(0,o.Q3)("",!0),l.isShowDescriptionModal?((0,o.uX)(),(0,o.Wv)(o.Im,{key:2,to:n.modalContainerEl},[(0,o.bF)(v,{field:i.field,editable:i.editable&&!i.defaultField,"build-default-name":n.buildDefaultName,onClose:t[30]||(t[30]=e=>l.isShowDescriptionModal=!1)},null,8,["field","editable","build-default-name"])],8,["to"])):(0,o.Q3)("",!0)])}]]),qa={class:"flex space-x-2 items-end"},Ra={class:"group/contenteditable-container bg-base-100 rounded-md p-2 border border-base-300 w-full flex justify-between items-end"},Ma={class:"flex items-center space-x-2"},Xa={class:"dropdown dropdown-top dropdown-end"},Na={tabindex:"0",class:"bg-base-100 cursor-pointer rounded-md p-2 border border-base-300 w-full flex justify-center"},za=["onClick"],Ba={class:"py-1 flex items-center"},Oa=["onClick"],Ua={key:0},Wa={class:"py-1"},Va=["title"],ja={key:1,ref:"label",tabindex:"0",class:"group cursor-pointer group/contenteditable-container rounded-md p-2 border border-base-300 hover:border-content w-full flex justify-between"},Qa={class:"flex items-center space-x-2"},Ya={class:"flex items-center transition-all duration-75 group-hover:border border-base-content/20 border-dashed w-6 h-6 flex justify-center items-center rounded"},Ha=["onClick"],Ka={class:"py-1 flex items-center"},Ja={key:0,class:"flex"},Za={class:"flex-col pr-1 hidden group-hover:flex -mt-1 h-0"},Ga=["title","onClick"],el=["title","onClick"],tl=["onClick"],il={key:0},al={class:"py-1"};var ll=i(8501),sl=i(2631),nl=i(9050),ol=i(9426);const rl={name:"FieldSubmitter",components:{IconUserPlus:ll.A,IconChevronDown:sl.A,Contenteditable:je,IconPlus:nl.A,IconTrashX:Ta.A,IconChevronUp:ol.A},inject:["t","save"],props:{submitters:{type:Array,required:!0},editable:{type:Boolean,required:!1,default:!0},compact:{type:Boolean,required:!1,default:!1},mobileView:{type:Boolean,required:!1,default:!1},allowAddNew:{type:Boolean,required:!1,default:!0},modelValue:{type:String,required:!0},menuStyle:{type:Object,required:!1,default:()=>({})},menuClasses:{type:String,required:!1,default:"dropdown-content menu p-2 shadow rounded-box w-full z-10"}},emits:["update:model-value","remove","new-submitter","name-change"],data:()=>({renderDropdown:!1}),computed:{colors:()=>["bg-red-500","bg-sky-500","bg-emerald-500","bg-yellow-300","bg-purple-600","bg-pink-500","bg-cyan-500","bg-orange-500","bg-lime-500","bg-indigo-500","bg-red-500","bg-sky-500","bg-emerald-500","bg-yellow-300","bg-purple-600","bg-pink-500","bg-cyan-500","bg-orange-500","bg-lime-500","bg-indigo-500"],names(){return[this.t("first_party"),this.t("second_party"),this.t("third_party"),this.t("fourth_party"),this.t("fifth_party"),this.t("sixth_party"),this.t("seventh_party"),this.t("eighth_party"),this.t("ninth_party"),this.t("tenth_party"),this.t("eleventh_party"),this.t("twelfth_party"),this.t("thirteenth_party"),this.t("fourteenth_party"),this.t("fifteenth_party"),this.t("sixteenth_party"),this.t("seventeenth_party"),this.t("eighteenth_party"),this.t("nineteenth_party"),this.t("twentieth_party")]},selectedSubmitter(){return this.submitters.find((e=>e.uuid===this.modelValue))}},methods:{selectSubmitter(e){this.$emit("update:model-value",e.uuid)},remove(e){window.confirm(this.t("are_you_sure_"))&&this.$emit("remove",e)},move(e,t){const i=this.submitters.indexOf(e);this.submitters.splice(i,1),i+t>this.submitters.length?this.submitters.unshift(e):i+t<0?this.submitters.push(e):this.submitters.splice(i+t,0,e),this.selectSubmitter(e),this.save()},addSubmitter(){const e={name:this.names[this.submitters.length],uuid:(0,Ia.A)()};this.submitters.push(e),this.$emit("update:model-value",e.uuid),this.$emit("new-submitter",e)},closeDropdown(){document.activeElement.blur()}}},dl=(0,j.A)(rl,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("Contenteditable"),u=(0,o.g2)("IconChevronUp"),c=(0,o.g2)("IconTrashX"),p=(0,o.g2)("IconUserPlus");return i.mobileView?((0,o.uX)(),(0,o.CE)("div",{key:0,onMouseenter:t[4]||(t[4]=e=>l.renderDropdown=!0),onTouchstart:t[5]||(t[5]=e=>l.renderDropdown=!0)},[(0,o.Lk)("div",qa,[(0,o.Lk)("div",Ra,[(0,o.Lk)("div",Ma,[(0,o.Lk)("span",{class:(0,r.C4)(["w-3 h-3 flex-shrink-0 rounded-full",n.colors[i.submitters.indexOf(n.selectedSubmitter)]])},null,2),(0,o.bF)(d,{modelValue:n.selectedSubmitter.name,"onUpdate:modelValue":[t[0]||(t[0]=e=>n.selectedSubmitter.name=e),t[1]||(t[1]=t=>e.$emit("name-change",n.selectedSubmitter))],class:"cursor-text","icon-inline":!0,editable:i.editable,"select-on-edit-click":!0,"icon-width":18},null,8,["modelValue","editable"])])]),(0,o.Lk)("div",Xa,[(0,o.Lk)("label",Na,[(0,o.bF)(u,{width:"24",height:"24"})]),i.editable&&l.renderDropdown?((0,o.uX)(),(0,o.CE)("ul",{key:0,tabindex:"0",class:(0,r.C4)(["rounded-md min-w-max mb-2",i.menuClasses]),style:(0,r.Tr)(i.menuStyle),onClick:t[3]||(t[3]=(...e)=>n.closeDropdown&&n.closeDropdown(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.submitters,((e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:e.uuid},[(0,o.Lk)("a",{href:"#",class:(0,r.C4)(["flex px-2 group justify-between items-center",{active:e===n.selectedSubmitter}]),onClick:(0,s.D$)((t=>n.selectSubmitter(e)),["prevent"])},[(0,o.Lk)("span",Ba,[(0,o.Lk)("span",{class:(0,r.C4)(["rounded-full w-3 h-3 ml-1 mr-3",n.colors[t]])},null,2),(0,o.Lk)("span",null,(0,r.v_)(e.name),1)]),i.submitters.length>1&&i.editable?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"px-2",onClick:(0,s.D$)((t=>n.remove(e)),["prevent","stop"])},[(0,o.bF)(c,{width:18})],8,Oa)):(0,o.Q3)("",!0)],10,za)])))),128)),i.submitters.length<n.names.length&&i.editable?((0,o.uX)(),(0,o.CE)("li",Ua,[(0,o.Lk)("a",{href:"#",class:"flex px-2",onClick:t[2]||(t[2]=(0,s.D$)(((...e)=>n.addSubmitter&&n.addSubmitter(...e)),["prevent"]))},[(0,o.bF)(p,{width:20,"stroke-width":1.6}),(0,o.Lk)("span",Wa,(0,r.v_)(n.t("add"))+" "+(0,r.v_)(n.names[i.submitters.length]),1)])])):(0,o.Q3)("",!0)],6)):(0,o.Q3)("",!0)])])],32)):((0,o.uX)(),(0,o.CE)("div",{key:1,class:"dropdown",onMouseenter:t[10]||(t[10]=e=>l.renderDropdown=!0),onTouchstart:t[11]||(t[11]=e=>l.renderDropdown=!0)},[i.compact?((0,o.uX)(),(0,o.CE)("label",{key:0,tabindex:"0",title:n.selectedSubmitter?.name,class:"cursor-pointer text-base-100 flex h-full items-center justify-center"},[(0,o.Lk)("button",{class:(0,r.C4)(["mx-1 w-3 h-3 rounded-full",n.colors[i.submitters.indexOf(n.selectedSubmitter)]])},null,2)],8,Va)):((0,o.uX)(),(0,o.CE)("label",ja,[(0,o.Lk)("div",Qa,[(0,o.Lk)("span",{class:(0,r.C4)(["w-3 h-3 rounded-full",n.colors[i.submitters.indexOf(n.selectedSubmitter)]])},null,2),(0,o.bF)(d,{modelValue:n.selectedSubmitter.name,"onUpdate:modelValue":[t[6]||(t[6]=e=>n.selectedSubmitter.name=e),t[7]||(t[7]=t=>e.$emit("name-change",n.selectedSubmitter))],class:"cursor-text","icon-inline":!0,editable:i.editable,"select-on-edit-click":!0,"icon-width":18},null,8,["modelValue","editable"])]),(0,o.Lk)("span",Ya,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(i.editable?"IconPlus":"IconChevronDown"),{width:"18",height:"18"}))])],512)),!i.editable&&i.compact||!l.renderDropdown?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("ul",{key:2,tabindex:"0",class:(0,r.C4)(i.menuClasses),style:(0,r.Tr)(i.menuStyle),onClick:t[9]||(t[9]=(...e)=>n.closeDropdown&&n.closeDropdown(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.submitters,((t,a)=>((0,o.uX)(),(0,o.CE)("li",{key:t.uuid},[(0,o.Lk)("a",{href:"#",class:(0,r.C4)(["flex px-2 group justify-between items-center",{active:t===n.selectedSubmitter,"py-0.5":i.submitters.length>8}]),onClick:(0,s.D$)((e=>n.selectSubmitter(t)),["prevent"])},[(0,o.Lk)("span",Ka,[(0,o.Lk)("span",{class:(0,r.C4)(["rounded-full w-3 h-3 ml-1 mr-3",n.colors[a]])},null,2),(0,o.Lk)("span",null,(0,r.v_)(t.name),1)]),!i.compact&&i.submitters.length>1&&i.editable?((0,o.uX)(),(0,o.CE)("div",Ja,[(0,o.Lk)("div",Za,[(0,o.Lk)("button",{title:n.t("up"),class:"relative w-2",style:{"font-size":"10px","margin-bottom":"-4px"},onClick:(0,s.D$)((i=>[n.move(t,-1),e.$refs.label.focus()]),["prevent","stop"])}," \u25b2 ",8,Ga),(0,o.Lk)("button",{title:n.t("down"),class:"relative w-2",style:{"font-size":"10px","margin-top":"-4px"},onClick:(0,s.D$)((i=>[n.move(t,1),e.$refs.label.focus()]),["prevent","stop"])}," \u25bc ",8,el)]),!i.compact&&i.submitters.length>1&&i.editable?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"hidden group-hover:block px-2",onClick:(0,s.D$)((e=>n.remove(t)),["prevent","stop"])},[(0,o.bF)(c,{width:18})],8,tl)):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)],10,Ha)])))),128)),i.submitters.length<n.names.length&&i.editable&&i.allowAddNew?((0,o.uX)(),(0,o.CE)("li",il,[(0,o.Lk)("a",{href:"#",class:"flex px-2",onClick:t[8]||(t[8]=(0,s.D$)(((...e)=>n.addSubmitter&&n.addSubmitter(...e)),["prevent"]))},[(0,o.bF)(p,{width:20,"stroke-width":1.6}),(0,o.Lk)("span",al,(0,r.v_)(n.t("add"))+" "+(0,r.v_)(n.names[i.submitters.length]),1)])])):(0,o.Q3)("",!0)],6))],32))}]]);var ul=i(3638),cl=i(3513);const pl={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},hl=[(0,o.Fv)('<path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path><path d="M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"></path>',7)];const ml={name:"DragIcon"},fl=(0,j.A)(ml,[["render",function(e,t,i,a,l,s){return(0,o.uX)(),(0,o.CE)("svg",pl,hl)}]]),bl={name:"TemplateFields",components:{Field:Pa,FieldType:ht,IconCirclePlus:ul.A,FieldSubmitter:dl,IconDrag:fl,IconLock:cl.A},inject:["save","backgroundColor","withPhone","withPayment","t","fieldsDragFieldRef"],props:{fields:{type:Array,required:!0},withHelp:{type:Boolean,required:!1,default:!0},editable:{type:Boolean,required:!1,default:!0},defaultFields:{type:Array,required:!1,default:()=>[]},defaultRequiredFields:{type:Array,required:!1,default:()=>[]},onlyDefinedFields:{type:Boolean,required:!1,default:!0},drawFieldType:{type:String,required:!1,default:""},defaultSubmitters:{type:Array,required:!1,default:()=>[]},withStickySubmitters:{type:Boolean,required:!1,default:!0},fieldTypes:{type:Array,required:!1,default:()=>[]},submitters:{type:Array,required:!0},selectedSubmitter:{type:Object,required:!0}},emits:["add-field","set-draw","set-draw-type","set-drag","drag-end","scroll-to-area","change-submitter"],data:()=>({defaultFieldsSearch:""}),computed:{fieldNames:ht.computed.fieldNames,fieldIcons:ht.computed.fieldIcons,isShowFieldSearch(){return this.submitterDefaultFields.length>15},fieldIconsSorted(){return this.fieldTypes.length?this.fieldTypes.reduce(((e,t)=>(e[t]=this.fieldIcons[t],e)),{}):Object.fromEntries(Object.entries(this.fieldIcons).filter((([e])=>"heading"!==e)))},submitterFields(){return this.fields.filter((e=>e.submitter_uuid===this.selectedSubmitter.uuid))},submitterDefaultFields(){return this.defaultFields.filter((e=>!this.submitterFields.find((t=>t.name===e.name))&&(!e.role||e.role===this.selectedSubmitter.name)))},filteredSubmitterDefaultFields(){return this.defaultFieldsSearch?this.submitterDefaultFields.filter((e=>e.name.toLowerCase().includes(this.defaultFieldsSearch.toLowerCase()))):this.submitterDefaultFields}},methods:{onDragstart(e){this.$emit("set-drag",e)},onFieldDragover(e){const t=e.target.closest("[data-uuid]"),i=this.$refs.fields.querySelector(`[data-uuid="${this.fieldsDragFieldRef.value.uuid}"]`);if(i&&t&&t!==i){const e=Array.from(this.$refs.fields.children);e.indexOf(i)<e.indexOf(t)?t.after(i):t.before(i)}},reorderFields(){Array.from(this.$refs.fields.children).forEach(((e,t)=>{if(e.dataset.uuid!==this.fields[t].uuid){const i=this.fields.find((t=>t.uuid===e.dataset.uuid));this.fields.splice(this.fields.indexOf(i),1),this.fields.splice(t,0,i)}})),this.save()},removeSubmitter(e){[...this.fields].forEach((t=>{t.submitter_uuid===e.uuid&&this.removeField(t)})),this.submitters.splice(this.submitters.indexOf(e),1),this.selectedSubmitter===e&&this.$emit("change-submitter",this.submitters[0]),this.save()},removeField(e){this.fields.splice(this.fields.indexOf(e),1),this.fields.forEach((t=>{(t.conditions||[]).forEach((i=>{i.field_uuid===e.uuid&&t.conditions.splice(t.conditions.indexOf(i),1)}))})),this.save()}}},_l=(0,j.A)(bl,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("FieldSubmitter"),u=(0,o.g2)("Field"),c=(0,o.g2)("IconDrag"),p=(0,o.g2)("FieldType"),h=(0,o.g2)("IconLock");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:(0,r.C4)(i.withStickySubmitters?"sticky top-0 z-[1]":"")},[(0,o.bF)(d,{"model-value":i.selectedSubmitter.uuid,class:"roles-dropdown w-full rounded-lg",style:(0,r.Tr)(i.withStickySubmitters?{backgroundColor:n.backgroundColor}:{}),submitters:i.submitters,"menu-style":{backgroundColor:["",null,"transparent"].includes(n.backgroundColor)?"white":n.backgroundColor},editable:i.editable&&!i.defaultSubmitters.length,onNewSubmitter:n.save,onRemove:n.removeSubmitter,onNameChange:n.save,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("change-submitter",i.submitters.find((e=>e.uuid===t))))},null,8,["model-value","style","submitters","menu-style","editable","onNewSubmitter","onRemove","onNameChange"])],2),(0,o.Lk)("div",{ref:"fields",class:"fields mb-1 mt-2",onDragover:t[4]||(t[4]=(0,s.D$)(((...e)=>n.onFieldDragover&&n.onFieldDragover(...e)),["prevent"])),onDrop:t[5]||(t[5]=(...e)=>n.reorderFields&&n.reorderFields(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.submitterFields,(a=>((0,o.uX)(),(0,o.Wv)(u,{key:a.uuid,"data-uuid":a.uuid,field:a,"type-index":i.fields.filter((e=>e.type===a.type)).indexOf(a),editable:i.editable&&(!n.fieldsDragFieldRef.value||n.fieldsDragFieldRef.value!==a),"default-field":i.defaultFields.find((e=>e.name===a.name)),draggable:i.editable,onDragstart:e=>n.fieldsDragFieldRef.value=a,onDragend:t[1]||(t[1]=e=>n.fieldsDragFieldRef.value=null),onRemove:n.removeField,onScrollTo:t[2]||(t[2]=t=>e.$emit("scroll-to-area",t)),onSetDraw:t[3]||(t[3]=t=>e.$emit("set-draw",t))},null,8,["data-uuid","field","type-index","editable","default-field","draggable","onDragstart","onRemove"])))),128))],544),n.submitterDefaultFields.length&&i.editable?((0,o.uX)(),(0,o.CE)("div",se,[ne,n.isShowFieldSearch?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.defaultFieldsSearch=e),placeholder:n.t("search_field"),class:"input input-ghost input-xs px-0 text-base mb-2 !outline-0 !rounded bg-transparent w-full"},null,8,oe),[[s.Jo,l.defaultFieldsSearch]]),re],64)):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:"overflow-auto relative",style:(0,r.Tr)({maxHeight:n.isShowFieldSearch?"210px":"",minHeight:n.isShowFieldSearch?"210px":""})},[!n.filteredSubmitterDefaultFields.length&&l.defaultFieldsSearch?((0,o.uX)(),(0,o.CE)("div",de,[(0,o.Lk)("div",null,(0,r.v_)(n.t("field_not_found")),1),(0,o.Lk)("a",{href:"#",class:"link",onClick:t[7]||(t[7]=(0,s.D$)((e=>l.defaultFieldsSearch=""),["prevent"]))},(0,r.v_)(n.t("clear")),1)])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredSubmitterDefaultFields,(a=>((0,o.uX)(),(0,o.CE)("div",{key:a.name,style:(0,r.Tr)({backgroundColor:n.backgroundColor}),draggable:"true",class:"default-field border border-base-300 rounded rounded-tr-none relative group mb-2",onDragstart:e=>n.onDragstart({type:"text",...a}),onDragend:t[8]||(t[8]=t=>e.$emit("drag-end"))},[(0,o.Lk)("div",ce,[(0,o.Lk)("div",pe,[(0,o.bF)(c),(0,o.bF)(p,{"model-value":a.type||"text",editable:!1,"button-width":20},null,8,["model-value"]),(0,o.Lk)("span",he,(0,r.v_)(a.title||a.name),1)]),i.defaultRequiredFields.includes(a)?((0,o.uX)(),(0,o.CE)("span",{key:0,"data-tip":n.t("required"),class:"text-red-400 text-3xl pr-1.5 tooltip tooltip-left h-8"}," * ",8,me)):(0,o.Q3)("",!0)])],44,ue)))),128))],4)])):(0,o.Q3)("",!0),i.editable&&!i.onlyDefinedFields?((0,o.uX)(),(0,o.CE)("div",fe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.fieldIconsSorted,((a,l)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:l},[0!==i.fieldTypes.length&&!i.fieldTypes.includes(l)||!n.withPhone&&"phone"==l||!n.withPayment&&"payment"==l?"phone"!=l||0!==i.fieldTypes.length&&!i.fieldTypes.includes(l)?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,r.C4)(["tooltip tooltip-bottom flex",{"tooltip-bottom-end":n.withPayment,"tooltip-bottom":!n.withPayment}]),"data-tip":n.t("unlock_sms_verified_phone_number_field_with_paid_plan_use_text_field_for_phone_numbers_without_verification")},[(0,o.Lk)("a",{href:"https://www.docuseal.co/pricing",target:"_blank",class:"opacity-50 flex items-center justify-center border border-dashed border-base-300 w-full rounded relative",style:(0,r.Tr)({backgroundColor:n.backgroundColor})},[(0,o.Lk)("div",ve,[(0,o.bF)(h,{width:"18",height:"18","stroke-width":"1.5"})]),(0,o.Lk)("div",we,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(a))),(0,o.Lk)("span",ke,(0,r.v_)(n.fieldNames[l]),1)])],4)],10,ye)):((0,o.uX)(),(0,o.CE)("button",{key:0,draggable:"true",class:(0,r.C4)(["field-type-button group flex items-center justify-center border border-dashed w-full rounded relative",i.drawFieldType===l?"border-base-content/40":"border-base-300 hover:border-base-content/20"]),style:(0,r.Tr)({backgroundColor:n.backgroundColor}),onDragstart:e=>n.onDragstart({type:l}),onDragend:t[9]||(t[9]=t=>e.$emit("drag-end")),onClick:t=>["file","payment"].includes(l)?e.$emit("add-field",l):e.$emit("set-draw-type",l)},[(0,o.Lk)("div",{class:(0,r.C4)(["flex items-console transition-all cursor-grab h-full absolute left-0",i.drawFieldType===l?"bg-base-200/50":"group-hover:bg-base-200/50"])},[(0,o.bF)(c,{class:"my-auto"})],2),(0,o.Lk)("div",_e,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(a))),(0,o.Lk)("span",ge,(0,r.v_)(n.fieldNames[l]),1)])],46,be))],64)))),128))])):(0,o.Q3)("",!0),i.fields.length<4&&i.editable&&i.withHelp?((0,o.uX)(),(0,o.CE)("div",xe,[(0,o.Lk)("ul",Ce,[(0,o.Lk)("li",null,(0,r.v_)(n.t("draw_a_text_field_on_the_page_with_a_mouse")),1),(0,o.Lk)("li",null,(0,r.v_)(n.t("drag_and_drop_any_other_field_type_on_the_page")),1),(0,o.Lk)("li",null,(0,r.v_)(n.t("click_on_the_field_type_above_to_start_drawing_it")),1)])])):(0,o.Q3)("",!0)],64)}]]),gl=_l,yl={class:"absolute text-center w-full bottom-0 pr-3 mb-4"},vl={class:"w-full bg-base-200 px-4 py-2 rounded-md inline-flex space-x-2 mx-auto items-center justify-between mb-2 z-20 md:hidden"},wl={class:"flex items-center space-x-2"};const kl={name:"MobileDrawField",components:{Field:Pa,FieldSubmitter:dl},inject:["save","t","backgroundColor"],props:{drawField:{type:Object,required:!0},editable:{type:Boolean,required:!1,default:!0},submitters:{type:Array,required:!0},fields:{type:Array,required:!0},selectedSubmitter:{type:Object,required:!0}},emits:["change-submitter","cancel"],computed:{fieldNames:ht.computed.fieldNames,fieldIcons:ht.computed.fieldIcons},methods:{removeSubmitter(e){[...this.fields].forEach((t=>{t.submitter_uuid===e.uuid&&this.removeField(t)})),this.submitters.splice(this.submitters.indexOf(e),1),this.selectedSubmitter===e&&this.$emit("change-submitter",this.submitters[0]),this.save()},removeField(e){this.fields.splice(this.fields.indexOf(e),1),this.save()}}},xl=(0,j.A)(kl,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("FieldSubmitter");return(0,o.uX)(),(0,o.CE)("div",yl,[(0,o.Lk)("span",vl,[(0,o.Lk)("div",wl,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(n.fieldIcons[i.drawField.type]),{width:20,height:20,class:"inline","stroke-width":1.6})),(0,o.Lk)("span",null,(0,r.v_)(n.t("draw_field").replace("{field}",n.fieldNames[i.drawField.type])),1)]),(0,o.Lk)("a",{href:"#",class:"link block text-center",onClick:t[0]||(t[0]=(0,s.D$)((t=>e.$emit("cancel")),["prevent"]))},(0,r.v_)(n.t("cancel")),1)]),(0,o.bF)(d,{"model-value":i.selectedSubmitter.uuid,submitters:i.submitters,editable:i.editable,"mobile-view":!0,"menu-style":{backgroundColor:["",null,"transparent"].includes(n.backgroundColor)?"white":n.backgroundColor},onNewSubmitter:n.save,onRemove:n.removeSubmitter,onNameChange:n.save,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("change-submitter",i.submitters.find((e=>e.uuid===t))))},null,8,["model-value","submitters","editable","menu-style","onNewSubmitter","onRemove","onNameChange"])])}]]);const Cl=["src","width","height"];const Fl={key:1,class:"top-0 bottom-0 right-0 left-0 absolute"},Dl=["contenteditable"],Sl={key:2,class:"flex items-center ml-1.5"},Ll=["id"],El=["for"],Al=["id","checked"],Tl=["for"],Il=["title"],$l=["title"],Pl={key:1,class:"whitespace-pre-wrap"},ql={key:2},Rl={key:3,class:"w-full flex items-center"},Ml=["contenteditable","placeholder"];var Xl=i(4744),Nl=i(9440);const zl={name:"FieldArea",components:{FieldType:ht,IconCheck:Xl.A,FieldSettings:Ni,FormulaModal:Zi,IconDotsVertical:Nl.A,DescriptionModal:Aa,ConditionsModal:ya,FieldSubmitter:dl,IconX:Mi.A},inject:["template","selectedAreaRef","save","t"],props:{area:{type:Object,required:!0},inputMode:{type:Boolean,required:!1,default:!1},isDraw:{type:Boolean,required:!1,default:!1},defaultField:{type:Object,required:!1,default:null},withFieldPlaceholder:{type:Boolean,required:!1,default:!1},defaultSubmitters:{type:Array,required:!1,default:()=>[]},editable:{type:Boolean,required:!1,default:!0},field:{type:Object,required:!1,default:null}},emits:["start-resize","stop-resize","start-drag","stop-drag","remove","scroll-to"],data:()=>({isShowFormulaModal:!1,isShowConditionsModal:!1,isContenteditable:!1,isSettingsFocus:!1,isShowDescriptionModal:!1,isResize:!1,isDragged:!1,isMoved:!1,renderDropdown:!1,isNameFocus:!1,textOverflowChars:0,dragFrom:{x:0,y:0}}),computed:{fieldNames:ht.computed.fieldNames,fieldLabels:ht.computed.fieldLabels,fieldIcons:ht.computed.fieldIcons,isDefaultValuePresent(){return!("radio"===this.field?.type&&this.field?.areas?.length>1)&&(this.field?.default_value||0===this.field?.default_value)},isValueInput(){return"heading"===this.field.type&&this.isSelected||this.isContenteditable||this.inputMode&&["text","number","date"].includes(this.field.type)},modalContainerEl(){return this.$el.getRootNode().querySelector("#docuseal_modal_container")},defaultName(){return this.buildDefaultName(this.field,this.template.fields)},alignClasses:()=>({center:"justify-center",left:"justify-start",right:"justify-end"}),optionIndexText(){return this.area.option_uuid&&this.field.options?`${this.field.options.findIndex((e=>e.uuid===this.area.option_uuid))+1}.`:""},cells(){const e=[];let t=0;for(;t+(this.area.cell_w+this.area.cell_w/4)<this.area.w;)t+=this.area.cell_w||9999999,e.push(t);return e},submitter(){return this.template.submitters.find((e=>e.uuid===this.field.submitter_uuid))},submitterIndex(){return this.template.submitters.indexOf(this.submitter)},borderColors:()=>["border-red-500/80","border-sky-500/80","border-emerald-500/80","border-yellow-300/80","border-purple-600/80","border-pink-500/80","border-cyan-500/80","border-orange-500/80","border-lime-500/80","border-indigo-500/80","border-red-500/80","border-sky-500/80","border-emerald-500/80","border-yellow-300/80","border-purple-600/80","border-pink-500/80","border-cyan-500/80","border-orange-500/80","border-lime-500/80","border-indigo-500/80"],bgColors:()=>["bg-red-100","bg-sky-100","bg-emerald-100","bg-yellow-100","bg-purple-100","bg-pink-100","bg-cyan-100","bg-orange-100","bg-lime-100","bg-indigo-100","bg-red-100","bg-sky-100","bg-emerald-100","bg-yellow-100","bg-purple-100","bg-pink-100","bg-cyan-100","bg-orange-100","bg-lime-100","bg-indigo-100"],isSelected(){return this.selectedAreaRef.value===this.area},positionStyle(){const{x:e,y:t,w:i,h:a}=this.area;return{top:100*t+"%",left:100*e+"%",width:100*i+"%",height:100*a+"%"}}},watch:{"field.default_value"(){this.$nextTick((()=>{["date","text","number"].includes(this.field.type)&&this.field.default_value&&this.$refs.textContainer&&(0===this.textOverflowChars||this.textOverflowChars-4>`${this.field.default_value}`.length)&&(this.textOverflowChars=this.$el.clientHeight<this.$refs.textContainer.clientHeight?`${this.field.default_value}`.length:0)}))}},mounted(){this.$nextTick((()=>{["date","text","number"].includes(this.field.type)&&this.field.default_value&&this.$refs.textContainer&&(0===this.textOverflowChars||this.textOverflowChars-4>`${this.field.default_value}`.length)&&(this.textOverflowChars=this.$el.clientHeight<this.$refs.textContainer.clientHeight?`${this.field.default_value}`.length:0)}))},methods:{buildDefaultName:Pa.methods.buildDefaultName,closeDropdown(){document.activeElement.blur()},maybeToggleDefaultValue(){["text","number"].includes(this.field.type)?(this.isContenteditable=!0,this.$nextTick((()=>this.focusValueInput()))):"checkbox"===this.field.type?(this.field.readonly=!this.field.readonly,!0===this.field.default_value?delete this.field.default_value:this.field.default_value=!0,this.save()):"date"===this.field.type&&(this.field.readonly=!this.field.readonly,"{{date}}"===this.field.default_value?delete this.field.default_value:this.field.default_value="{{date}}",this.save())},maybeToggleCheckboxValue(){this.inputMode&&"checkbox"===this.field.type&&(this.field.readonly=!this.field.readonly,!0===this.field.default_value?delete this.field.default_value:this.field.default_value=!0,this.save())},focusValueInput(e){this.$refs.defaultValue!==document.activeElement&&(this.$refs.defaultValue.focus(),this.$refs.defaultValue.innerText.length&&this.$refs.defaultValue!==e?.target&&window.getSelection().collapse(this.$refs.defaultValue.firstChild,this.$refs.defaultValue.innerText.length))},formatNumber:(e,t)=>"comma"===t?new Intl.NumberFormat("en-US").format(e):"dot"===t?new Intl.NumberFormat("de-DE").format(e):"space"===t?new Intl.NumberFormat("fr-FR").format(e):e,maybeBlurSettings(e){e.relatedTarget&&this.$refs.settingsDropdown.contains(e.relatedTarget)||(this.isSettingsFocus=!1)},onNameFocus(e){this.selectedAreaRef.value=this.area,this.isNameFocus=!0,this.$refs.name.style.minWidth=this.$refs.name.clientWidth+"px",this.field.name||setTimeout((()=>{this.$refs.name.innerText=" "}),1)},startResizeCell(e){this.$el.getRootNode().addEventListener("mousemove",this.onResizeCell),this.$el.getRootNode().addEventListener("mouseup",this.stopResizeCell),this.$emit("start-resize","ew")},stopResizeCell(e){this.$el.getRootNode().removeEventListener("mousemove",this.onResizeCell),this.$el.getRootNode().removeEventListener("mouseup",this.stopResizeCell),this.$emit("stop-resize"),this.save()},onPaste(e){const t=(e.clipboardData||window.clipboardData).getData("text/plain"),i=this.$el.getRootNode().getSelection();i.rangeCount&&(i.deleteFromDocument(),i.getRangeAt(0).insertNode(document.createTextNode(t)),i.collapseToEnd())},onResizeCell(e){if("mask"===e.target.id){const t=e.offsetX/(e.target.clientWidth-1);t>this.area.x&&(this.area.cell_w=t-this.area.x)}},maybeUpdateOptions(){delete this.field.default_value,["radio","multiple","select"].includes(this.field.type)||delete this.field.options,["heading"].includes(this.field.type)&&(this.field.readonly=!0),["select","multiple","radio"].includes(this.field.type)&&(this.field.options||=[{value:"",uuid:(0,Ia.A)()}]),(this.field.areas||[]).forEach((e=>{"cells"===this.field.type?e.cell_w=2*e.w/Math.floor(e.w/e.h):delete e.cell_w}))},onNameBlur(e){e.relatedTarget===this.$refs.settingsButton&&(this.isSettingsFocus=!0);const t=this.$refs.name.innerText.trim();this.isNameFocus=!1,this.$refs.name.style.minWidth="",t?this.field.name=t:(this.field.name="",this.$refs.name.innerText=this.defaultName),this.save()},onDefaultValueBlur(e){const t=this.$refs.defaultValue.innerText.trim();if(this.isContenteditable=!1,t){if("number"===this.field.type){const e=parseFloat(t);(e||0===e)&&(this.field.default_value=parseFloat(t))}else this.field.default_value=t;[!0,!1].includes(this.field.readonly)||(this.field.readonly=!0),this.$refs.defaultValue.innerText=t}else delete this.field.readonly,delete this.field.default_value,this.$refs.defaultValue.innerText="";this.save()},onDefaultValueEnter(e){"heading"!==this.field.type&&(e.preventDefault(),this.$refs.defaultValue.blur())},onNameEnter(e){this.$refs.name.blur()},resize(e){"mask"===e.target.id&&(this.area.w=e.offsetX/e.target.clientWidth-this.area.x,this.area.h=e.offsetY/e.target.clientHeight-this.area.y)},drag(e){"mask"===e.target.id&&(this.isDragged=!0,this.area.x=(e.offsetX-this.dragFrom.x)/e.target.clientWidth,this.area.y=(e.offsetY-this.dragFrom.y)/e.target.clientHeight)},startTouchDrag(e){if(e.target!==this.$refs.touchTarget&&e.target!==this.$refs.touchValueTarget)return;document.activeElement?.blur(),e.preventDefault(),this.isDragged=!0;const t=e.target.getBoundingClientRect();this.selectedAreaRef.value=this.area,this.dragFrom={x:t.left-e.touches[0].clientX,y:t.top-e.touches[0].clientY},this.$el.getRootNode().addEventListener("touchmove",this.touchDrag),this.$el.getRootNode().addEventListener("touchend",this.stopTouchDrag),this.$emit("start-drag")},touchDrag(e){if(!this.editable)return;const t=this.$parent.$refs.mask.previousSibling.getBoundingClientRect();this.area.x=Math.min(Math.max((this.dragFrom.x+e.touches[0].clientX-t.left)/t.width,0),1-this.area.w),this.area.y=Math.min(Math.max((this.dragFrom.y+e.touches[0].clientY-t.top)/t.height,0),1-this.area.h)},stopTouchDrag(){this.$el.getRootNode().removeEventListener("touchmove",this.touchDrag),this.$el.getRootNode().removeEventListener("touchend",this.stopTouchDrag),this.isDragged&&this.save(),this.isDragged=!1,this.$emit("stop-drag")},startMouseMove(e){if(e.target!==this.$refs.touchTarget&&e.target!==this.$refs.touchValueTarget)return;document.activeElement!==this.$refs.defaultValue&&document.activeElement?.blur(),e.preventDefault(),this.isDragged=!0;const t=e.target.getBoundingClientRect();this.selectedAreaRef.value=this.area,"heading"===this.field.type&&this.$nextTick((()=>this.focusValueInput())),this.dragFrom={x:t.left-e.clientX,y:t.top-e.clientY},this.$el.getRootNode().addEventListener("mousemove",this.mouseMove),this.$el.getRootNode().addEventListener("mouseup",this.stopMouseMove),this.$emit("start-drag")},mouseMove(e){if(!this.editable)return;this.isMoved=!0;const t=this.$parent.$refs.mask.previousSibling.getBoundingClientRect();this.area.x=Math.min(Math.max((this.dragFrom.x+e.clientX-t.left)/t.width,0),1-this.area.w),this.area.y=Math.min(Math.max((this.dragFrom.y+e.clientY-t.top)/t.height,0),1-this.area.h)},stopMouseMove(e){this.$el.getRootNode().removeEventListener("mousemove",this.mouseMove),this.$el.getRootNode().removeEventListener("mouseup",this.stopMouseMove),this.isMoved&&this.save(),this.isDragged=!1,this.isMoved=!1,this.$emit("stop-drag")},stopDrag(){this.$el.getRootNode().removeEventListener("mousemove",this.drag),this.$el.getRootNode().removeEventListener("mouseup",this.stopDrag),this.isDragged&&this.save(),this.isDragged=!1,this.$emit("stop-drag")},startResize(){this.selectedAreaRef.value=this.area,this.$el.getRootNode().addEventListener("mousemove",this.resize),this.$el.getRootNode().addEventListener("mouseup",this.stopResize),this.$emit("start-resize","nwse")},stopResize(){this.$el.getRootNode().removeEventListener("mousemove",this.resize),this.$el.getRootNode().removeEventListener("mouseup",this.stopResize),this.$emit("stop-resize"),this.save()},startTouchResize(e){this.selectedAreaRef.value=this.area,this.$refs?.name?.blur(),e.preventDefault(),this.$el.getRootNode().addEventListener("touchmove",this.touchResize),this.$el.getRootNode().addEventListener("touchend",this.stopTouchResize),this.$emit("start-resize","nwse")},touchResize(e){const t=this.$parent.$refs.mask.previousSibling.getBoundingClientRect();this.area.w=(e.touches[0].clientX-t.left)/t.width-this.area.x,this.area.h=(e.touches[0].clientY-t.top)/t.height-this.area.y},stopTouchResize(){this.$el.getRootNode().removeEventListener("touchmove",this.touchResize),this.$el.getRootNode().removeEventListener("touchend",this.stopTouchResize),this.$emit("stop-resize"),this.save()}}},Bl={name:"TemplatePage",components:{FieldArea:(0,j.A)(zl,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("FieldSubmitter"),u=(0,o.g2)("FieldType"),c=(0,o.g2)("IconDotsVertical"),p=(0,o.g2)("FieldSettings"),h=(0,o.g2)("IconX"),m=(0,o.g2)("IconCheck"),f=(0,o.g2)("FormulaModal"),b=(0,o.g2)("ConditionsModal"),_=(0,o.g2)("DescriptionModal");return(0,o.uX)(),(0,o.CE)("div",{class:"absolute overflow-visible group",style:(0,r.Tr)(n.positionStyle),onPointerdown:t[43]||(t[43]=(0,s.D$)((()=>{}),["stop"])),onMousedown:t[44]||(t[44]=(...e)=>n.startMouseMove&&n.startMouseMove(...e)),onTouchstart:t[45]||(t[45]=(...e)=>n.startTouchDrag&&n.startTouchDrag(...e))},[n.isSelected||i.isDraw?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)(["top-0 bottom-0 right-0 left-0 absolute border border-1.5 pointer-events-none","heading"===i.field.type?"":n.borderColors[n.submitterIndex]])},null,2)):(0,o.Q3)("",!0),"cells"===i.field.type&&(n.isSelected||i.isDraw)?((0,o.uX)(),(0,o.CE)("div",Fl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.cells,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{key:a,class:(0,r.C4)(["absolute top-0 bottom-0 border-r","heading"===i.field.type?"":n.borderColors[n.submitterIndex]]),style:(0,r.Tr)({left:e/i.area.w*100+"%"})},[0===a&&i.editable?((0,o.uX)(),(0,o.CE)("span",{key:0,class:"h-2.5 w-2.5 rounded-full -bottom-1 border-gray-400 bg-white shadow-md border absolute cursor-ew-resize z-10",style:{left:"-4px"},onMousedown:t[0]||(t[0]=(0,s.D$)(((...e)=>n.startResizeCell&&n.startResizeCell(...e)),["stop"]))},null,32)):(0,o.Q3)("",!0)],6)))),128))])):(0,o.Q3)("",!0),i.field?.type&&(n.isSelected||l.isNameFocus)?((0,o.uX)(),(0,o.CE)("div",{key:2,class:"absolute bg-white rounded-t border overflow-visible whitespace-nowrap flex z-10",style:{top:"-25px",height:"25px"},onMousedown:t[30]||(t[30]=(0,s.D$)((()=>{}),["stop"])),onPointerdown:t[31]||(t[31]=(0,s.D$)((()=>{}),["stop"]))},["heading"!=i.field.type?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:i.field.submitter_uuid,"onUpdate:modelValue":[t[1]||(t[1]=e=>i.field.submitter_uuid=e),n.save],class:"border-r",compact:!0,editable:i.editable&&(!i.defaultField||i.defaultField.role!==n.submitter?.name),"allow-add-new":!i.defaultSubmitters.length,"menu-classes":"dropdown-content bg-white menu menu-xs p-2 shadow rounded-box w-52 rounded-t-none -left-[1px] mt-[1px]",submitters:n.template.submitters,onClick:t[2]||(t[2]=e=>n.selectedAreaRef.value=i.area)},null,8,["modelValue","editable","allow-add-new","submitters","onUpdate:modelValue"])):(0,o.Q3)("",!0),(0,o.bF)(u,{modelValue:i.field.type,"onUpdate:modelValue":[t[3]||(t[3]=e=>i.field.type=e),t[4]||(t[4]=e=>[n.maybeUpdateOptions(),n.save()])],"button-width":27,editable:i.editable&&!i.defaultField,"button-classes":"px-1","menu-classes":"bg-white rounded-t-none",onClick:t[5]||(t[5]=e=>n.selectedAreaRef.value=i.area)},null,8,["modelValue","editable"]),"checkbox"!==i.field.type||i.field.name?((0,o.uX)(),(0,o.CE)("span",{key:1,ref:"name",contenteditable:i.editable&&!i.defaultField&&"heading"!==i.field.type,dir:"auto",class:"pr-1 cursor-text outline-none block",style:{"min-width":"2px"},onPaste:t[6]||(t[6]=(0,s.D$)(((...e)=>n.onPaste&&n.onPaste(...e)),["prevent"])),onKeydown:t[7]||(t[7]=(0,s.jR)((0,s.D$)(((...e)=>n.onNameEnter&&n.onNameEnter(...e)),["prevent"]),["enter"])),onFocus:t[8]||(t[8]=(...e)=>n.onNameFocus&&n.onNameFocus(...e)),onBlur:t[9]||(t[9]=(...e)=>n.onNameBlur&&n.onNameBlur(...e))},(0,r.v_)(n.optionIndexText)+" "+(0,r.v_)(i.defaultField&&i.field.title||i.field.name||n.defaultName),41,Dl)):(0,o.Q3)("",!0),l.isSettingsFocus||n.isValueInput&&"heading"!==i.field.type||l.isNameFocus&&!["checkbox","phone"].includes(i.field.type)?((0,o.uX)(),(0,o.CE)("div",Sl,[n.isValueInput?(0,o.Q3)("",!0):(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,id:`required-checkbox-${i.field.uuid}`,"onUpdate:modelValue":t[10]||(t[10]=e=>i.field.required=e),type:"checkbox",class:"checkbox checkbox-xs no-animation rounded",onMousedown:t[11]||(t[11]=(0,s.D$)((()=>{}),["prevent"]))},null,40,Ll)),[[s.lH,i.field.required]]),n.isValueInput?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("label",{key:1,for:`required-checkbox-${i.field.uuid}`,class:"label text-xs",onClick:t[12]||(t[12]=(0,s.D$)((e=>i.field.required=!i.field.required),["prevent"])),onMousedown:t[13]||(t[13]=(0,s.D$)((()=>{}),["prevent"]))},(0,r.v_)(n.t("required")),41,El)),n.isValueInput?((0,o.uX)(),(0,o.CE)("input",{key:2,id:`readonly-checkbox-${i.field.uuid}`,type:"checkbox",class:"checkbox checkbox-xs no-animation rounded",checked:!(i.field.readonly??1),onChange:t[14]||(t[14]=e=>i.field.readonly=!(i.field.readonly??1)),onMousedown:t[15]||(t[15]=(0,s.D$)((()=>{}),["prevent"]))},null,40,Al)):(0,o.Q3)("",!0),n.isValueInput?((0,o.uX)(),(0,o.CE)("label",{key:3,for:`readonly-checkbox-${i.field.uuid}`,class:"label text-xs",onClick:t[16]||(t[16]=(0,s.D$)((e=>i.field.readonly=!(i.field.readonly??1)),["prevent"])),onMousedown:t[17]||(t[17]=(0,s.D$)((()=>{}),["prevent"]))},(0,r.v_)(n.t("editable")),41,Tl)):(0,o.Q3)("",!0),"payment"===i.field.type||n.isValueInput?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",{key:4,class:"dropdown dropdown-end",onMouseenter:t[27]||(t[27]=e=>l.renderDropdown=!0),onTouchstart:t[28]||(t[28]=e=>l.renderDropdown=!0)},[(0,o.Lk)("label",{ref:"settingsButton",tabindex:"0",title:n.t("settings"),class:"cursor-pointer flex items-center",style:{height:"25px"},onFocus:t[18]||(t[18]=e=>l.isSettingsFocus=!0),onBlur:t[19]||(t[19]=(...e)=>n.maybeBlurSettings&&n.maybeBlurSettings(...e))},[(0,o.bF)(c,{class:"w-5 h-5"})],40,Il),l.renderDropdown?((0,o.uX)(),(0,o.CE)("ul",{key:0,ref:"settingsDropdown",tabindex:"0",class:"dropdown-content menu menu-xs px-2 pb-2 pt-1 shadow rounded-box w-52 z-10 rounded-t-none",style:{backgroundColor:"white"},onDragstart:t[24]||(t[24]=(0,s.D$)((()=>{}),["prevent","stop"])),onClick:t[25]||(t[25]=(...e)=>n.closeDropdown&&n.closeDropdown(...e)),onFocusout:t[26]||(t[26]=(...e)=>n.maybeBlurSettings&&n.maybeBlurSettings(...e))},[(0,o.bF)(p,{field:i.field,"default-field":i.defaultField,editable:i.editable,"background-color":"white","with-required":!1,"with-areas":!1,onClickFormula:t[20]||(t[20]=e=>l.isShowFormulaModal=!0),onClickDescription:t[21]||(t[21]=e=>l.isShowDescriptionModal=!0),onClickCondition:t[22]||(t[22]=e=>l.isShowConditionsModal=!0),onScrollTo:t[23]||(t[23]=t=>[n.selectedAreaRef.value=t,e.$emit("scroll-to",t)])},null,8,["field","default-field","editable"])],544)):(0,o.Q3)("",!0)],32))])):i.editable?((0,o.uX)(),(0,o.CE)("button",{key:3,class:"pr-1",title:n.t("remove"),onClick:t[29]||(t[29]=(0,s.D$)((t=>e.$emit("remove")),["prevent"]))},[(0,o.bF)(h,{width:"14"})],8,$l)):(0,o.Q3)("",!0)],32)):(0,o.Q3)("",!0),(0,o.Lk)("div",{ref:"touchValueTarget",class:(0,r.C4)(["flex items-center h-full w-full",[n.isValueInput?"bg-opacity-50":"bg-opacity-80","heading"===i.field.type?"bg-gray-50":n.bgColors[n.submitterIndex],n.isDefaultValuePresent||n.isValueInput||i.withFieldPlaceholder&&i.field.areas?n.alignClasses[i.field.preferences?.align]||"":"justify-center"]]),dir:"auto",onClick:t[35]||(t[35]=(...e)=>n.focusValueInput&&n.focusValueInput(...e))},[i.field?((0,o.uX)(),(0,o.CE)("span",{key:0,class:(0,r.C4)(["flex justify-center items-center space-x-1",{"w-full":["cells","checkbox"].includes(i.field.type),"h-full":!n.isValueInput}])},[n.isDefaultValuePresent||n.isValueInput||i.withFieldPlaceholder&&i.field.areas&&"checkbox"!==i.field.type?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)({"w-full h-full":["cells","checkbox"].includes(i.field.type),"text-[1.6vw] lg:text-base":!l.textOverflowChars,"text-[1.0vw] lg:text-xs":l.textOverflowChars})},[(0,o.Lk)("div",{ref:"textContainer",class:(0,r.C4)(["flex items-center px-0.5",{"w-full h-full":["cells","checkbox"].includes(i.field.type)}])},["checkbox"==i.field.type?((0,o.uX)(),(0,o.Wv)(m,{key:0,class:(0,r.C4)(["aspect-square mx-auto",{"!w-auto !h-full":i.area.w>i.area.h,"!w-full !h-auto":i.area.w<=i.area.h}])},null,8,["class"])):"number"!==i.field.type||n.isValueInput||!i.field.default_value&&0!=i.field.default_value?"{{date}}"===i.field.default_value?((0,o.uX)(),(0,o.CE)("span",ql,(0,r.v_)(n.t("signing_date")),1)):"cells"===i.field.type&&i.field.default_value?((0,o.uX)(),(0,o.CE)("div",Rl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.field.default_value,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"text-center flex-none",style:(0,r.Tr)({width:i.area.cell_w/i.area.w*100+"%"})},(0,r.v_)(e),5)))),128))])):((0,o.uX)(),(0,o.CE)("span",{key:4,ref:"defaultValue",contenteditable:n.isValueInput,class:(0,r.C4)(["whitespace-pre-wrap outline-none empty:before:content-[attr(placeholder)] before:text-gray-400",{"cursor-text":n.isValueInput}]),placeholder:i.withFieldPlaceholder&&!n.isValueInput?i.field.name||n.defaultName:n.t("type_value"),onBlur:t[32]||(t[32]=(...e)=>n.onDefaultValueBlur&&n.onDefaultValueBlur(...e)),onPaste:t[33]||(t[33]=(0,s.D$)(((...e)=>n.onPaste&&n.onPaste(...e)),["prevent"])),onKeydown:t[34]||(t[34]=(0,s.jR)(((...e)=>n.onDefaultValueEnter&&n.onDefaultValueEnter(...e)),["enter"]))},(0,r.v_)(i.field.default_value),43,Ml)):((0,o.uX)(),(0,o.CE)("span",Pl,(0,r.v_)(n.formatNumber(i.field.default_value,i.field.preferences?.format)),1))],2)],2)):((0,o.uX)(),(0,o.Wv)((0,o.$y)(n.fieldIcons[i.field.type]),{key:1,width:"100%",height:"100%",class:"max-h-10 opacity-50"}))],2)):(0,o.Q3)("",!0)],2),n.isValueInput?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",{key:3,ref:"touchTarget",class:(0,r.C4)(["absolute top-0 bottom-0 right-0 left-0",l.isDragged?"cursor-grab":"cursor-pointer"]),onDblclick:t[36]||(t[36]=(...e)=>n.maybeToggleDefaultValue&&n.maybeToggleDefaultValue(...e)),onClick:t[37]||(t[37]=(...e)=>n.maybeToggleCheckboxValue&&n.maybeToggleCheckboxValue(...e))},null,34)),i.field?.type&&i.editable?((0,o.uX)(),(0,o.CE)("span",{key:4,class:"h-4 w-4 md:h-2.5 md:w-2.5 -right-1 rounded-full -bottom-1 border-gray-400 bg-white shadow-md border absolute cursor-nwse-resize",onMousedown:t[38]||(t[38]=(0,s.D$)(((...e)=>n.startResize&&n.startResize(...e)),["stop"])),onTouchstart:t[39]||(t[39]=(...e)=>n.startTouchResize&&n.startTouchResize(...e))},null,32)):(0,o.Q3)("",!0),l.isShowFormulaModal?((0,o.uX)(),(0,o.Wv)(o.Im,{key:5,to:n.modalContainerEl},[(0,o.bF)(f,{field:i.field,editable:i.editable&&!i.defaultField,"build-default-name":n.buildDefaultName,onClose:t[40]||(t[40]=e=>l.isShowFormulaModal=!1)},null,8,["field","editable","build-default-name"])],8,["to"])):(0,o.Q3)("",!0),l.isShowConditionsModal?((0,o.uX)(),(0,o.Wv)(o.Im,{key:6,to:n.modalContainerEl},[(0,o.bF)(b,{field:i.field,"build-default-name":n.buildDefaultName,onClose:t[41]||(t[41]=e=>l.isShowConditionsModal=!1)},null,8,["field","build-default-name"])],8,["to"])):(0,o.Q3)("",!0),l.isShowDescriptionModal?((0,o.uX)(),(0,o.Wv)(o.Im,{key:7,to:n.modalContainerEl},[(0,o.bF)(_,{field:i.field,editable:i.editable&&!i.defaultField,"build-default-name":n.buildDefaultName,onClose:t[42]||(t[42]=e=>l.isShowDescriptionModal=!1)},null,8,["field","editable","build-default-name"])],8,["to"])):(0,o.Q3)("",!0)],36)}]])},inject:["fieldTypes","defaultDrawFieldType","fieldsDragFieldRef"],props:{image:{type:Object,required:!0},areas:{type:Array,required:!1,default:()=>[]},inputMode:{type:Boolean,required:!1,default:!1},defaultFields:{type:Array,required:!1,default:()=>[]},withFieldPlaceholder:{type:Boolean,required:!1,default:!1},drawFieldType:{type:String,required:!1,default:""},allowDraw:{type:Boolean,required:!1,default:!0},selectedSubmitter:{type:Object,required:!0},defaultSubmitters:{type:Array,required:!1,default:()=>[]},drawField:{type:Object,required:!1,default:null},editable:{type:Boolean,required:!1,default:!0},isDrag:{type:Boolean,required:!1,default:!1},number:{type:Number,required:!0}},emits:["draw","drop-field","remove-area","scroll-to"],data:()=>({areaRefs:[],showMask:!1,resizeDirection:null,newArea:null}),computed:{defaultFieldType(){return this.drawFieldType?this.drawFieldType:this.defaultDrawFieldType&&"text"!==this.defaultDrawFieldType?this.defaultDrawFieldType:0===this.fieldTypes.length||this.fieldTypes.includes("text")?"text":this.fieldTypes[0]},isMobile:()=>/android|iphone|ipad/i.test(navigator.userAgent),resizeDirectionClasses:()=>({nwse:"cursor-nwse-resize",ew:"cursor-ew-resize"}),width(){return this.image.metadata.width},height(){return this.image.metadata.height}},beforeUpdate(){this.areaRefs=[]},methods:{onImageLoad(e){e.target.setAttribute("width",e.target.naturalWidth),e.target.setAttribute("height",e.target.naturalHeight)},setAreaRefs(e){e&&this.areaRefs.push(e)},onDrop(e){this.$emit("drop-field",{x:e.offsetX,y:e.offsetY,maskW:this.$refs.mask.clientWidth,maskH:this.$refs.mask.clientHeight,page:this.number})},onStartDraw(e){this.allowDraw&&(this.isMobile&&!this.drawField||this.editable&&(this.showMask=!0,this.$nextTick((()=>{this.newArea={initialX:e.offsetX/this.$refs.mask.clientWidth,initialY:e.offsetY/this.$refs.mask.clientHeight,x:e.offsetX/this.$refs.mask.clientWidth,y:e.offsetY/this.$refs.mask.clientHeight,w:0,h:0}}))))},onPointermove(e){if(this.newArea){const t=e.offsetX/this.$refs.mask.clientWidth-this.newArea.initialX,i=e.offsetY/this.$refs.mask.clientHeight-this.newArea.initialY;this.newArea.x=t>0?this.newArea.initialX:e.offsetX/this.$refs.mask.clientWidth,this.newArea.y=i>0?this.newArea.initialY:e.offsetY/this.$refs.mask.clientHeight,"cells"===(this.drawField?.type||this.drawFieldType)&&(this.newArea.cell_w=this.newArea.h*(this.$refs.mask.clientHeight/this.$refs.mask.clientWidth)),this.newArea.w=Math.abs(t),this.newArea.h=Math.abs(i)}},onPointerup(e){if(this.newArea){const e={x:this.newArea.x,y:this.newArea.y,w:this.newArea.w,h:this.newArea.h,page:this.number};"cell_w"in this.newArea&&(e.cell_w=this.newArea.cell_w),this.$emit("draw",e)}this.showMask=!1,this.newArea=null}}},Ol={name:"TemplateDocument",components:{Page:(0,j.A)(Bl,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("FieldArea");return(0,o.uX)(),(0,o.CE)("div",{class:"relative cursor-crosshair select-none",style:(0,r.Tr)(i.drawField?"touch-action: none":"")},[(0,o.Lk)("img",{ref:"image",loading:"lazy",src:i.image.url,width:n.width,height:n.height,class:"border rounded mb-4",onLoad:t[0]||(t[0]=(...e)=>n.onImageLoad&&n.onImageLoad(...e))},null,40,Cl),(0,o.Lk)("div",{class:"top-0 bottom-0 left-0 right-0 absolute",onPointerdown:t[4]||(t[4]=(...e)=>n.onStartDraw&&n.onStartDraw(...e))},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.areas,((a,s)=>((0,o.uX)(),(0,o.Wv)(d,{key:s,ref_for:!0,ref:n.setAreaRefs,area:a.area,"input-mode":i.inputMode,field:a.field,editable:i.editable,"with-field-placeholder":i.withFieldPlaceholder,"default-field":i.defaultFields.find((e=>e.name===a.field.name)),"default-submitters":i.defaultSubmitters,onStartResize:t[1]||(t[1]=e=>l.resizeDirection=e),onStopResize:t[2]||(t[2]=e=>l.resizeDirection=null),onRemove:t=>e.$emit("remove-area",a.area),onScrollTo:t[3]||(t[3]=t=>e.$emit("scroll-to",t))},null,8,["area","input-mode","field","editable","with-field-placeholder","default-field","default-submitters","onRemove"])))),128)),l.newArea?((0,o.uX)(),(0,o.Wv)(d,{key:0,"is-draw":!0,field:{submitter_uuid:i.selectedSubmitter.uuid,type:i.drawField?.type||n.defaultFieldType},area:l.newArea},null,8,["field","area"])):(0,o.Q3)("",!0)],32),(0,o.bo)((0,o.Lk)("div",{id:"mask",ref:"mask",class:(0,r.C4)(["top-0 bottom-0 left-0 right-0 absolute",{"z-10":!n.isMobile,"cursor-grab":i.isDrag,"cursor-nwse-resize":i.drawField,[n.resizeDirectionClasses[l.resizeDirection]]:!!n.resizeDirectionClasses}]),onPointermove:t[5]||(t[5]=(...e)=>n.onPointermove&&n.onPointermove(...e)),onPointerdown:t[6]||(t[6]=(...e)=>n.onStartDraw&&n.onStartDraw(...e)),onDragover:t[7]||(t[7]=(0,s.D$)((()=>{}),["prevent"])),onDrop:t[8]||(t[8]=(...e)=>n.onDrop&&n.onDrop(...e)),onPointerup:t[9]||(t[9]=(...e)=>n.onPointerup&&n.onPointerup(...e))},null,34),[[s.aG,l.resizeDirection||i.isDrag||l.showMask||i.drawField&&n.isMobile||n.fieldsDragFieldRef.value]])],4)}]])},props:{document:{type:Object,required:!0},inputMode:{type:Boolean,required:!1,default:!1},areasIndex:{type:Object,required:!1,default:()=>({})},defaultFields:{type:Array,required:!1,default:()=>[]},withFieldPlaceholder:{type:Boolean,required:!1,default:!1},drawFieldType:{type:String,required:!1,default:""},defaultSubmitters:{type:Array,required:!1,default:()=>[]},allowDraw:{type:Boolean,required:!1,default:!0},selectedSubmitter:{type:Object,required:!0},editable:{type:Boolean,required:!1,default:!0},drawField:{type:Object,required:!1,default:null},baseUrl:{type:String,required:!1,default:""},isDrag:{type:Boolean,required:!1,default:!1}},emits:["draw","drop-field","remove-area"],data:()=>({pageRefs:[]}),computed:{basePreviewUrl(){return this.baseUrl?new URL(this.baseUrl).origin:""},numberOfPages(){return this.document.metadata?.pdf?.number_of_pages||this.document.preview_images.length},sortedPreviewImages(){const e=this.document.preview_images[this.document.preview_images.length-1].metadata;return[...Array(this.numberOfPages).keys()].map((t=>this.previewImagesIndex[t]||{metadata:e,id:Math.random().toString(),url:this.basePreviewUrl+`/preview/${this.document.signed_uuid||this.document.uuid}/${t}.jpg`}))},previewImagesIndex(){return this.document.preview_images.reduce(((e,t)=>(e[parseInt(t.filename)]=t,e)),{})}},beforeUpdate(){this.pageRefs=[]},methods:{scrollToArea(e){this.$nextTick((()=>{this.pageRefs[e.page].areaRefs.find((t=>t.area===e)).$el.scrollIntoView({behavior:"smooth",block:"center"})}))},setPageRefs(e){e&&this.pageRefs.push(e)}}},Ul=(0,j.A)(Ol,[["render",function(e,t,i,a,l,s){const n=(0,o.g2)("Page");return(0,o.uX)(),(0,o.CE)("div",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.sortedPreviewImages,((a,l)=>((0,o.uX)(),(0,o.Wv)(n,{key:a.id,ref_for:!0,ref:s.setPageRefs,"input-mode":i.inputMode,number:l,editable:i.editable,areas:i.areasIndex[l],"allow-draw":i.allowDraw,"is-drag":i.isDrag,"with-field-placeholder":i.withFieldPlaceholder,"default-fields":i.defaultFields,"default-submitters":i.defaultSubmitters,"draw-field":i.drawField,"draw-field-type":i.drawFieldType,"selected-submitter":i.selectedSubmitter,image:a,onDropField:t[0]||(t[0]=t=>e.$emit("drop-field",{...t,attachment_uuid:i.document.uuid})),onRemoveArea:t[1]||(t[1]=t=>e.$emit("remove-area",t)),onScrollTo:s.scrollToArea,onDraw:t[2]||(t[2]=t=>e.$emit("draw",{...t,attachment_uuid:i.document.uuid}))},null,8,["input-mode","number","editable","areas","allow-draw","is-drag","with-field-placeholder","default-fields","default-submitters","draw-field","draw-field-type","selected-submitter","image","onScrollTo"])))),128))])}]]),Wl={height:"40",width:"40",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 511.998 511.998","xml:space":"preserve"},Vl=[(0,o.Fv)('<path style="fill:#AA968C;" d="M503.999,247.999c0,128.13-111.033,240-248,240S8,376.129,8,247.999s111.033-224,248-224\n    S503.999,119.869,503.999,247.999z"></path><path style="fill:#AA968C;" d="M255.999,23.999C119.033,23.999,8,119.868,8,247.999c0,24.631,4.138,48.647,11.74,71.397\n    c25.518,34.29,66.232,56.602,112.26,56.602c53.893,0,100.6-30.495,124-75.13c23.4,44.636,70.107,75.13,124,75.13\n    c46.028,0,86.743-22.312,112.26-56.602c7.602-22.75,11.74-46.767,11.74-71.397C503.999,119.868,392.966,23.999,255.999,23.999z"></path><circle style="fill:#C8AF9B;" cx="256" cy="351.999" r="136"></circle><g><circle style="fill:#464655;" cx="132" cy="203.999" r="28"></circle><circle style="fill:#464655;" cx="380" cy="203.999" r="28"></circle><path style="fill:#464655;" d="M269.949,284.516c-7.672,10.741-20.227,10.741-27.899,0l-12.101-16.941\n      c-7.672-10.741-3.15-19.53,10.05-19.53h32c13.2,0,17.723,8.788,10.05,19.53L269.949,284.516z"></path></g><path style="fill:#AA968C;" d="M 350.964 399.998 C 316.628 399.998 299.021 351.998 255.882 351.998 C 212.742 351.998 195.135 399.998 160.801 399.998 C 145.395 399.998 131.723 394.147 120.621 374.798 C 131.595 439.03 187.893 487.998 255.881 487.998 C 323.868 487.998 380.168 439.03 391.14 374.798 C 380.04 394.148 366.368 399.998 350.964 399.998 Z"></path><g><path style="fill:#8C7873;" d="M32,423.998c-3.172,0-6.18-1.906-7.43-5.031c-1.641-4.105,0.359-8.758,4.461-10.402l160.008-64\n      c4.062-1.617,8.758,0.352,10.398,4.457s-0.359,8.758-4.461,10.402l-160.008,64C34,423.811,32.992,423.998,32,423.998z"></path><path style="fill:#8C7873;" d="M15.992,375.995c-3.547,0-6.781-2.375-7.727-5.965c-1.125-4.273,1.422-8.648,5.695-9.773l152-40\n      c4.289-1.121,8.648,1.426,9.773,5.703c1.125,4.273-1.422,8.648-5.695,9.773l-152,40C17.351,375.913,16.672,375.995,15.992,375.995z\n      "></path><path style="fill:#8C7873;" d="M7.992,335.995c-3.812,0-7.187-2.73-7.867-6.609c-0.773-4.352,2.133-8.5,6.484-9.27l136-24\n      c4.328-0.77,8.508,2.141,9.266,6.488c0.773,4.352-2.133,8.5-6.484,9.27l-136,24C8.922,335.956,8.453,335.995,7.992,335.995z"></path><path style="fill:#8C7873;" d="M480,423.998c3.172,0,6.18-1.906,7.43-5.031c1.641-4.105-0.359-8.758-4.461-10.402l-160.008-64\n      c-4.063-1.617-8.758,0.352-10.398,4.457s0.359,8.758,4.461,10.402l160.008,64C478,423.811,479.007,423.998,480,423.998z"></path><path style="fill:#8C7873;" d="M496.007,375.995c3.547,0,6.781-2.375,7.727-5.965c1.125-4.273-1.422-8.648-5.695-9.773l-152-40\n      c-4.289-1.121-8.648,1.426-9.773,5.703c-1.125,4.273,1.422,8.648,5.695,9.773l152,40\n      C494.648,375.913,495.328,375.995,496.007,375.995z"></path><path style="fill:#8C7873;" d="M504.007,335.995c3.813,0,7.188-2.73,7.867-6.609c0.773-4.352-2.133-8.5-6.484-9.27l-136-24\n      c-4.328-0.77-8.508,2.141-9.266,6.488c-0.773,4.352,2.133,8.5,6.484,9.27l136,24C503.078,335.956,503.546,335.995,504.007,335.995z\n      "></path></g>',6)];const jl={name:"ProjectLogo"},Ql=(0,j.A)(jl,[["render",function(e,t,i,a,l,s){return(0,o.uX)(),(0,o.CE)("svg",Wl,Vl)}]]),Yl={class:"relative"},Hl=["src","width","height"],Kl={key:0,class:"flex justify-between w-full"},Jl=(0,o.Lk)("div",{style:{width:"26px"}},null,-1),Zl={class:""},Gl={class:"flex flex-col justify-between opacity-0 group-hover:opacity-100"},es={key:0,class:"flex flex-col space-y-1"},ts={class:"flex pb-2 pt-1.5"};const is=["for"],as={ref:"form",class:"hidden"},ls=["id","accept"];const ss={name:"ReplaceDocument",inject:["baseFetch","t"],props:{templateId:{type:[Number,String],required:!0},acceptFileTypes:{type:String,required:!1,default:"image/*, application/pdf"}},emits:["success"],data:()=>({isLoading:!1,isProcessing:!1}),computed:{inputId:()=>"el"+Math.random().toString(32).split(".")[1],message(){return this.isLoading?this.t("uploading_"):this.isProcessing?this.t("processing_"):this.t("replace")}},methods:{upload:Q.methods.upload}},ns=(0,j.A)(ss,[["render",function(e,t,i,a,l,s){return(0,o.uX)(),(0,o.CE)("label",{for:s.inputId,class:(0,r.C4)(["btn btn-neutral btn-xs text-white transition-none",{"opacity-100":l.isLoading||l.isProcessing}])},[(0,o.eW)((0,r.v_)(s.message)+" ",1),(0,o.Lk)("form",as,[(0,o.Lk)("input",{id:s.inputId,ref:"input",name:"files[]",type:"file",accept:i.acceptFileTypes,onChange:t[0]||(t[0]=(...e)=>s.upload&&s.upload(...e))},null,40,ls)],512)],10,is)}]]),os={name:"DocumentPreview",components:{Contenteditable:je,ReplaceButton:ns},props:{item:{type:Object,required:!0},template:{type:Object,required:!0},document:{type:Object,required:!0},editable:{type:Boolean,required:!1,default:!0},acceptFileTypes:{type:String,required:!1,default:"image/*, application/pdf"},withReplaceButton:{type:Boolean,required:!0,default:!0},withArrows:{type:Boolean,required:!1,default:!0}},emits:["scroll-to","change","remove","up","down","replace"],computed:{previewImage(){return[...this.document.preview_images].sort(((e,t)=>parseInt(e.filename)-parseInt(t.filename)))[0]}},methods:{upload:Q.methods.upload,onUpdateName(e){this.item.name=e,this.$emit("change")}}},rs=(0,j.A)(os,[["render",function(e,t,i,a,l,n){const r=(0,o.g2)("ReplaceButton"),d=(0,o.g2)("Contenteditable");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",Yl,[(0,o.Lk)("img",{src:n.previewImage.url,width:n.previewImage.metadata.width,height:n.previewImage.metadata.height,class:"rounded border",loading:"lazy"},null,8,Hl),(0,o.Lk)("div",{class:"group flex justify-end cursor-pointer top-0 bottom-0 left-0 right-0 absolute p-1",onClick:t[5]||(t[5]=t=>e.$emit("scroll-to",i.item))},[i.editable?((0,o.uX)(),(0,o.CE)("div",Kl,[Jl,(0,o.Lk)("div",Zl,[i.withReplaceButton?((0,o.uX)(),(0,o.Wv)(r,{key:0,"template-id":i.template.id,"accept-file-types":i.acceptFileTypes,class:"opacity-0 group-hover:opacity-100",onClick:t[0]||(t[0]=(0,s.D$)((()=>{}),["stop"])),onSuccess:t[1]||(t[1]=t=>e.$emit("replace",{replaceSchemaItem:i.item,...t}))},null,8,["template-id","accept-file-types"])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Gl,[(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn border-base-200 bg-white text-base-content btn-xs rounded hover:text-base-100 hover:bg-base-content hover:border-base-content w-full transition-colors",style:{width:"24px",height:"24px"},onClick:t[2]||(t[2]=(0,s.D$)((t=>e.$emit("remove",i.item)),["stop"]))}," \xd7 ")]),i.withArrows?((0,o.uX)(),(0,o.CE)("div",es,[(0,o.Lk)("button",{class:"btn border-base-200 bg-white text-base-content btn-xs rounded hover:text-base-100 hover:bg-base-content hover:border-base-content w-full transition-colors",style:{width:"24px",height:"24px"},onClick:t[3]||(t[3]=(0,s.D$)((t=>e.$emit("up",i.item)),["stop"]))}," \u2191 "),(0,o.Lk)("button",{class:"btn border-base-200 bg-white text-base-content btn-xs rounded hover:text-base-100 hover:bg-base-content hover:border-base-content w-full transition-colors",style:{width:"24px",height:"24px"},onClick:t[4]||(t[4]=(0,s.D$)((t=>e.$emit("down",i.item)),["stop"]))}," \u2193 ")])):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",ts,[(0,o.bF)(d,{"model-value":i.item.name,"icon-width":16,editable:i.editable,style:{"max-width":"95%"},class:"mx-auto","onUpdate:modelValue":n.onUpdateName},null,8,["model-value","editable","onUpdate:modelValue"])])])}]]),ds={class:"flex space-x-2"};const us={name:"DocumentControls",components:{Contenteditable:je,ReplaceButton:ns},props:{item:{type:Object,required:!0},template:{type:Object,required:!0},document:{type:Object,required:!0},acceptFileTypes:{type:String,required:!1,default:"image/*, application/pdf"},withReplaceButton:{type:Boolean,required:!0,default:!0},withArrows:{type:Boolean,required:!1,default:!0}},emits:["change","remove","up","down","replace"],methods:{upload:Q.methods.upload,onUpdateName(e){this.item.name=e,this.$emit("change")}}},cs=(0,j.A)(us,[["render",function(e,t,i,a,l,n){const r=(0,o.g2)("Contenteditable"),d=(0,o.g2)("ReplaceButton");return(0,o.uX)(),(0,o.CE)("div",ds,[(0,o.bF)(r,{class:"w-full block mr-6","model-value":i.item.name,"icon-width":16,"onUpdate:modelValue":n.onUpdateName},null,8,["model-value","onUpdate:modelValue"]),i.withReplaceButton?((0,o.uX)(),(0,o.Wv)(d,{key:0,"template-id":i.template.id,"accept-file-types":i.acceptFileTypes,onClick:t[0]||(t[0]=(0,s.D$)((()=>{}),["stop"])),onSuccess:t[1]||(t[1]=t=>e.$emit("replace",{replaceSchemaItem:i.item,...t}))},null,8,["template-id","accept-file-types"])):(0,o.Q3)("",!0),i.withArrows?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"btn border-base-200 bg-white text-base-content btn-xs rounded hover:text-base-100 hover:bg-base-content hover:border-base-content w-full transition-colors",style:{width:"24px",height:"24px"},onClick:t[2]||(t[2]=(0,s.D$)((t=>e.$emit("up",i.item)),["stop"]))}," \u2191 ")):(0,o.Q3)("",!0),i.withArrows?((0,o.uX)(),(0,o.CE)("button",{key:2,class:"btn border-base-200 bg-white text-base-content btn-xs rounded hover:text-base-100 hover:bg-base-content hover:border-base-content w-full transition-colors",style:{width:"24px",height:"24px"},onClick:t[3]||(t[3]=(0,s.D$)((t=>e.$emit("down",i.item)),["stop"]))}," \u2193 ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn border-base-200 bg-white text-base-content btn-xs rounded hover:text-base-100 hover:bg-base-content hover:border-base-content w-full transition-colors",style:{width:"24px",height:"24px"},onClick:t[4]||(t[4]=(0,s.D$)((t=>e.$emit("remove",i.item)),["stop"]))}," \xd7 ")])}]]),ps={class:"dropdown dropdown-top dropdown-end absolute bottom-4 right-4 z-10 md:hidden"},hs={class:"btn btn-neutral text-white btn-circle btn-lg group",tabindex:"0"},ms=["onClick"],fs=["data-tip"],bs={key:0},_s=["onClick"];const gs={name:"MobileFields",components:{IconPlus:nl.A,IconX:Mi.A},inject:["withPhone","withPayment","backgroundColor","t"],props:{modelValue:{type:String,required:!1,default:""},fields:{type:Array,required:!1,default:()=>[]},selectedSubmitter:{type:Object,required:!0},fieldTypes:{type:Array,required:!1,default:()=>[]},defaultRequiredFields:{type:Array,required:!1,default:()=>[]},defaultFields:{type:Array,required:!1,default:()=>[]}},emits:["select"],computed:{...ht.computed,submitterFields(){return this.fields.filter((e=>e.submitter_uuid===this.selectedSubmitter.uuid))},submitterDefaultFields(){return this.defaultFields.filter((e=>!e.role||e.role===this.selectedSubmitter.name))}},methods:{closeDropdown(){document.activeElement.blur()}}},ys=(0,j.A)(gs,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("IconPlus"),u=(0,o.g2)("IconX");return(0,o.uX)(),(0,o.CE)("span",ps,[(0,o.Lk)("label",hs,[(0,o.bF)(d,{class:"group-focus:hidden",width:"28",height:"28"}),(0,o.bF)(u,{class:"hidden group-focus:inline",width:"28",height:"28"})]),(0,o.Lk)("ul",{tabindex:"0",class:"dropdown-content menu menu-xs p-2 shadow rounded-box w-52 z-10 mb-3 mt-1.5 bg-base-100",onClick:t[0]||(t[0]=(...e)=>n.closeDropdown&&n.closeDropdown(...e))},[n.submitterDefaultFields.length?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:0},(0,o.pI)(n.submitterDefaultFields,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t.name},[(0,o.Lk)("a",{href:"#",class:"text-sm py-1 px-2",onClick:(0,s.D$)((i=>e.$emit("select",{name:t.name||"",type:t.type||"text"})),["prevent"])},[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e.fieldIcons[t.type||"text"]),{"stroke-width":1.6,width:20})),(0,o.eW)(" "+(0,r.v_)(t.title||t.name)+" ",1),i.defaultRequiredFields.includes(t)?((0,o.uX)(),(0,o.CE)("span",{key:0,"data-tip":n.t("required"),class:"text-red-400 text-2xl tooltip tooltip-left h-6"}," * ",8,fs)):(0,o.Q3)("",!0)],8,ms)])))),128)):((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(e.fieldIconsSorted,((t,a)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:a},[0!==i.fieldTypes.length&&!i.fieldTypes.includes(a)||!n.withPhone&&"phone"==a||!n.withPayment&&"payment"==a?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("li",bs,[(0,o.Lk)("a",{href:"#",class:(0,r.C4)(["text-sm py-1 px-2",{active:a===i.modelValue}]),onClick:(0,s.D$)((t=>e.$emit("select",{type:a})),["prevent"])},[((0,o.uX)(),(0,o.Wv)((0,o.$y)(t),{"stroke-width":1.6,width:20})),(0,o.eW)(" "+(0,r.v_)(e.fieldNames[a]),1)],10,_s)]))],64)))),128))])])}]]),vs=ys;var ws=i(6056),ks=i(5336),xs=i(8849),Cs=i(2606);const Fs={editable:"Editable",recurrent:"Recurrent",one_off:"One-off",search_field:"Search field",field_not_found:"Field not found",clear:"Clear",align:"Align",add_all_required_fields_to_continue:"Add all required fields to continue",uploaded_pdf_contains_form_fields_keep_or_remove_them:"Uploaded PDF contains form fields. Keep or remove them?",keep:"Keep",left:"Left",heading:"Heading",validation:"Validation",add_blank_page:"Add blank page",right:"Right",center:"Center",description:"Description",display_title:"Display title",with_logo:"With logo",unchecked:"Unchecked",price:"Price",type_value:"Type value",equal:"Equal",not_equal:"Not equal",contains:"Contains",does_not_contain:"Does not contain",not_empty:"Not empty",empty:"Empty",select_field_:"Select field...",select_value_:"Select value...",remove_condition:"Remove condition",add_condition:"Add condition",are_you_sure_:"Are you sure?",sign_yourself:"Sign Yourself",set_signing_date:"Set signing date",signing_date:"Signing Date",send:"Send",remove:"Remove",edit:"Edit",settings:"Settings",up:"Up",down:"Down",checked:"Checked",save:"Save",cancel:"Cancel",any:"Any",drawn:"Drawn",formula:"Formula",typed:"Typed",draw_field_on_the_document:"Draw a field on the document",click_to_upload:"Click to upload",or_drag_and_drop_files:"or drag and drop files",uploading:"Uploading",processing_:"Processing...",add_pdf_documents_or_images:"Add PDF documents or images",add_documents_or_images:"Add documents or images",required:"Required",default_value:"Default value",format:"Format",read_only:"Read-only",page:"Page",draw_new_area:"Draw New Area",copy_to_all_pages:"Copy to All Pages",add_option:"Add option",option:"Option",condition:"Condition",first_party:"First Party",second_party:"Second Party",third_party:"Third Party",fourth_party:"Fourth Party",fifth_party:"Fifth Party",sixth_party:"Sixth Party",seventh_party:"Seventh Party",eighth_party:"Eighth Party",ninth_party:"Ninth Party",tenth_party:"Tenth Party",eleventh_party:"Eleventh Party",twelfth_party:"Twelfth Party",thirteenth_party:"Thirteenth Party",fourteenth_party:"Fourteenth Party",fifteenth_party:"Fifteenth Party",sixteenth_party:"Sixteenth Party",seventeenth_party:"Seventeenth Party",eighteenth_party:"Eighteenth Party",nineteenth_party:"Nineteenth Party",twentieth_party:"Twentieth Party",draw:"Draw",add:"Add",or_add_field_without_drawing:"Or add field without drawing",text:"Text",number:"Number",signature:"Signature",initials:"Initials",date:"Date",image:"Image",file:"File",select:"Select",checkbox:"Checkbox",multiple:"Multiple",radio:"Radio",cells:"Cells",stamp:"Stamp",payment:"Payment",phone:"Phone",text_field:"Text Field",signature_field:"Signature Field",initials_field:"Initials Field",date_field:"Date Field",number_field:"Number Field",image_field:"Image Field",file_field:"File Field",select_field:"Select Field",checkbox_field:"Checkbox Field",multiple_field:"Multiple Select Field",radio_field:"Radio Group Field",cells_field:"Cells Field",stamp_field:"Stamp Field",payment_field:"Payment Field",phone_field:"Phone Field",draw_a_text_field_on_the_page_with_a_mouse:"Draw a text field on the page with a mouse",drag_and_drop_any_other_field_type_on_the_page:"Drag & drop any other field type on the page",click_on_the_field_type_above_to_start_drawing_it:"Click on the field type above to start drawing it",please_draw_fields_to_prepare_the_document:"Please draw fields to prepare the document.",only_pdf_and_images_are_supported:"Only PDF and images are supported.",unlock_sms_verified_phone_number_field_with_paid_plan_use_text_field_for_phone_numbers_without_verification:"Unlock SMS-verified phone number field with paid plan. Use text field for phone numbers without verification.",available_only_in_pro:"Available only in Pro",failed_to_download_files:"Failed to download files",signature_is_too_small_please_redraw:"Signature is too small - please redraw.",please_add_fields_for_the_submitter_name_or_remove_the_submitter_name_if_not_needed:"Please add fields for the {submitter_name}. Or, remove the {submitter_name} if not needed.",draw_field:"Draw {field} Field",replace:"Replace",uploading_:"Uploading...",add_document:"Add Document",none:"None",ssn:"SSN",ein:"EIN",email:"Email",url:"URL",zip:"ZIP",custom:"Custom",numbers_only:"Numbers only",letters_only:"Letters only",regexp_validation:"Regexp validation",enter_pdf_password:"Enter PDF password",wrong_password:"Wrong password",currency:"Currency",save_and_preview:"Save and Preview",preferences:"Preferences",available_in_pro:"Available in Pro",some_fields_are_missing_in_the_formula:"Some fields are missing in the formula.",learn_more:"Learn more"},Ds={recurrent:"Recurrente",one_off:"\xdanico",editable:"Editable",search_field:"Campo de b\xfasqueda",field_not_found:"Campo no encontrado",clear:"Borrar",type_value:"Escriba valor",align:"Alinear",add_all_required_fields_to_continue:"Agregar todos los campos requeridos para continuar",uploaded_pdf_contains_form_fields_keep_or_remove_them:"El PDF cargado tiene campos. \xbfMantenerlos o eliminarlos?",keep:"Mantener",left:"Izquierda",heading:"Encabezado",validation:"Validaci\xf3n",add_blank_page:"Agregar p\xe1gina en blanco",right:"Derecha",center:"Centro",with_logo:"Con logotipo",description:"Descripci\xf3n",signing_date:"Fecha de Firma",display_title:"T\xedtulo de visualizaci\xf3n",unchecked:"No marcado",price:"Precio",equal:"Igual",not_equal:"No es igual",contains:"Contiene",does_not_contain:"No contiene",not_empty:"No vac\xedo",empty:"Vac\xedo",select_field_:"Seleccionar campo...",select_value_:"Seleccionar valor...",remove_condition:"Eliminar condici\xf3n",add_condition:"Agregar condici\xf3n",condition:"Condici\xf3n",formula:"F\xf3rmula",edit:"Editar",settings:"Configuraci\xf3n",up:"Arriba",down:"Abajo",set_signing_date:"Establecer fecha de firma",are_you_sure_:"\xbfEst\xe1s seguro?",sign_yourself:"Firma t\xfa mismo",checked:"Seleccionado",send:"Enviar",remove:"Eliminar",save:"Guardar",cancel:"Cancelar",or_add_field_without_drawing:"O a\xf1adir campo sin dibujar",draw_field_on_the_document:"Dibujar un campo en el documento",click_to_upload:"Haz clic para cargar",or_drag_and_drop_files:"o arrastra y suelta archivos",uploading:"Subiendo",processing_:"Procesando...",add_pdf_documents_or_images:"Agregar documentos PDF o im\xe1genes",add_documents_or_images:"Agregar documentos o im\xe1genes",required:"Requerido",default_value:"Valor predeterminado",format:"Formato",read_only:"Solo lectura",page:"P\xe1gina",draw_new_area:"Dibujar nueva \xe1rea",copy_to_all_pages:"Copiar a todas las p\xe1ginas",add_option:"Agregar opci\xf3n",option:"Opci\xf3n",first_party:"Primera Parte",second_party:"Segunda Parte",third_party:"Tercera Parte",fourth_party:"Cuarta Parte",fifth_party:"Quinta Parte",sixth_party:"Sexta Parte",seventh_party:"S\xe9ptima Parte",eighth_party:"Octava Parte",ninth_party:"Novena Parte",tenth_party:"D\xe9cima Parte",eleventh_party:"Und\xe9cimo Partido",twelfth_party:"Duod\xe9cimo Partido",thirteenth_party:"Decimotercer Partido",fourteenth_party:"Catorceavo Partido",fifteenth_party:"Quinceavo Partido",sixteenth_party:"Diecis\xe9isavo Partido",seventeenth_party:"Diecisieteavo Partido",eighteenth_party:"Dieciochoavo Partido",nineteenth_party:"Decimonovena Fiesta",twentieth_party:"Vig\xe9sima Fiesta",draw:"Dibujar",add:"Agregar",text:"Texto",signature:"Firma",initials:"Iniciales",date:"Fecha",number:"N\xfamero",image:"Imagen",file:"Archivo",select:"Seleccionar",checkbox:"Casilla",multiple:"M\xfaltiple",radio:"Radio",cells:"Celdas",stamp:"Sello",payment:"Pago",phone:"Tel\xe9fono",text_field:"Campo de Texto",signature_field:"Campo de Firma",initials_field:"Campo de Iniciales",date_field:"Campo de Fecha",number_field:"Campo de N\xfamero",image_field:"Campo de Imagen",file_field:"Campo de Archivo",select_field:"Campo de Selecci\xf3n",checkbox_field:"Campo de Casilla",multiple_field:"Campo M\xfaltiple",radio_field:"Campo de Grupo Radio",cells_field:"Campo de Celdas",stamp_field:"Campo de Sello",payment_field:"Campo de Pago",phone_field:"Campo de Tel\xe9fono",draw_a_text_field_on_the_page_with_a_mouse:"Dibujar un campo de texto en la p\xe1gina con el mouse",drag_and_drop_any_other_field_type_on_the_page:"Arrastra y suelta cualquier otro tipo de campo en la p\xe1gina",click_on_the_field_type_above_to_start_drawing_it:"Haz clic en el tipo de campo de arriba para comenzar a dibujarlo",please_draw_fields_to_prepare_the_document:"Por favor, dibuja los campos para preparar el documento.",only_pdf_and_images_are_supported:"Solo se admiten PDF e im\xe1genes.",unlock_sms_verified_phone_number_field_with_paid_plan_use_text_field_for_phone_numbers_without_verification:"Desbloquea el campo de n\xfamero de tel\xe9fono verificado por SMS con un plan pago. Usa el campo de texto para n\xfameros de tel\xe9fono sin verificaci\xf3n.",available_only_in_pro:"Disponible solo en Pro",failed_to_download_files:"Error al descargar los archivos",signature_is_too_small_please_redraw:"La firma es demasiado peque\xf1a. Por favor, dib\xfajala de nuevo.",please_add_fields_for_the_submitter_name_or_remove_the_submitter_name_if_not_needed:"Por favor, a\xf1ade campos para {submitter_name} o elimina {submitter_name} si no es necesario.",draw_field:"Dibujar campo {field}",replace:"Reemplazar",uploading_:"Subiendo...",add_document:"Subir",any:"Cualquier",drawn:"Dibujado",typed:"Escrito",none:"Ninguno",ssn:"SSN",ein:"EIN",email:"Correo electr\xf3nico",url:"URL",zip:"ZIP",custom:"Personalizado",numbers_only:"Solo n\xfameros",letters_only:"Solo letras",regexp_validation:"Validaci\xf3n de expresi\xf3n regular",enter_pdf_password:"Ingrese la contrase\xf1a del PDF",wrong_password:"Contrase\xf1a incorrecta",currency:"Moneda",save_and_preview:"Guardar y previsualizar",preferences:"Preferencias",available_in_pro:"Disponible en Pro",some_fields_are_missing_in_the_formula:"Faltan algunos campos en la f\xf3rmula.",learn_more:"Aprende m\xe1s"},Ss={ricorrente:"Ricorrente",una_volta:"Una volta",editable:"Modificabile",search_field:"Campo di ricerca",field_not_found:"Campo non trovato",clear:"Cancella",align:"Allinea",add_all_required_fields_to_continue:"Aggiungi tutti i campi obbligatori per continuare",uploaded_pdf_contains_form_fields_keep_or_remove_them:"Il PDF caricato contiene campi del modulo. Mantenerli o rimuoverli?",keep:"Mantieni",left:"Sinistra",heading:"Intestazione",validation:"Validazione",add_blank_page:"Aggiungi pagina vuota",right:"Destra",center:"Centro",description:"Descrizione",display_title:"Mostra titolo",with_logo:"Con logo",unchecked:"Non selezionato",price:"Prezzo",type_value:"Inserisci valore",equal:"Uguale",not_equal:"Non uguale",contains:"Contiene",does_not_contain:"Non contiene",not_empty:"Non vuoto",empty:"Vuoto",select_field_:"Seleziona campo...",select_value_:"Seleziona valore...",remove_condition:"Rimuovi condizione",add_condition:"Aggiungi condizione",are_you_sure_:"Sei sicuro?",sign_yourself:"Firma te stesso",set_signing_date:"Imposta data di firma",signing_date:"Data di firma",send:"Invia",remove:"Rimuovi",edit:"Modifica",settings:"Impostazioni",up:"Su",down:"Gi\xf9",checked:"Selezionato",save:"Salva",cancel:"Annulla",any:"Qualsiasi",drawn:"Disegnato",formula:"Formula",typed:"Digitato",draw_field_on_the_document:"Disegnare un campo sul documento",click_to_upload:"Clicca per caricare",or_drag_and_drop_files:"o trascina e rilascia i file",uploading:"Caricamento in corso",processing_:"Elaborazione...",add_pdf_documents_or_images:"Aggiungi documenti PDF o immagini",add_documents_or_images:"Aggiungi documenti o immagini",required:"Obbligatorio",default_value:"Valore predefinito",format:"Formato",read_only:"Sola lettura",page:"Pagina",draw_new_area:"Disegna nuova area",copy_to_all_pages:"Copia in tutte le pagine",add_option:"Aggiungi opzione",option:"Opzione",condition:"Condizione",first_party:"Prima parte",second_party:"Seconda parte",third_party:"Terza parte",fourth_party:"Quarta parte",fifth_party:"Quinta parte",sixth_party:"Sesta parte",seventh_party:"Settima parte",eighth_party:"Ottava parte",ninth_party:"Nona parte",tenth_party:"Decima parte",eleventh_party:"Undicesima parte",twelfth_party:"Dodicesima parte",thirteenth_party:"Tredicesima parte",fourteenth_party:"Quattordicesima parte",fifteenth_party:"Quindicesima parte",sixteenth_party:"Sedicesima parte",seventeenth_party:"Diciassettesima parte",eighteenth_party:"Diciottesima parte",nineteenth_party:"Diciannovesima parte",twentieth_party:"Ventesima parte",draw:"Disegna",add:"Aggiungi",or_add_field_without_drawing:"Oppure aggiungi campo senza disegno",text:"Testo",number:"Numero",signature:"Firma",initials:"Iniziali",date:"Data",image:"Immagine",file:"File",select:"Seleziona",checkbox:"Checkbox",multiple:"Multiplo",radio:"Radio",cells:"Celle",stamp:"Timbro",payment:"Pagamento",phone:"Telefono",text_field:"Campo di Testo",signature_field:"Campo di Firma",initials_field:"Campo di Iniziali",date_field:"Campo Data",number_field:"Campo Numero",image_field:"Campo Immagine",file_field:"Campo File",select_field:"Campo di Selezione",checkbox_field:"Campo di Checkbox",multiple_field:"Campo Selezione Multipla",radio_field:"Campo di Gruppo Radio",cells_field:"Campo Celle",stamp_field:"Campo Timbro",payment_field:"Campo Pagamento",phone_field:"Campo Telefono",draw_a_text_field_on_the_page_with_a_mouse:"Disegna un campo di testo sulla pagina con il mouse",drag_and_drop_any_other_field_type_on_the_page:"Trascina e rilascia qualsiasi altro tipo di campo sulla pagina",click_on_the_field_type_above_to_start_drawing_it:"Clicca sul tipo di campo sopra per iniziare a disegnarlo",please_draw_fields_to_prepare_the_document:"Per favore, disegna i campi per preparare il documento.",only_pdf_and_images_are_supported:"Sono supportati solo PDF e immagini.",unlock_sms_verified_phone_number_field_with_paid_plan_use_text_field_for_phone_numbers_without_verification:"Sblocca il campo numero di telefono verificato tramite SMS con un piano a pagamento. Usa il campo di testo per numeri di telefono senza verifica.",available_only_in_pro:"Disponibile solo in Pro",failed_to_download_files:"Impossibile scaricare i file",signature_is_too_small_please_redraw:"La firma \xe8 troppo piccola. Ridisegnala per favore.",please_add_fields_for_the_submitter_name_or_remove_the_submitter_name_if_not_needed:"Aggiungi campi per {submitter_name} o rimuovi {submitter_name} se non necessario.",draw_field:"Disegna il campo {field}",replace:"Sostituisci",uploading_:"Caricamento in corso...",add_document:"Aggiungi",none:"Nessuno",ssn:"SSN",ein:"EIN",email:"Email",url:"URL",zip:"CAP",custom:"Personalizzato",numbers_only:"Solo numeri",letters_only:"Solo lettere",regexp_validation:"Validazione regexp",enter_pdf_password:"Inserisci password PDF",wrong_password:"Password errata",currency:"Valuta",save_and_preview:"Salva e Anteprima",preferences:"Preferenze",available_in_pro:"Disponibile in Pro",some_fields_are_missing_in_the_formula:"Alcuni campi mancano nella formula.",learn_more:"Scopri di pi\xf9"},Ls={recurrent:"Recurrente",one_off:"\xdanico",editable:"Edit\xe1vel",search_field:"Campo de busca",field_not_found:"Campo n\xe3o encontrado",clear:"Limpar",type_value:"Digite valor",add_all_required_fields_to_continue:"Adicione todos os campos obrigat\xf3rios para continuar",uploaded_pdf_contains_form_fields_keep_or_remove_them:"O PDF carregado cont\xe9m campos. Manter ou remov\xea-los?",keep:"Manter",align:"Alinhar",left:"Esquerda",heading:"Cabe\xe7alho",validation:"Valida\xe7\xe3o",add_blank_page:"Adicionar p\xe1gina em branco",right:"Direita",center:"Centro",with_logo:"Com logotipo",description:"Descri\xe7\xe3o",display_title:"T\xedtulo de exibi\xe7\xe3o",signing_date:"Data da Assinatura",unchecked:"N\xe3o marcado",price:"Pre\xe7o",equal:"Igual",not_equal:"N\xe3o \xe9 igual",contains:"Cont\xe9m",does_not_contain:"N\xe3o cont\xe9m",not_empty:"N\xe3o vazio",empty:"Vazio",add_condition:"Adicionar condi\xe7\xe3o",select_field_:"Selecionar campo...",select_value_:"Selecionar valor...",remove_condition:"Remover condi\xe7\xe3o",condition:"Condi\xe7\xe3o",formula:"F\xf3rmula",edit:"Editar",settings:"Configura\xe7\xf5es",up:"Para cima",down:"Para baixo",set_signing_date:"Definir data de assinatura",are_you_sure_:"Tem certeza?",sign_yourself:"Assine voc\xea mesmo",checked:"Marcado",send:"Enviar",remove:"Remover",save:"Salvar",cancel:"Cancelar",or_add_field_without_drawing:"Ou adicione campo sem desenhar",draw_field_on_the_document:"Desenhar um campo no documento",click_to_upload:"Clique para enviar",or_drag_and_drop_files:"ou arraste e solte arquivos",uploading:"Carregando",processing_:"Processando...",add_pdf_documents_or_images:"Adicionar documentos PDF ou imagens",add_documents_or_images:"Adicionar documentos ou imagens",required:"Obrigat\xf3rio",default_value:"Valor padr\xe3o",format:"Formato",read_only:"Somente leitura",page:"P\xe1gina",draw_new_area:"Desenhar nova \xe1rea",copy_to_all_pages:"Copiar para todas as p\xe1ginas",add_option:"Adicionar op\xe7\xe3o",option:"Op\xe7\xe3o",first_party:"Primeira Parte",second_party:"Segunda Parte",third_party:"Terceira Parte",fourth_party:"Quarta Parte",fifth_party:"Quinta Parte",sixth_party:"Sexta Parte",seventh_party:"S\xe9tima Parte",eighth_party:"Oitava Parte",ninth_party:"Nona Parte",tenth_party:"D\xe9cima Parte",eleventh_party:"D\xe9cima Primeira Parte",twelfth_party:"D\xe9cima Segunda Parte",thirteenth_party:"D\xe9cima Terceira Parte",fourteenth_party:"D\xe9cima Quarta Parte",fifteenth_party:"D\xe9cima Quinta Parte",sixteenth_party:"D\xe9cima Sexta Parte",seventeenth_party:"D\xe9cima S\xe9tima Parte",eighteenth_party:"D\xe9cima Oitava Parte",nineteenth_party:"D\xe9cima Nona Parte",twentieth_party:"Vig\xe9sima Parte",draw:"Desenhar",add:"Adicionar",text:"Texto",signature:"Assinatura",initials:"R\xfabrica",date:"Data",number:"N\xfamero",image:"Imagem",file:"Arquivo",select:"Selecionar",checkbox:"Caixa",multiple:"M\xfaltiplo",radio:"R\xe1dio",cells:"C\xe9lulas",stamp:"Carimbo",payment:"Pagamento",phone:"Telefone",text_field:"Campo de Texto",signature_field:"Campo de Assinatura",initials_field:"Campo de R\xfabrica",date_field:"Campo de Data",number_field:"Campo de N\xfamero",image_field:"Campo de Imagem",file_field:"Campo de Arquivo",select_field:"Campo de Sele\xe7\xe3o",checkbox_field:"Campo de Caixa",multiple_field:"Campo de Op\xe7\xe3o M\xfaltipla",radio_field:"Campo de Grupo R\xe1dio",cells_field:"Campo de C\xe9lulas",stamp_field:"Campo de Carimbo",payment_field:"Campo de Pagamento",phone_field:"Campo de Telefone",draw_a_text_field_on_the_page_with_a_mouse:"Desenhar um campo de texto na p\xe1gina com o mouse",drag_and_drop_any_other_field_type_on_the_page:"Arraste e solte qualquer outro tipo de campo na p\xe1gina",click_on_the_field_type_above_to_start_drawing_it:"Clique no tipo de campo acima para come\xe7ar a desenh\xe1-lo",please_draw_fields_to_prepare_the_document:"Por favor, desenhe os campos para preparar o documento.",only_pdf_and_images_are_supported:"Apenas PDFs e imagens s\xe3o suportados.",unlock_sms_verified_phone_number_field_with_paid_plan_use_text_field_for_phone_numbers_without_verification:"Desbloqueie o campo de n\xfamero de telefone verificado por SMS com um plano pago. Use o campo de texto para n\xfameros de telefone sem verifica\xe7\xe3o.",available_only_in_pro:"Dispon\xedvel apenas no Pro",failed_to_download_files:"Falha ao baixar arquivos",signature_is_too_small_please_redraw:"A assinatura \xe9 muito pequena. Por favor, redesenhe.",please_add_fields_for_the_submitter_name_or_remove_the_submitter_name_if_not_needed:"Adicione campos para {submitter_name} ou remova {submitter_name} se n\xe3o for necess\xe1rio.",draw_field:"Desenhar campo {field}",replace:"Substituir",uploading_:"Carregando...",add_document:"Enviar",any:"Qualquer",drawn:"Desenhado",typed:"Digitado",none:"Nenhum",ssn:"SSN",ein:"EIN",email:"Email",url:"URL",zip:"ZIP",custom:"Personalizado",numbers_only:"Somente n\xfameros",letters_only:"Somente letras",regexp_validation:"Valida\xe7\xe3o de express\xe3o regular",enter_pdf_password:"Digite a senha do PDF",wrong_password:"Senha incorreta",currency:"Moeda",save_and_preview:"Salvar e Pr\xe9-visualizar",preferences:"Prefer\xeancias",available_in_pro:"Dispon\xedvel no Pro",some_fields_are_missing_in_the_formula:"Faltam alguns campos na f\xf3rmula.",learn_more:"Saiba mais"},Es={recurrent:"R\xe9current",one_off:"Ponctuel",editable:"\xc9ditable",search_field:"Champ de recherche",field_not_found:"Champ non trouv\xe9",clear:"Effacer",type_value:"Tapez la valeur",add_all_required_fields_to_continue:"Ajoutez tous les champs obligatoires pour continuer",uploaded_pdf_contains_form_fields_keep_or_remove_them:"Le PDF t\xe9l\xe9charg\xe9 contient des champs. Les conserver ou les supprimer?",keep:"Conserver",align:"Aligner",left:"Gauche",heading:"En-t\xeate",validation:"Validation",add_blank_page:"Ajouter une page blanche",right:"Droite",add_condition:"Ajouter une condition",center:"Centre",with_logo:"Avec logo",description:"Description",display_title:"Titre d'affichage",unchecked:"Non coch\xe9",price:"Prix",equal:"\xc9gal",not_equal:"Non \xe9gal",contains:"Contient",signing_date:"Date de signature",does_not_contain:"Ne contient pas",not_empty:"Non vide",empty:"Vide",select_field_:"S\xe9lectionner un champ...",select_value_:"S\xe9lectionner une valeur...",remove_condition:"Supprimer la condition",condition:"Condition",formula:"Formule",edit:"\xc9diter",settings:"Param\xe8tres",up:"Haut",down:"Bas",set_signing_date:"D\xe9finir la date de signature",are_you_sure_:"\xcates-vous s\xfbr?",sign_yourself:"Signez-vous",checked:"Coch\xe9",send:"Envoyer",remove:"Supprimer",save:"Enregistrer",cancel:"Annuler",draw_field_on_the_document:"Dessiner un champ sur le document",click_to_upload:"Cliquez pour t\xe9l\xe9charger",or_drag_and_drop_files:"ou faites glisser-d\xe9poser des fichiers",uploading:"T\xe9l\xe9chargement en cours",processing_:"Traitement en cours...",add_pdf_documents_or_images:"Ajoutez des documents PDF ou des images",add_documents_or_images:"Ajoutez des documents ou des images",required:"Requis",default_value:"Valeur par d\xe9faut",format:"Format",read_only:"Lecture seule",page:"Page",draw_new_area:"Dessiner une nouvelle zone",copy_to_all_pages:"Copier sur toutes les pages",add_option:"Ajouter une option",option:"Option",first_party:"Premi\xe8re partie",second_party:"Deuxi\xe8me partie",third_party:"Troisi\xe8me partie",fourth_party:"Quatri\xe8me partie",fifth_party:"Cinqui\xe8me partie",sixth_party:"Sixi\xe8me partie",seventh_party:"Septi\xe8me partie",eighth_party:"Huiti\xe8me partie",ninth_party:"Neuvi\xe8me partie",tenth_party:"Dixi\xe8me partie",eleventh_party:"Onzi\xe8me Parti",twelfth_party:"Douzi\xe8me Parti",thirteenth_party:"Treizi\xe8me Parti",fourteenth_party:"Quatorzi\xe8me Parti",fifteenth_party:"Quinzi\xe8me Parti",sixteenth_party:"Seizi\xe8me Parti",seventeenth_party:"Dix-septi\xe8me Parti",eighteenth_party:"Dix-huiti\xe8me Parti",nineteenth_party:"Dix-Neuvi\xe8me F\xeate",twentieth_party:"Vingti\xe8me F\xeate",draw:"Dessiner",add:"Ajouter",or_add_field_without_drawing:"Ou ajoutez un champ sans dessiner",text:"Texte",signature:"Signature",initials:"Initiales",date:"Date",number:"Num\xe9ro",image:"Image",file:"Fichier",select:"Choisir",checkbox:"Coche",multiple:"Multiple",radio:"Radio",cells:"Cellules",stamp:"Tampon",payment:"Paiement",phone:"T\xe9l\xe9phone",text_field:"Champ de Texte",signature_field:"Champ de Signature",initials_field:"Champ d'Initiales",date_field:"Champ de Date",number_field:"Champ de Num\xe9ro",image_field:"Champ d'Image",file_field:"Champ de Fichier",select_field:"Champ de Choix",checkbox_field:"Champ de Coche",multiple_field:"Champ de Choix Multiple",radio_field:"Champ de Groupe Radio",cells_field:"Champ de Cellules",stamp_field:"Champ de Tampon",payment_field:"Champ de Paiement",phone_field:"Champ de T\xe9l\xe9phone",draw_a_text_field_on_the_page_with_a_mouse:"Dessinez un champ texte sur la page avec une souris",drag_and_drop_any_other_field_type_on_the_page:"Glissez et d\xe9posez tout autre type de champ sur la page",click_on_the_field_type_above_to_start_drawing_it:"Cliquez sur le type de champ ci-dessus pour commencer \xe0 le dessiner",please_draw_fields_to_prepare_the_document:"Veuillez dessiner les champs pour pr\xe9parer le document.",only_pdf_and_images_are_supported:"Seuls les PDF et les images sont pris en charge.",unlock_sms_verified_phone_number_field_with_paid_plan_use_text_field_for_phone_numbers_without_verification:"D\xe9bloquez le champ de num\xe9ro de t\xe9l\xe9phone v\xe9rifi\xe9 par SMS avec un plan payant. Utilisez un champ texte pour les num\xe9ros de t\xe9l\xe9phone sans v\xe9rification.",available_only_in_pro:"Disponible uniquement en Pro",failed_to_download_files:"\xc9chec du t\xe9l\xe9chargement des fichiers",signature_is_too_small_please_redraw:"La signature est trop petite. Veuillez la redessiner.",please_add_fields_for_the_submitter_name_or_remove_the_submitter_name_if_not_needed:"Veuillez ajouter des champs pour {submitter_name} ou retirer {submitter_name} si ce n'est pas n\xe9cessaire.",draw_field:"Dessiner le champ {field}",replace:"Remplacer",uploading_:"T\xe9l\xe9chargement en cours...",add_document:"T\xe9l\xe9charger",any:"Tout",drawn:"Dessin\xe9",typed:"Tap\xe9",none:"Aucun",ssn:"SSN",ein:"EIN",email:"E-mail",url:"URL",zip:"ZIP",custom:"Personnalis\xe9",numbers_only:"Chiffres uniquement",letters_only:"Lettres uniquement",regexp_validation:"Validation par expression r\xe9guli\xe8re",enter_pdf_password:"Entrez le mot de passe PDF",wrong_password:"Mot de passe incorrect",currency:"Devise",save_and_preview:"Enregistrer et pr\xe9visualiser",preferences:"Pr\xe9f\xe9rences",available_in_pro:"Disponible en version Pro",some_fields_are_missing_in_the_formula:"Certains champs manquent dans la formule.",learn_more:"En savoir plus"},As={wiederkehrend:"Wiederkehrend",einmalig:"Einmalig",editable:"Bearbeitbar",search_field:"Suchfeld",field_not_found:"Feld nicht gefunden",clear:"L\xf6schen",type_value:"Wert eingeben",add_all_required_fields_to_continue:"F\xfcgen Sie alle erforderlichen Felder hinzu, um fortzufahren",uploaded_pdf_contains_form_fields_keep_or_remove_them:"Das hochgeladene PDF enth\xe4lt Formularfelder. Behalten oder entfernen?",keep:"Behalten",align:"Ausrichten",left:"Links",heading:"\xdcberschrift",validation:"Validierung",add_blank_page:"Leere Seite hinzuf\xfcgen",right:"Rechts",add_condition:"Bedingung hinzuf\xfcgen",center:"Zentriert",with_logo:"Mit Logo",description:"Beschreibung",display_title:"Anzeigetitel",unchecked:"Nicht \xfcberpr\xfcft",price:"Preis",equal:"Gleich",not_equal:"Ungleich",contains:"Enth\xe4lt",does_not_contain:"Enth\xe4lt nicht",not_empty:"Nicht leer",empty:"Leer",signing_date:"Signaturdatum",select_field_:"Feld ausw\xe4hlen...",select_value_:"Wert ausw\xe4hlen...",remove_condition:"Bedingung entfernen",condition:"Bedingung",formula:"Formel",edit:"Bearbeiten",settings:"Einstellungen",up:"Nach oben",down:"Nach unten",set_signing_date:"Unterschriftdatum festlegen",are_you_sure_:"Bist du sicher?",sign_yourself:"Unterschreiben Sie selbst",checked:"Ausgew\xe4hlt",send:"Senden",remove:"Entfernen",save:"Speichern",cancel:"Abbrechen",draw_field_on_the_document:"Ein Feld auf dem Dokument zeichnen",click_to_upload:"Klicken Sie zum Hochladen",or_drag_and_drop_files:"oder Dateien hierher ziehen",uploading:"Hochladen",processing_:"Verarbeitung...",add_pdf_documents_or_images:"PDF-Dokumente oder Bilder hinzuf\xfcgen",add_documents_or_images:"Dokumente oder Bilder hinzuf\xfcgen",required:"Erforderlich",default_value:"Standardwert",format:"Format",read_only:"Nur lesen",page:"Seite",draw_new_area:"Neuen Bereich zeichnen",copy_to_all_pages:"Auf alle Seiten kopieren",add_option:"Option hinzuf\xfcgen",option:"Option",first_party:"Erste Partei",second_party:"Zweite Partei",third_party:"Dritte Partei",fourth_party:"Vierte Partei",fifth_party:"F\xfcnfte Partei",sixth_party:"Sechste Partei",seventh_party:"Siebte Partei",eighth_party:"Achte Partei",ninth_party:"Neunte Partei",tenth_party:"Zehnte Partei",eleventh_party:"Elfte Partei",twelfth_party:"Zw\xf6lfte Partei",thirteenth_party:"Dreizehnte Partei",fourteenth_party:"Vierzehnte Partei",fifteenth_party:"F\xfcnfzehnte Partei",sixteenth_party:"Sechzehnte Partei",seventeenth_party:"Siebzehnte Partei",eighteenth_party:"Achtzehnte Partei",nineteenth_party:"Neunzehnte Party",twentieth_party:"Zwanzigste Party",draw:"Zeichnen",add:"Hinzuf\xfcgen",or_add_field_without_drawing:"Oder Feld ohne Zeichnung hinzuf\xfcgen",text:"Text",signature:"Unterschrift",initials:"Initialen",date:"Datum",number:"Nummer",image:"Bild",file:"Datei",select:"Ausw\xe4hlen",checkbox:"Checkbox",multiple:"Mehrere",radio:"Radio",cells:"Zellen",stamp:"Stempel",payment:"Zahlung",phone:"Telefon",text_field:"Textfeld",signature_field:"Unterschriftsfeld",initials_field:"Initialenfeld",date_field:"Datumsfeld",number_field:"Zahlenfeld",image_field:"Bildfeld",file_field:"Dateifeld",select_field:"Auswahlfeld",checkbox_field:"Checkbox-Feld",multiple_field:"Mehrfach-Auswahlfeld",radio_field:"Radio-Gruppenfeld",cells_field:"Zellenfeld",stamp_field:"Stempelfeld",payment_field:"Zahlungsfeld",phone_field:"Telefonfeld",draw_a_text_field_on_the_page_with_a_mouse:"Textfeld auf der Seite mit der Maus zeichnen",drag_and_drop_any_other_field_type_on_the_page:"Ziehe und lasse einen anderen Feldtyp auf die Seite fallen",click_on_the_field_type_above_to_start_drawing_it:"Klicke auf den Feldtyp oben, um mit dem Zeichnen zu beginnen",please_draw_fields_to_prepare_the_document:"Bitte zeichne Felder, um das Dokument vorzubereiten.",only_pdf_and_images_are_supported:"Nur PDFs und Bilder werden unterst\xfctzt.",unlock_sms_verified_phone_number_field_with_paid_plan_use_text_field_for_phone_numbers_without_verification:"Schalte das SMS-verifizierte Telefonnummernfeld mit einem kostenpflichtigen Plan frei. Verwende das Textfeld f\xfcr Telefonnummern ohne Verifizierung.",available_only_in_pro:"Nur in Pro verf\xfcgbar",failed_to_download_files:"Fehler beim Herunterladen der Dateien",signature_is_too_small_please_redraw:"Die Unterschrift ist zu klein. Bitte erneut zeichnen.",please_add_fields_for_the_submitter_name_or_remove_the_submitter_name_if_not_needed:"Bitte f\xfcge Felder f\xfcr {submitter_name} hinzu oder entferne {submitter_name}, falls nicht erforderlich.",draw_field:"Feld {field} zeichnen",replace:"Ersetzen",uploading_:"Hochladen...",add_document:"Hochladen",any:"Jede",drawn:"Gezeichnet",typed:"Getippt",none:"Keine",ssn:"SSN",ein:"EIN",email:"E-Mail",url:"URL",zip:"ZIP",custom:"Benutzerdefiniert",numbers_only:"Nur Zahlen",letters_only:"Nur Buchstaben",regexp_validation:"Regul\xe4rer Ausdruck \xdcberpr\xfcfung",enter_pdf_password:"Geben Sie das PDF-Passwort ein",wrong_password:"Falsches Passwort",currency:"W\xe4hrung",save_and_preview:"Speichern und Vorschau",preferences:"Einstellungen",available_in_pro:"In Pro verf\xfcgbar",some_fields_are_missing_in_the_formula:"Einige Felder fehlen in der Formel.",learn_more:"Erfahren Sie mehr"},Ts={name:"TemplateBuilder",components:{Upload:Q,Document:Ul,Fields:gl,IconInfoCircle:Ot.A,MobileDrawField:xl,IconPlus:nl.A,IconWritingSign:Ze.A,MobileFields:vs,Logo:Ql,Dropzone:le,DocumentPreview:rs,DocumentControls:cs,IconInnerShadowTop:W.A,Contenteditable:je,IconUsersPlus:ws.A,IconChevronDown:sl.A,IconAdjustments:ks.A,IconEye:xs.A,IconDeviceFloppy:Cs.A},provide(){return{template:this.template,save:this.save,t:this.t,currencies:this.currencies,locale:this.locale,baseFetch:this.baseFetch,fieldTypes:this.fieldTypes,backgroundColor:this.backgroundColor,withPhone:this.withPhone,withPayment:this.withPayment,isPaymentConnected:this.isPaymentConnected,withFormula:this.withFormula,withConditions:this.withConditions,defaultDrawFieldType:this.defaultDrawFieldType,selectedAreaRef:(0,o.EW)((()=>this.selectedAreaRef)),fieldsDragFieldRef:(0,o.EW)((()=>this.fieldsDragFieldRef))}},props:{template:{type:Object,required:!0},i18n:{type:Object,required:!1,default:()=>({})},withFieldPlaceholder:{type:Boolean,required:!1,default:!1},backgroundColor:{type:String,required:!1,default:""},locale:{type:String,required:!1,default:""},editable:{type:Boolean,required:!1,default:!0},withSendButton:{type:Boolean,required:!1,default:!0},withSignYourselfButton:{type:Boolean,required:!1,default:!0},inputMode:{type:Boolean,required:!1,default:!1},withHelp:{type:Boolean,required:!1,default:!0},withAddPageButton:{type:Boolean,required:!1,default:!1},autosave:{type:Boolean,required:!1,default:!0},defaultFields:{type:Array,required:!1,default:()=>[]},defaultRequiredFields:{type:Array,required:!1,default:()=>[]},withSelectedFieldType:{type:Boolean,required:!1,default:!1},defaultDrawFieldType:{type:String,required:!1,default:"text"},currencies:{type:Array,required:!1,default:()=>[]},fieldTypes:{type:Array,required:!1,default:()=>[]},defaultSubmitters:{type:Array,required:!1,default:()=>[]},acceptFileTypes:{type:String,required:!1,default:"image/*, application/pdf"},baseUrl:{type:String,required:!1,default:""},withLogo:{type:Boolean,required:!1,default:!0},onUpload:{type:Function,required:!1,default:()=>()=>{}},onSave:{type:Function,required:!1,default:()=>()=>{}},onChange:{type:Function,required:!1,default:()=>()=>{}},withStickySubmitters:{type:Boolean,required:!1,default:!0},withUploadButton:{type:Boolean,required:!1,default:!0},withTitle:{type:Boolean,required:!1,default:!0},withFieldsList:{type:Boolean,required:!1,default:!0},authenticityToken:{type:String,required:!1,default:""},withDocumentsList:{type:Boolean,required:!1,default:!0},withPhone:{type:Boolean,required:!1,default:!1},withPayment:{type:Boolean,required:!1,default:!1},isPaymentConnected:{type:Boolean,required:!1,default:!1},withFormula:{type:Boolean,required:!1,default:!1},withConditions:{type:Boolean,required:!1,default:!1},onlyDefinedFields:{type:Boolean,required:!1,default:!1},fetchOptions:{type:Object,required:!1,default:()=>({headers:{}})}},data:()=>({documentRefs:[],isBreakpointLg:!1,isLoadingBlankPage:!1,isSaving:!1,selectedSubmitter:null,showDrawField:!1,pendingFieldAttachmentUuids:[],drawField:null,copiedArea:null,drawFieldType:null,drawOption:null,dragField:null}),computed:{selectedAreaRef:()=>(0,n.KR)(),fieldsDragFieldRef:()=>(0,n.KR)(),language(){return this.locale.split("-")[0].toLowerCase()},defaultDateFormat(){const e=Intl.DateTimeFormat().resolvedOptions().locale.endsWith("-US"),t=new Intl.DateTimeFormat("en-US",{timeZoneName:"short"}).format(new Date).match(/\s(?:CST|CDT|PST|PDT|EST|EDT)$/);return this.localeDateFormats[this.locale]||(e||t?"MM/DD/YYYY":"DD/MM/YYYY")},localeDateFormats:()=>({"de-DE":"DD.MM.YYYY","fr-FR":"DD/MM/YYYY","it-IT":"DD/MM/YYYY","en-GB":"DD/MM/YYYY","es-ES":"DD/MM/YYYY"}),fieldAreasIndex(){const e={};return this.template.fields.forEach((t=>{(t.areas||[]).forEach((i=>{e[i.attachment_uuid]||={};(e[i.attachment_uuid][i.page]||=[]).push({area:i,field:t})}))})),e},isAllRequiredFieldsAdded(){return!this.defaultRequiredFields?.some((e=>!this.template.fields?.some((t=>t.name===e.name))))},selectedField(){return this.template.fields.find((e=>e.areas?.includes(this.selectedAreaRef.value)))},sortedDocuments(){return this.template.schema.map((e=>this.template.documents.find((t=>t.uuid===e.attachment_uuid))))}},created(){this.template.fields?.length||1!==this.template.submitters?.length||"First Party"===this.template.submitters[0]?.name&&(this.template.submitters[0].name=this.t("first_party"));const e=this.defaultSubmitters.map((e=>this.template.submitters.find((t=>t.name===e))?.uuid));this.defaultSubmitters.forEach(((t,i)=>{const a=this.template.submitters[i]||={};a.name=t,e.filter(Boolean).length?a.uuid=e[i]||a.uuid||(0,Ia.A)():a.uuid||=(0,Ia.A)()})),this.selectedSubmitter=this.template.submitters[0]},mounted(){this.undoStack=[JSON.stringify(this.template)],this.redoStack=[],this.$nextTick((()=>{this.onWindowResize()})),document.addEventListener("keyup",this.onKeyUp),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("resize",this.onWindowResize),this.$nextTick((()=>{document.location.search?.includes("stripe_connect_success")&&document.querySelector('form[action="/auth/stripe_connect"]')?.closest(".dropdown")?.querySelector("label")?.focus()})),this.template.schema.forEach((e=>{e.pending_fields&&this.pendingFieldAttachmentUuids.push(e.attachment_uuid)}))},unmounted(){document.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},beforeUpdate(){this.documentRefs=[]},methods:{closeDropdown(){document.activeElement.blur()},t(e){return this.i18n[e]||a[this.language]?.[e]||Fs[e]||e},removePendingFields(){this.template.fields=this.template.fields.filter((e=>this.template.schema.find((t=>t.attachment_uuid===e.attachment_uuid&&t.pending_fields)))),this.save()},addField(e,t=null){const i={name:"",uuid:(0,Ia.A)(),required:"checkbox"!==e,areas:t?[t]:[],submitter_uuid:this.selectedSubmitter.uuid,type:e};["select","multiple","radio"].includes(e)&&(i.options=[{value:"",uuid:(0,Ia.A)()}]),"stamp"===e&&(i.readonly=!0),"date"===e&&(i.preferences={format:this.defaultDateFormat}),this.template.fields.push(i),this.save()},startFieldDraw({name:e,type:t}){const i=this.template.fields?.find((t=>t.submitter_uuid===this.selectedSubmitter.uuid&&e&&e===t.name));if(i)this.drawField=i;else{const i={name:e||"",uuid:(0,Ia.A)(),required:"checkbox"!==t,areas:[],submitter_uuid:this.selectedSubmitter.uuid,type:t};["select","multiple","radio"].includes(t)&&(i.options=[{value:"",uuid:(0,Ia.A)()}]),"stamp"===t&&(i.readonly=!0),"date"===t&&(i.preferences={format:this.defaultDateFormat}),this.drawField=i}this.drawOption=null},undo(){if(this.undoStack.length>1){this.undoStack.pop();const e=this.undoStack[this.undoStack.length-1],t=JSON.stringify(this.template);e&&e!==t&&(this.redoStack.push(t),Object.assign(this.template,JSON.parse(e)),this.save())}},redo(){const e=this.redoStack.pop();this.lastRedoData=e;const t=JSON.stringify(this.template);e&&e!==t&&(this.undoStack[this.undoStack.length-1]!==t&&this.undoStack.push(t),Object.assign(this.template,JSON.parse(e)),this.save())},onWindowResize(e){this.isBreakpointLg=this.$el.getRootNode().querySelector("div[data-v-app]").offsetWidth<1024},setDocumentRefs(e){e&&this.documentRefs.push(e)},scrollIntoDocument(e){this.documentRefs.find((t=>t.document.uuid===e.attachment_uuid)).$el.scrollIntoView({behavior:"smooth",block:"start"})},clearDrawField(){this.drawField=null,this.drawOption=null,this.showDrawField=!1,this.withSelectedFieldType||(this.drawFieldType="")},onKeyUp(e){"Escape"===e.code&&(this.clearDrawField(),this.selectedAreaRef.value=null),this.editable&&["Backspace","Delete"].includes(e.key)&&this.selectedAreaRef.value&&document.activeElement===document.body&&(this.removeArea(this.selectedAreaRef.value),this.selectedAreaRef.value=null)},onKeyDown(e){e.metaKey&&e.shiftKey&&"z"===e.key||e.ctrlKey&&"Z"===e.key?(e.stopImmediatePropagation(),e.preventDefault(),this.redo()):(e.ctrlKey||e.metaKey)&&"z"===e.key?(e.stopImmediatePropagation(),e.preventDefault(),this.undo()):(e.ctrlKey||e.metaKey)&&"c"===e.key&&document.activeElement===document.body?(e.preventDefault(),this.copiedArea=this.selectedAreaRef?.value):(e.ctrlKey||e.metaKey)&&"v"===e.key&&this.copiedArea&&document.activeElement===document.body?(e.preventDefault(),this.pasteField()):this.selectedAreaRef.value&&["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(e.key)&&document.activeElement===document.body&&(e.preventDefault(),this.handleAreaArrows(e))},handleAreaArrows(e){if(!this.editable)return;const t=this.selectedAreaRef.value,i=this.documentRefs.find((e=>e.document.uuid===t.attachment_uuid)).pageRefs[t.page].$refs.image.getBoundingClientRect(),a=e.shiftKey?5:1;"ArrowRight"===e.key&&e.altKey?t.w=Math.min(Math.max(t.w+a/i.width,0),1-t.x):"ArrowLeft"===e.key&&e.altKey?t.w=Math.min(Math.max(t.w-a/i.width,0),1-t.x):"ArrowUp"===e.key&&e.altKey?t.h=Math.min(Math.max(t.h-a/i.height,0),1-t.y):"ArrowDown"===e.key&&e.altKey?t.h=Math.min(Math.max(t.h+a/i.height,0),1-t.y):"ArrowRight"===e.key?t.x=Math.min(Math.max(t.x+a/i.width,0),1-t.w):"ArrowLeft"===e.key?t.x=Math.min(Math.max(t.x-a/i.width,0),1-t.w):"ArrowUp"===e.key?t.y=Math.min(Math.max(t.y-a/i.height,0),1-t.h):"ArrowDown"===e.key&&(t.y=Math.min(Math.max(t.y+a/i.height,0),1-t.h)),this.debouncedSave()},debouncedSave(){clearTimeout(this._saveTimeout),this._saveTimeout=setTimeout((()=>{this.save()}),700)},removeArea(e){const t=this.template.fields.find((t=>t.areas?.includes(e)));t.areas.splice(t.areas.indexOf(e),1),t.areas.length||this.template.fields.splice(this.template.fields.indexOf(t),1),this.save()},pasteField(){const e=this.template.fields.find((e=>e.areas?.includes(this.copiedArea))),t=this.selectedAreaRef?.value||this.copiedArea;if(e&&t){const i={...JSON.parse(JSON.stringify(this.copiedArea)),attachment_uuid:t.attachment_uuid,page:t.page,x:t.x,y:t.y+1.3*t.h};["radio","multiple"].includes(e.type)?(this.copiedArea.option_uuid||=e.options[0].uuid,i.option_uuid=(0,Ia.A)(),e.options.push({uuid:i.option_uuid}),e.areas.push(i)):this.template.fields.push({...JSON.parse(JSON.stringify(e)),uuid:(0,Ia.A)(),areas:[i]}),this.selectedAreaRef.value=i,this.save()}},pushUndo(){const e=JSON.stringify(this.template);this.undoStack[this.undoStack.length-1]!==e&&(this.undoStack.push(e),this.lastRedoData!==e&&(this.redoStack=[]))},setDefaultAreaSize(e,t){const i=this.documentRefs.find((t=>t.document.uuid===e.attachment_uuid)).pageRefs[e.page].$refs.mask;"checkbox"===t?(e.w=i.clientWidth/30/i.clientWidth,e.h=i.clientWidth/30/i.clientWidth*(i.clientWidth/i.clientHeight)):"image"===t?(e.w=i.clientWidth/5/i.clientWidth,e.h=i.clientWidth/5/i.clientWidth*(i.clientWidth/i.clientHeight)):"signature"===t||"stamp"===t?(e.w=i.clientWidth/5/i.clientWidth,e.h=i.clientWidth/5/i.clientWidth*(i.clientWidth/i.clientHeight)/2):"initials"===t?(e.w=i.clientWidth/10/i.clientWidth,e.h=i.clientWidth/35/i.clientWidth):(e.w=i.clientWidth/5/i.clientWidth,e.h=i.clientWidth/35/i.clientWidth)},onDraw(e){if(this.drawField){if(this.drawOption){const t=this.drawField.areas?.find((e=>!e.option_uuid));t&&!this.drawField.areas.find((e=>e.option_uuid===this.drawField.options[0].uuid))&&(t.option_uuid=this.drawField.options[0].uuid),e.option_uuid=this.drawOption.uuid}if(0===e.w||0===e.h){const t=this.drawField.areas?.[this.drawField.areas.length-1];this.selectedField?.type===this.drawField.type?(e.w=this.selectedAreaRef.value.w,e.h=this.selectedAreaRef.value.h):t?(e.w=t.w,e.h=t.h):this.setDefaultAreaSize(e,this.drawOption?"checkbox":this.drawField?.type),e.x-=e.w/2,e.y-=e.h/2}this.drawField.areas||=[];const t=this.drawField.areas.findIndex((t=>t.attachment_uuid===e.attachment_uuid&&t.page>e.page));-1!==t?this.drawField.areas.splice(t,0,e):this.drawField.areas.push(e),-1===this.template.fields.indexOf(this.drawField)&&this.template.fields.push(this.drawField),this.drawField=null,this.drawOption=null,this.selectedAreaRef.value=e,this.save()}else{const t=this.documentRefs.find((t=>t.document.uuid===e.attachment_uuid)).pageRefs[e.page].$refs.mask;let i=t.clientWidth*e.w<35?"checkbox":"text";if(this.drawFieldType?i=this.drawFieldType:this.defaultDrawFieldType&&"text"!==this.defaultDrawFieldType?i=this.defaultDrawFieldType:0===this.fieldTypes.length||this.fieldTypes.includes(i)||(i=this.fieldTypes[0]),"checkbox"===i&&!this.drawFieldType&&("checkbox"===this.template.fields[this.template.fields.length-1]?.type||e.w)){const a=[...this.template.fields].reverse().find((e=>e.type===i)),l=a?.areas?.[a.areas.length-1];if(l||e.w){const i=l?.w||30/t.clientWidth,a=l?.h||30/t.clientHeight;t.clientWidth*e.w<5&&(e.x=e.x-i/2,e.y=e.y-a/2),e.w=i,e.h=a}}!this.drawFieldType||0!==e.w&&0!==e.h||(this.selectedField?.type===this.drawFieldType?(e.w=this.selectedAreaRef.value.w,e.h=this.selectedAreaRef.value.h):this.setDefaultAreaSize(e,this.drawFieldType),e.x-=e.w/2,e.y-=e.h/2),e.w&&(this.addField(i,e),this.selectedAreaRef.value=e)}},onDropfield(e){const t=this.fieldsDragFieldRef.value||{name:"",uuid:(0,Ia.A)(),submitter_uuid:this.selectedSubmitter.uuid,required:"checkbox"!==this.dragField.type,...this.dragField};this.fieldsDragFieldRef.value||(["select","multiple","radio"].includes(t.type)&&(t.options=[{value:"",uuid:(0,Ia.A)()}]),["stamp","heading"].includes(t.type)&&(t.readonly=!0),"date"===t.type&&(t.preferences={format:this.defaultDateFormat}));const i={x:(e.x-6)/e.maskW,y:e.y/e.maskH,page:e.page,attachment_uuid:e.attachment_uuid},a=[...this.template.fields].reverse().find((e=>e.type===t.type));let l;l=this.selectedField?.type===t.type?this.selectedAreaRef.value:a?.areas?.length?a.areas[a.areas.length-1]:["checkbox"].includes(t.type)?{w:e.maskW/30/e.maskW,h:e.maskW/30/e.maskW*(e.maskW/e.maskH)}:"image"===t.type?{w:e.maskW/5/e.maskW,h:e.maskW/5/e.maskW*(e.maskW/e.maskH)}:"signature"===t.type||"stamp"===t.type?{w:e.maskW/5/e.maskW,h:e.maskW/5/e.maskW*(e.maskW/e.maskH)/2}:"initials"===t.type?{w:e.maskW/10/e.maskW,h:e.maskW/35/e.maskW}:{w:e.maskW/5/e.maskW,h:e.maskW/35/e.maskW},i.w=l.w,i.h=l.h,i.y=i.y-l.h/2,"cells"===t.type&&(i.cell_w=l.cell_w||l.w/5),t.areas||=[];const s=t.areas[t.areas.length-1];s&&(i.x-=s.w/2,i.w=s.w,i.h=s.h),t.areas.push(i),this.selectedAreaRef.value=i,-1===this.template.fields.indexOf(t)&&this.template.fields.push(t),this.save(),document.activeElement?.blur(),"heading"===t.type&&this.$nextTick((()=>{this.documentRefs.find((t=>t.document.uuid===e.attachment_uuid)).pageRefs[e.page].areaRefs.find((e=>e.area===this.selectedAreaRef.value)).focusValueInput()}))},addBlankPage(){this.isLoadingBlankPage=!0;const e=document.createElement("canvas");e.width=816,e.height=1056;const t=e.getContext("2d");t.fillStyle="white",t.fillRect(0,0,e.width,e.height),e.toBlob((e=>{const t=new File([e],`Page ${this.template.schema.length+1}.png`,{type:e.type,lastModified:Date.now()}),i=new FormData;i.append("files[]",t),this.baseFetch(`/templates/${this.template.id}/documents`,{method:"POST",body:i}).then((async e=>{this.updateFromUpload(await e.json())})).finally((()=>{this.isLoadingBlankPage=!1}))}),"image/png")},updateFromUpload(e){this.template.schema.push(...e.schema),this.template.documents.push(...e.documents),e.fields&&(this.template.fields=e.fields),e.submitters&&(this.template.submitters=e.submitters,this.template.submitters.find((e=>e.uuid===this.selectedSubmitter?.uuid))||(this.selectedSubmitter=this.template.submitters[0])),this.$nextTick((()=>{this.$refs.previews.scrollTop=this.$refs.previews.scrollHeight,this.scrollIntoDocument(e.schema[0])})),"New Document"===this.template.name&&(this.template.name=this.template.schema[0].name),this.onUpload&&this.onUpload(this.template),this.save(),e.documents.forEach((e=>{e.metadata?.pdf?.fields?.length&&(this.pendingFieldAttachmentUuids.push(e.uuid),e.metadata.pdf.fields.forEach((e=>{e.submitter_uuid=this.selectedSubmitter.uuid,this.template.fields.push(e)})))}))},updateName(e){this.template.name=e,this.save()},onDocumentRemove(e){window.confirm(this.t("are_you_sure_"))&&this.template.schema.splice(this.template.schema.indexOf(e),1);const t=[];this.template.fields.forEach((i=>{[...i.areas||[]].forEach((a=>{a.attachment_uuid===e.attachment_uuid&&(i.areas.splice(i.areas.indexOf(a),1),t.push(i.uuid))}))})),this.template.fields=this.template.fields.filter((e=>!t.includes(e.uuid)||e.areas?.length)),this.save()},onDocumentReplace(e){const{replaceSchemaItem:t,schema:i,documents:a}=e;if(this.template.schema.splice(this.template.schema.indexOf(t),1,i[0]),this.template.documents.push(...a),e.fields){this.template.fields=e.fields;const i=[];this.template.fields.forEach((e=>{[...e.areas||[]].forEach((a=>{a.attachment_uuid===t.attachment_uuid&&(e.areas.splice(e.areas.indexOf(a),1),i.push(e.uuid))}))})),this.template.fields=this.template.fields.filter((e=>!i.includes(e.uuid)||e.areas?.length))}e.submitters&&(this.template.submitters=e.submitters,this.template.submitters.find((e=>e.uuid===this.selectedSubmitter?.uuid))||(this.selectedSubmitter=this.template.submitters[0])),this.template.fields.forEach((e=>{(e.areas||[]).forEach((e=>{e.attachment_uuid===t.attachment_uuid&&(e.attachment_uuid=i[0].attachment_uuid)}))})),this.onUpload&&this.onUpload(this.template),this.save()},moveDocument(e,t){const i=this.template.schema.indexOf(e);this.template.schema.splice(i,1),i+t>this.template.schema.length?this.template.schema.unshift(e):i+t<0?this.template.schema.push(e):this.template.schema.splice(i+t,0,e),this.save()},maybeShowErrorTemplateAlert(e){if(!this.isAllRequiredFieldsAdded){e.preventDefault();const t=this.defaultRequiredFields?.filter((e=>!this.template.fields?.some((t=>t.name===e.name))));if(t?.length)return alert(this.t("add_all_required_fields_to_continue")+": "+t.map((e=>e.name)).join(", "))}if(this.template.fields.length){const t=this.template.submitters.find((e=>!this.template.fields.some((t=>t.submitter_uuid===e.uuid))));t&&(e.preventDefault(),alert(this.t("please_add_fields_for_the_submitter_name_or_remove_the_submitter_name_if_not_needed").replaceAll("{submitter_name}",t.name)))}else e.preventDefault(),alert(this.t("please_draw_fields_to_prepare_the_document"))},onSaveClick(){if(!this.isAllRequiredFieldsAdded){const e=this.defaultRequiredFields?.filter((e=>!this.template.fields?.some((t=>t.name===e.name))));if(e?.length)return alert(this.t("add_all_required_fields_to_continue")+": "+e.map((e=>e.name)).join(", "))}if(this.template.fields.length){const e=this.template.submitters.find((e=>!this.template.fields.some((t=>t.submitter_uuid===e.uuid))));e?alert(this.t("please_add_fields_for_the_submitter_name_or_remove_the_submitter_name_if_not_needed").replaceAll("{submitter_name}",e.name)):(this.isSaving=!0,this.save().then((()=>{window.Turbo.visit(`/templates/${this.template.id}`)})).finally((()=>{this.isSaving=!1})))}else alert(this.t("please_draw_fields_to_prepare_the_document"))},scrollToArea(e){this.documentRefs.find((t=>t.document.uuid===e.attachment_uuid)).scrollToArea(e),this.selectedAreaRef.value=e},baseFetch(e,t={}){return fetch(this.baseUrl+e,{...t,headers:{"X-CSRF-Token":this.authenticityToken,...this.fetchOptions.headers,...t.headers}})},save({force:e}={force:!1}){return this.pendingFieldAttachmentUuids=[],this.onChange&&this.onChange(this.template),this.autosave||e?(this.$nextTick((()=>{this.$el.closest("template-builder")&&(this.$el.closest("template-builder").dataset.template=JSON.stringify(this.template))})),this.pushUndo(),this.baseFetch(`/templates/${this.template.id}`,{method:"PUT",body:JSON.stringify({template:{name:this.template.name,schema:this.template.schema,submitters:this.template.submitters,fields:this.template.fields}}),headers:{"Content-Type":"application/json"}}).then((()=>{this.onSave&&this.onSave(this.template)}))):Promise.resolve({})}}},Is=(0,j.A)(Ts,[["render",function(e,t,i,a,l,n){const M=(0,o.g2)("IconInfoCircle"),X=(0,o.g2)("Logo"),N=(0,o.g2)("Contenteditable"),z=(0,o.g2)("IconWritingSign"),B=(0,o.g2)("IconUsersPlus"),O=(0,o.g2)("IconInnerShadowTop"),U=(0,o.g2)("IconDeviceFloppy"),W=(0,o.g2)("IconChevronDown"),V=(0,o.g2)("IconEye"),j=(0,o.g2)("IconAdjustments"),Q=(0,o.g2)("DocumentPreview"),Y=(0,o.g2)("Upload"),H=(0,o.g2)("IconPlus"),K=(0,o.g2)("Dropzone"),J=(0,o.g2)("Document"),Z=(0,o.g2)("DocumentControls"),G=(0,o.g2)("Fields"),ee=(0,o.g2)("MobileDrawField"),te=(0,o.g2)("MobileFields");return(0,o.uX)(),(0,o.CE)("div",d,[l.pendingFieldAttachmentUuids.length?((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("div",c,[(0,o.bF)(M,{class:"stroke-info shrink-0 w-6 h-6"}),(0,o.Lk)("span",null,(0,r.v_)(n.t("uploaded_pdf_contains_form_fields_keep_or_remove_them")),1),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-sm",onClick:t[0]||(t[0]=(0,s.D$)(((...e)=>n.removePendingFields&&n.removePendingFields(...e)),["prevent"]))},(0,r.v_)(n.t("remove")),1),(0,o.Lk)("button",{class:"btn btn-sm btn-neutral text-white",onClick:t[1]||(t[1]=(0,s.D$)(((...e)=>n.save&&n.save(...e)),["prevent"]))},(0,r.v_)(n.t("keep")),1)])])])):(0,o.Q3)("",!0),e.$slots.buttons||i.withTitle?((0,o.uX)(),(0,o.CE)("div",{key:1,id:"title_container",class:(0,r.C4)(["flex justify-between py-1.5 items-center pr-4 top-0 z-10",{sticky:i.withStickySubmitters||l.isBreakpointLg}]),style:(0,r.Tr)({backgroundColor:i.backgroundColor})},[(0,o.Lk)("div",p,[i.withLogo?((0,o.uX)(),(0,o.CE)("a",h,[(0,o.bF)(X)])):(0,o.Q3)("",!0),i.withTitle?((0,o.uX)(),(0,o.Wv)(N,{key:1,"model-value":i.template.name,editable:i.editable,class:"text-xl md:text-3xl font-semibold focus:text-clip","icon-stroke-width":2.3,"onUpdate:modelValue":n.updateName},null,8,["model-value","editable","onUpdate:modelValue"])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",m,[e.$slots.buttons?(0,o.RG)(e.$slots,"buttons",{key:0}):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[i.withSignYourselfButton?((0,o.uX)(),(0,o.CE)("a",{key:0,href:i.template.submitters.length>1?`/templates/${i.template.id}/submissions/new?selfsign=true`:`/d/${i.template.slug}`,class:"btn btn-primary btn-ghost text-base hidden md:flex",target:i.template.submitters.length>1?"":"_blank","data-turbo-frame":i.template.submitters.length>1?"modal":"",onClick:t[2]||(t[2]=(...e)=>n.maybeShowErrorTemplateAlert&&n.maybeShowErrorTemplateAlert(...e))},[(0,o.bF)(z,{width:"22",class:"inline"}),(0,o.Lk)("span",b,(0,r.v_)(n.t("sign_yourself")),1)],8,f)):(0,o.Q3)("",!0),i.withSendButton?((0,o.uX)(),(0,o.CE)("a",{key:1,href:`/templates/${i.template.id}/submissions/new?with_link=true`,"data-turbo-frame":"modal",class:"white-button md:!px-6",onClick:t[3]||(t[3]=(...e)=>n.maybeShowErrorTemplateAlert&&n.maybeShowErrorTemplateAlert(...e))},[(0,o.bF)(B,{width:"20",class:"inline"}),(0,o.Lk)("span",g,(0,r.v_)(n.t("send")),1)],8,_)):(0,o.Q3)("",!0),i.editable?((0,o.uX)(),(0,o.CE)("span",y,[(0,o.Lk)("button",(0,o.v6)({class:["base-button !rounded-r-none !pr-2",{disabled:l.isSaving}]},l.isSaving?{disabled:!0}:{},{onClick:t[4]||(t[4]=(0,s.D$)(((...e)=>n.onSaveClick&&n.onSaveClick(...e)),["prevent"]))}),[l.isSaving?((0,o.uX)(),(0,o.Wv)(O,{key:0,width:"22",class:"animate-spin"})):((0,o.uX)(),(0,o.Wv)(U,{key:1,width:"22"})),(0,o.Lk)("span",v,(0,r.v_)(n.t("save")),1)],16),(0,o.Lk)("div",w,[(0,o.Lk)("label",k,[(0,o.Lk)("span",x,[(0,o.bF)(W,{class:"w-5 h-5 flex-shrink-0"})])]),(0,o.Lk)("ul",C,[(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:`/templates/${i.template.id}/form`,"data-turbo":"false",class:"flex items-center justify-center space-x-2"},[(0,o.bF)(V,{class:"w-6 h-6 flex-shrink-0"}),(0,o.Lk)("span",D,(0,r.v_)(n.t("save_and_preview")),1)],8,F)]),(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:`/templates/${i.template.id}/preferences`,"data-turbo-frame":"modal",class:"flex space-x-2",onClick:t[5]||(t[5]=(...e)=>n.closeDropdown&&n.closeDropdown(...e))},[(0,o.bF)(j,{class:"w-6 h-6 flex-shrink-0"}),(0,o.Lk)("span",L,(0,r.v_)(n.t("preferences")),1)],8,S)])])])])):((0,o.uX)(),(0,o.CE)("a",{key:3,href:`/templates/${i.template.id}`,class:"base-button"},[(0,o.Lk)("span",A,(0,r.v_)(n.t("back")),1)],8,E))],64))])],6)):(0,o.Q3)("",!0),(0,o.Lk)("div",{id:"main_container",class:(0,r.C4)(["flex",e.$slots.buttons||i.withTitle?"md:max-h-[calc(100%_-_60px)]":"md:max-h-[100%]"])},[i.withDocumentsList?((0,o.uX)(),(0,o.CE)("div",{key:0,id:"documents_container",ref:"previews",style:(0,r.Tr)({display:l.isBreakpointLg?"none":"initial"}),class:"overflow-y-auto overflow-x-hidden w-52 flex-none pr-3 mt-0.5 pt-0.5 hidden lg:block"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.template.schema,((e,t)=>((0,o.uX)(),(0,o.Wv)(Q,{key:t,"with-arrows":i.template.schema.length>1,item:e,document:n.sortedDocuments[t],"accept-file-types":i.acceptFileTypes,"with-replace-button":i.withUploadButton,editable:i.editable,template:i.template,onScrollTo:t=>n.scrollIntoDocument(e),onRemove:n.onDocumentRemove,onReplace:n.onDocumentReplace,onUp:t=>n.moveDocument(e,-1),onDown:t=>n.moveDocument(e,1),onChange:n.save},null,8,["with-arrows","item","document","accept-file-types","with-replace-button","editable","template","onScrollTo","onRemove","onReplace","onUp","onDown","onChange"])))),128)),(0,o.Lk)("div",{class:"sticky bottom-0 py-2 space-y-2",style:(0,r.Tr)({backgroundColor:i.backgroundColor})},[n.sortedDocuments.length&&i.editable&&i.withUploadButton?((0,o.uX)(),(0,o.Wv)(Y,{key:0,"accept-file-types":i.acceptFileTypes,"template-id":i.template.id,onSuccess:n.updateFromUpload},null,8,["accept-file-types","template-id","onSuccess"])):(0,o.Q3)("",!0),n.sortedDocuments.length&&i.editable&&i.withAddPageButton?((0,o.uX)(),(0,o.CE)("button",{key:1,id:"add_blank_page_button",class:"btn btn-outline w-full",onClick:t[6]||(t[6]=(0,s.D$)(((...e)=>n.addBlankPage&&n.addBlankPage(...e)),["prevent"]))},[l.isLoadingBlankPage?((0,o.uX)(),(0,o.Wv)(O,{key:0,class:"animate-spin w-5 h-5"})):((0,o.uX)(),(0,o.Wv)(H,{key:1,class:"w-5 h-5"})),(0,o.eW)(" "+(0,r.v_)(n.t("add_blank_page")),1)])):(0,o.Q3)("",!0)],4)],4)):(0,o.Q3)("",!0),(0,o.Lk)("div",T,[(0,o.Lk)("div",I,[n.sortedDocuments.length||!i.withUploadButton&&!i.withAddPageButton?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.sortedDocuments,(e=>((0,o.uX)(),(0,o.CE)(o.FK,{key:e.uuid},[(0,o.bF)(J,{ref_for:!0,ref:n.setDocumentRefs,"areas-index":n.fieldAreasIndex[e.uuid],"selected-submitter":l.selectedSubmitter,document:e,"is-drag":!!l.dragField,"input-mode":i.inputMode,"default-fields":[...i.defaultRequiredFields,...i.defaultFields],"allow-draw":!i.onlyDefinedFields,"default-submitters":i.defaultSubmitters,"with-field-placeholder":i.withFieldPlaceholder,"draw-field":l.drawField,"draw-field-type":l.drawFieldType,editable:i.editable,"base-url":i.baseUrl,onDraw:t[8]||(t[8]=e=>[n.onDraw(e),i.withSelectedFieldType?"":l.drawFieldType="",l.showDrawField=!1]),onDropField:n.onDropfield,onRemoveArea:n.removeArea},null,8,["areas-index","selected-submitter","document","is-drag","input-mode","default-fields","allow-draw","default-submitters","with-field-placeholder","draw-field","draw-field-type","editable","base-url","onDropField","onRemoveArea"]),l.isBreakpointLg&&i.editable?((0,o.uX)(),(0,o.Wv)(Z,{key:0,"with-arrows":i.template.schema.length>1,item:i.template.schema.find((t=>t.attachment_uuid===e.uuid)),"with-replace-button":i.withUploadButton,"accept-file-types":i.acceptFileTypes,document:e,template:i.template,class:"pb-2 mb-2 border-b border-base-300 border-dashed",onRemove:n.onDocumentRemove,onReplace:n.onDocumentReplace,onUp:t=>n.moveDocument(i.template.schema.find((t=>t.attachment_uuid===e.uuid)),-1),onDown:t=>n.moveDocument(i.template.schema.find((t=>t.attachment_uuid===e.uuid)),1),onChange:n.save},null,8,["with-arrows","item","with-replace-button","accept-file-types","document","template","onRemove","onReplace","onUp","onDown","onChange"])):(0,o.Q3)("",!0)],64)))),128)),n.sortedDocuments.length&&l.isBreakpointLg&&i.editable?((0,o.uX)(),(0,o.CE)("div",$,[i.withUploadButton?((0,o.uX)(),(0,o.Wv)(Y,{key:0,"template-id":i.template.id,"accept-file-types":i.acceptFileTypes,onSuccess:n.updateFromUpload},null,8,["template-id","accept-file-types","onSuccess"])):(0,o.Q3)("",!0),i.withAddPageButton?((0,o.uX)(),(0,o.CE)("button",{key:1,id:"add_blank_page_button",class:"btn btn-outline w-full mt-4",onClick:t[9]||(t[9]=(0,s.D$)(((...e)=>n.addBlankPage&&n.addBlankPage(...e)),["prevent"]))},[l.isLoadingBlankPage?((0,o.uX)(),(0,o.Wv)(O,{key:0,class:"animate-spin w-5 h-5"})):((0,o.uX)(),(0,o.Wv)(H,{key:1,class:"w-5 h-5"})),(0,o.eW)(" "+(0,r.v_)(n.t("add_blank_page")),1)])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[i.withUploadButton?((0,o.uX)(),(0,o.Wv)(K,{key:0,"template-id":i.template.id,"accept-file-types":i.acceptFileTypes,onSuccess:n.updateFromUpload},null,8,["template-id","accept-file-types","onSuccess"])):(0,o.Q3)("",!0),i.withAddPageButton?((0,o.uX)(),(0,o.CE)("button",{key:1,id:"add_blank_page_button",class:"btn btn-outline w-full mt-4",onClick:t[7]||(t[7]=(0,s.D$)(((...e)=>n.addBlankPage&&n.addBlankPage(...e)),["prevent"]))},[l.isLoadingBlankPage?((0,o.uX)(),(0,o.Wv)(O,{key:0,class:"animate-spin w-5 h-5"})):((0,o.uX)(),(0,o.Wv)(H,{key:1,class:"w-5 h-5"})),(0,o.eW)(" "+(0,r.v_)(n.t("add_blank_page")),1)])):(0,o.Q3)("",!0)],64))],512)]),i.withFieldsList?((0,o.uX)(),(0,o.CE)("div",{key:1,id:"fields_list_container",class:(0,r.C4)(["relative w-80 flex-none mt-1 pr-4 pl-0.5 hidden md:block",l.drawField?"overflow-hidden":"overflow-y-auto overflow-x-hidden"])},[l.showDrawField||l.drawField?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"sticky inset-0 h-full z-20",style:(0,r.Tr)({backgroundColor:i.backgroundColor})},[(0,o.Lk)("div",P,[(0,o.Lk)("p",null,(0,r.v_)(n.t("draw_field_on_the_document")),1),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"base-button",onClick:t[10]||(t[10]=(...e)=>n.clearDrawField&&n.clearDrawField(...e))},(0,r.v_)(n.t("cancel")),1),l.drawField||l.drawOption||["stamp","signature","initials","heading"].includes(l.drawField?.type||l.drawFieldType)?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("a",{key:0,href:"#",class:"link block mt-3 text-sm",onClick:t[11]||(t[11]=(0,s.D$)((e=>[n.addField(l.drawFieldType),l.drawField=null,l.drawOption=null,i.withSelectedFieldType?"":l.drawFieldType="",l.showDrawField=!1]),["prevent"]))},(0,r.v_)(n.t("or_add_field_without_drawing")),1))])])],4)):(0,o.Q3)("",!0),(0,o.Lk)("div",null,[(0,o.bF)(G,{ref:"fields",fields:i.template.fields,submitters:i.template.submitters,"selected-submitter":l.selectedSubmitter,"with-help":i.withHelp,"default-submitters":i.defaultSubmitters,"draw-field-type":l.drawFieldType,"default-fields":[...i.defaultRequiredFields,...i.defaultFields],"default-required-fields":i.defaultRequiredFields,"field-types":i.fieldTypes,"with-sticky-submitters":i.withStickySubmitters,"only-defined-fields":i.onlyDefinedFields,editable:i.editable,onAddField:n.addField,onSetDraw:t[12]||(t[12]=e=>[l.drawField=e.field,l.drawOption=e.option]),onSetDrawType:t[13]||(t[13]=e=>[l.drawFieldType=e,l.showDrawField=!0]),onSetDrag:t[14]||(t[14]=e=>l.dragField=e),onChangeSubmitter:t[15]||(t[15]=e=>l.selectedSubmitter=e),onDragEnd:t[16]||(t[16]=e=>l.dragField=null),onScrollToArea:n.scrollToArea},null,8,["fields","submitters","selected-submitter","with-help","default-submitters","draw-field-type","default-fields","default-required-fields","field-types","with-sticky-submitters","only-defined-fields","editable","onAddField","onScrollToArea"])])],2)):(0,o.Q3)("",!0)],2),(0,o.Lk)("div",q,[l.drawField&&l.isBreakpointLg?((0,o.uX)(),(0,o.Wv)(ee,{key:0,"draw-field":l.drawField,fields:i.template.fields,submitters:i.template.submitters,"selected-submitter":l.selectedSubmitter,class:"md:hidden",editable:i.editable,onCancel:t[17]||(t[17]=e=>[l.drawField=null,l.drawOption=null]),onChangeSubmitter:t[18]||(t[18]=e=>[l.selectedSubmitter=e,l.drawField.submitter_uuid=e.uuid])},null,8,["draw-field","fields","submitters","selected-submitter","editable"])):(0,o.Q3)("",!0),n.sortedDocuments.length&&!l.drawField&&i.editable?((0,o.uX)(),(0,o.Wv)(te,{key:1,fields:i.template.fields,"default-fields":[...i.defaultRequiredFields,...i.defaultFields],"default-required-fields":i.defaultRequiredFields,"field-types":i.fieldTypes,"selected-submitter":l.selectedSubmitter,onSelect:t[19]||(t[19]=e=>n.startFieldDraw(e))},null,8,["fields","default-fields","default-required-fields","field-types","selected-submitter"])):(0,o.Q3)("",!0)]),R])}]]),$s={key:0},Ps={class:"label"},qs={ref:"selectWorksheet",class:"base-select"},Rs=["value"],Ms={class:"base-button mt-4 w-full"},Xs={key:1},Ns={key:0,class:"px-3 border-y py-2 border-base-300 text-center w-full"},zs={class:"flex"},Bs={class:"relative w-full py-2 px-2 text-sm"},Os={class:"relative w-full py-2 pl-4 text-sm"},Us={class:"flex"},Ws=["onChange"],Vs=["selected"],js=["value","selected"],Qs={class:"flex items-center px-1"},Ys={class:"w-full relative"},Hs=["onChange"],Ks=["selected"],Js=["value","selected"],Zs={key:0,class:"absolute top-0 bottom-0 right-1 flex items-center"},Gs=["data-tip"],en={class:"flex items-center pl-1"},tn=["data-tip"],an=["disabled","onClick"],ln=["onClick"],sn=["value"],nn={class:"px-3 border-y py-2 border-base-300 text-center w-full text-sm font-semibold"},on={key:2},rn={class:"absolute top-0 right-0 left-0 bottom-0 flex items-center justify-center"},dn={class:"flex flex-col items-center"},un={class:"font-medium text-lg mb-1"},cn={class:"text-sm"},pn={class:"font-medium"},hn={ref:"form",class:"hidden"},mn={class:"text-center mt-2"},fn=["download","href"];var bn=i(8624);const _n={name:"FileDropzone",components:{IconCloudUpload:ie.A,IconX:Mi.A,IconArrowsHorizontal:bn.A,IconPlus:nl.A,IconInfoCircle:Ot.A,IconInnerShadowTop:W.A},props:{template:{type:Object,required:!0},multitenant:{type:Boolean,required:!1,default:!1},authenticityToken:{type:String,required:!1,default:""},i18n:{type:Object,required:!1,default:()=>({})}},data:()=>({isLoading:!1,spreadsheet:null,selectedSheetIndex:null,mappings:[]}),computed:{table(){return this.spreadsheet[this.selectedSheetIndex][1]},submissionsData(){const e=[];return this.rows.forEach((t=>{const i={};this.mappings.forEach((e=>{if(e.field_name&&null!=e.column_index){i[e.submitter_uuid]||={uuid:e.submitter_uuid,fields:[]},["name","email","phone","external_id"].includes(e.field_name.toLowerCase())&&(i[e.submitter_uuid][e.field_name.toLowerCase()]=t[e.column_index]);const a=this.fieldTypesIndex[e.submitter_uuid][e.field_name];a&&"phone"!==a&&i[e.submitter_uuid].fields.push({name:e.field_name,default_value:t[e.column_index],readonly:!0})}})),0!==Object.keys(i).length&&e.push({submitters:Object.values(i)})})),e},csvBase64(){const e=[];this.submitters.forEach((t=>{this.selectFieldsForSubmitter(t).forEach((i=>{e.push(this.submitters.length>1?`${t.name} - ${i.name}`:i.name)}))}));const t=e.map((e=>/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e)).join(",");return window.btoa(window.unescape(window.encodeURIComponent(t+"\n"+e.map((()=>"")).join(",")+"\n")))},submitters(){return this.template.submitters},fieldTypesIndex(){return this.template.fields.reduce(((e,t)=>(e[t.submitter_uuid]||={},t.name&&(e[t.submitter_uuid][t.name]=t.type),e)),{})},columns(){return this.table[0]},form(){return this.$el.closest("form")},fieldTypes:()=>["text","cells","date","number","radio","select","checkbox"],defaultFields:()=>[{name:"Name"},{name:"Email"},{name:"Phone"}],rows(){return this.table.slice(1)}},watch:{selectedSheetIndex(e){null!==e&&document.getElementById("list_form_buttons")?.classList?.remove("hidden")}},methods:{t(e){return this.i18n[e]||e},onDropFiles(e){this.uploadFile(e.dataTransfer.files[0])},onSelectFile(e){this.uploadFile(e.target.files[0])},addMapping(e){this.mappings.push({uuid:(0,Ia.A)(),field_name:"",column_index:null,submitter_uuid:e.uuid})},selectFieldsForSubmitter(e){const t=this.template.fields.filter((t=>t.submitter_uuid===e.uuid&&t.name&&this.fieldTypes.includes(t.type)&&this.defaultFields.every((e=>t.name?.toLowerCase()!==e.name?.toLowerCase())))),i=[...this.defaultFields,...t];return this.spreadsheet&&this.columns.includes("external_id")&&i.push({name:"external_id"}),i},buildDefaultMappings(){this.submitters.forEach((e=>{this.selectFieldsForSubmitter(e).forEach((t=>{const i=this.columns.findIndex(((e,i)=>e&&e.toString().toLowerCase().includes(t.name?.toLowerCase())&&this.mappings.every((e=>e.column_index!==i))));-1!==i&&this.mappings.push({uuid:(0,Ia.A)(),field_name:t.name,column_index:i,submitter_uuid:e.uuid})})),this.mappings.some((t=>"name"===t.field_name.toLowerCase()&&t.submitter_uuid===e.uuid))||this.mappings.unshift({uuid:(0,Ia.A)(),field_name:"Name",submitter_uuid:e.uuid}),this.mappings.some((t=>"email"===t.field_name.toLowerCase()&&t.submitter_uuid===e.uuid))||this.mappings.unshift({uuid:(0,Ia.A)(),field_name:"Email",submitter_uuid:e.uuid})}))},uploadFile(e){this.isLoading=!0;const t=new FormData;return t.append("file",e),fetch("/upload_spreadsheet",{method:"POST",body:t,headers:{"X-CSRF-Token":this.authenticityToken}}).then((e=>e.json())).then((e=>{if(e.error)return alert(e.error);this.spreadsheet=e,1===e.length&&(this.selectedSheetIndex=0,this.buildDefaultMappings())})).finally((()=>{this.isLoading=!1}))}}},gn=(0,j.A)(_n,[["render",function(e,t,i,a,l,n){const d=(0,o.g2)("IconArrowsHorizontal"),u=(0,o.g2)("IconInfoCircle"),c=(0,o.g2)("IconX"),p=(0,o.g2)("IconPlus"),h=(0,o.g2)("IconInnerShadowTop"),m=(0,o.g2)("IconCloudUpload");return(0,o.uX)(),(0,o.CE)("div",null,[null===l.selectedSheetIndex&&l.spreadsheet?((0,o.uX)(),(0,o.CE)("div",$s,[(0,o.Lk)("form",{onSubmit:t[0]||(t[0]=(0,s.D$)((t=>[l.selectedSheetIndex=e.$refs.selectWorksheet.value,n.buildDefaultMappings()]),["prevent"]))},[(0,o.Lk)("label",Ps,(0,r.v_)(n.t("select_worksheet")),1),(0,o.Lk)("select",qs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.spreadsheet,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:t},(0,r.v_)(e[0]||t),9,Rs)))),128))],512),(0,o.Lk)("button",Ms,(0,r.v_)(n.t("open")),1)],32)])):null!==l.selectedSheetIndex?((0,o.uX)(),(0,o.CE)("div",Xs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.submitters,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.uuid,class:"mb-4"},[n.submitters.length>1?((0,o.uX)(),(0,o.CE)("div",Ns,(0,r.v_)(e.name),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",zs,[(0,o.Lk)("div",Bs,(0,r.v_)(n.t("recipient_field")),1),(0,o.Lk)("div",Os,(0,r.v_)(n.t("spreadsheet_column")),1)]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.mappings.filter((t=>t.submitter_uuid===e.uuid)),(i=>((0,o.uX)(),(0,o.CE)("div",{key:i.uuid,class:"mb-2"},[(0,o.Lk)("div",Us,[(0,o.Lk)("select",{class:(0,r.C4)(["base-select !select-sm !h-10",{"!text-gray-300":!i.field_name}]),required:"",onChange:e=>i.field_name=e.target.value},[(0,o.Lk)("option",{disabled:"",value:"",selected:!i.field_name},(0,r.v_)(n.t("select_field")),9,Vs),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.selectFieldsForSubmitter(e),((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:e.name,selected:i.field_name===e.name,class:"text-base-content"},(0,r.v_)(e.name),9,js)))),128))],42,Ws),(0,o.Lk)("div",Qs,[(0,o.bF)(d,{style:{width:"19px",height:"19px"}})]),(0,o.Lk)("div",Ys,[(0,o.Lk)("select",{class:(0,r.C4)(["base-select !select-sm !h-10",{"!text-gray-300":!i.column_index}]),required:"",onChange:e=>i.column_index=parseInt(e.target.value)},[(0,o.Lk)("option",{disabled:"",value:"",selected:null==i.column_index},(0,r.v_)(n.t("select_column")),9,Ks),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.columns,((e,t)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:t},[e?((0,o.uX)(),(0,o.CE)("option",{key:0,value:t,selected:t===i.column_index,class:"text-base-content"},(0,r.v_)(e),9,Js)):(0,o.Q3)("",!0)],64)))),128))],42,Hs),null!=i.column_index?((0,o.uX)(),(0,o.CE)("div",Zs,[(0,o.Lk)("span",{class:"tooltip tooltip-bottom-end pr-1 tooltip-pre",style:{"padding-top":"2px"},"data-tip":[0,1,2].map((e=>n.rows[e]?.[i.column_index]??"---")).join("\n")},[(0,o.Lk)("button",{class:"btn btn-xs btn-circle bg-white border-0 border-gray-300",onClick:t[1]||(t[1]=(0,s.D$)((()=>{}),["prevent"]))},[(0,o.bF)(u,{class:"h-4 w-4"})])],8,Gs)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",en,[(0,o.Lk)("span",{class:"tooltip tooltip-left","data-tip":n.t("remove")},[(0,o.Lk)("button",{disabled:l.mappings.filter((t=>t.submitter_uuid===e.uuid)).length<2,class:"btn btn-xs btn-circle",onClick:(0,s.D$)((e=>l.mappings.splice(l.mappings.indexOf(i),1)),["prevent"])},[(0,o.bF)(c,{class:"h-3.5 w-3.5"})],8,an)],8,tn)])])])))),128)),(0,o.Lk)("div",null,[(0,o.Lk)("button",{class:"btn btn-sm btn-primary w-full !normal-case font-medium",onClick:(0,s.D$)((t=>n.addMapping(e)),["prevent"])},[(0,o.bF)(p,{class:"w-4 h-4"}),(0,o.eW)(" "+(0,r.v_)(n.t("new_field_mapping")),1)],8,ln)])])))),128)),(0,o.Lk)("div",null,[(0,o.Lk)("input",{name:"submissions_json",hidden:"",value:i.multitenant?JSON.stringify(n.submissionsData.slice(0,1100)):JSON.stringify(n.submissionsData)},null,8,sn)]),(0,o.Lk)("div",nn,[(0,o.eW)((0,r.v_)(n.t("total_entries"))+": "+(0,r.v_)(n.submissionsData.length)+" ",1),i.multitenant&&n.submissionsData.length>=1e3?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(" / 1000 ")],64)):(0,o.Q3)("",!0)])])):((0,o.uX)(),(0,o.CE)("div",on,[(0,o.Lk)("div",{class:"flex h-52 w-full",onDragover:t[3]||(t[3]=(0,s.D$)((()=>{}),["prevent"])),onDrop:t[4]||(t[4]=(0,s.D$)(((...e)=>n.onDropFiles&&n.onDropFiles(...e)),["prevent"]))},[(0,o.Lk)("label",{class:(0,r.C4)(["w-full relative bg-base-200/20 hover:bg-base-200/30 rounded-md border border-2 border-base-content/10 border-dashed",{"opacity-50":l.isLoading}]),for:"import_list_file"},[(0,o.Lk)("div",rn,[(0,o.Lk)("div",dn,[l.isLoading?((0,o.uX)(),(0,o.Wv)(h,{key:0,class:"animate-spin",width:40,height:40})):((0,o.uX)(),(0,o.Wv)(m,{key:1,width:40,height:40})),(0,o.Lk)("div",un,(0,r.v_)(n.t("upload_csv_or_xlsx_spreadsheet")),1),(0,o.Lk)("div",cn,[(0,o.Lk)("span",pn,(0,r.v_)(n.t("click_to_upload")),1),(0,o.eW)(" "+(0,r.v_)(n.t("or_drag_and_drop_files")),1)])])]),(0,o.Lk)("form",hn,[(0,o.Lk)("input",{id:"import_list_file",ref:"input",type:"file",name:"file",accept:".xlsx, .xls, .csv",onChange:t[2]||(t[2]=(...e)=>n.onSelectFile&&n.onSelectFile(...e))},null,544)],512)],2)],32),(0,o.Lk)("div",mn,[(0,o.eW)((0,r.v_)(n.t("or"))+" ",1),(0,o.Lk)("a",{download:`${i.template.name}.csv`,href:`data:text/csv;base64,${n.csvBase64}`,class:"link font-medium"},(0,r.v_)(n.t("download")),9,fn),(0,o.eW)(" "+(0,r.v_)(n.t("a_sample_spreadsheet_to_fill_and_import")),1)])]))])}]]),yn=gn;var vn=i(3737);const wn=(0,vn.b)(class extends HTMLElement{trigger(e){JSON.parse(this.dataset.elementIds).forEach((t=>{document.getElementById(t).classList.toggle("hidden",e.target.value!==t)}))}}),kn=class extends HTMLElement{connectedCallback(){this.button.addEventListener("click",(()=>{const e=new Date;e.setFullYear(e.getFullYear()+10);const t=e.toUTCString();document.cookie=this.dataset.key+"="+this.dataset.value+"; expires="+t+"; path=/"}))}get button(){return this.querySelector("button")}},xn=class extends HTMLElement{static observedAttributes=["class"];connectedCallback(){this.trigger()}attributeChangedCallback(e,t,i){"class"===e&&t!==i&&this.trigger()}trigger(){const e=this.classList.contains("hidden");this.querySelectorAll("input, textarea, select").forEach((t=>{e?(t.disabled=!0,t.dataset.wasRequired||(t.dataset.wasRequired=t.required),t.required=!1):(t.disabled=!1,t.dataset.wasRequired&&(t.required="true"===t.dataset.wasRequired,delete t.dataset.wasRequired))}))}},Cn=(0,vn.b)(class extends HTMLElement{connectedCallback(){document.body.classList.add("overflow-hidden"),document.addEventListener("keyup",this.onEscKey),document.addEventListener("turbo:before-cache",this.close),"false"!==this.dataset.closeAfterSubmit&&document.addEventListener("turbo:submit-end",this.onSubmit)}disconnectedCallback(){document.body.classList.remove("overflow-hidden"),document.removeEventListener("keyup",this.onEscKey),document.removeEventListener("turbo:submit-end",this.onSubmit),document.removeEventListener("turbo:before-cache",this.close)}onSubmit=e=>{e.detail.success&&"false"!==e.detail?.formSubmission?.formElement?.dataset?.closeOnSubmit&&this.close()};onEscKey=e=>{"Escape"===e.code&&this.close()};close=e=>{e?.preventDefault(),this.remove()}});var Fn=i(9784);const Dn=(0,vn.b)((0,Fn.UJ)(class extends HTMLElement{static[Fn.aC.static]=["loading","icon","input"];connectedCallback(){this.addEventListener("drop",this.onDrop),this.addEventListener("dragover",(e=>e.preventDefault())),document.addEventListener("turbo:submit-end",this.toggleLoading)}disconnectedCallback(){document.removeEventListener("turbo:submit-end",this.toggleLoading)}onDrop(e){e.preventDefault(),this.input.files=e.dataTransfer.files,this.uploadFiles(e.dataTransfer.files)}onSelectFiles(e){e.preventDefault(),this.uploadFiles(this.input.files)}toggleLoading=e=>{e&&e.target&&!e.target.contains(this)||(this.loading.classList.toggle("hidden"),this.icon.classList.toggle("hidden"),this.classList.toggle("opacity-50"))};uploadFiles(){this.toggleLoading(),this.dataset.submitOnUpload&&this.closest("form").querySelector('button[type="submit"]').click()}})),Sn=class extends HTMLElement{connectedCallback(){this.querySelectorAll("a").forEach((e=>{document.location.pathname.startsWith(e.pathname)&&!e.getAttribute("href").startsWith("http")&&e.classList.add("bg-base-300")}))}},Ln=class extends HTMLElement{connectedCallback(){this.clearChecked(),this.addEventListener("click",(e=>{e.stopPropagation();const t=this.dataset.text||this.innerText.trim();navigator.clipboard?navigator.clipboard.writeText(t):"INPUT"!==e.target.tagName&&alert(`Clipboard not available. Make sure you're using https://\nCopy text: ${t}`)}))}clearChecked(){this.querySelectorAll("input").forEach((e=>{e.checked=!1}))}},En=(0,vn.b)((0,Fn.UJ)(class extends HTMLElement{static[Fn.zV.static]=["items"];addItem(e){e.preventDefault();const t=this.items[0],i=t.cloneNode(!0),a=Math.floor(Math.random()*10**16);i.querySelectorAll("select, textarea, input:not([type='hidden'])").forEach((e=>{e.value="",e.checked=!1,e.removeAttribute("selected")})),i.querySelectorAll("select, textarea, input").forEach((e=>{e.name=e.name.replace("[1]",`[${a}]`)})),i.querySelectorAll("a.hidden").forEach((e=>e.classList.toggle("hidden"))),t.parentNode.append(i)}removeItem(e){e.preventDefault(),this.items.find((t=>t.contains(e.target)))?.remove()}})),An=(0,Fn.UJ)(class extends HTMLElement{static[Fn.aC.static]=["defaultButton","loadingButton"];connectedCallback(){this.addEventListener("click",(()=>this.downloadFiles()))}toggleState(){this.defaultButton?.classList?.toggle("hidden"),this.loadingButton?.classList?.toggle("hidden")}downloadFiles(){this.dataset.src&&(this.toggleState(),fetch(this.dataset.src).then((async e=>{if(e.ok){const t=await e.json();/iPhone|iPad|iPod/i.test(navigator.userAgent)&&t.length>1?this.downloadSafariIos(t):this.downloadUrls(t)}else alert("Failed to download files")})))}downloadUrls(e){e.map((e=>()=>fetch(e).then((async t=>{const i=URL.createObjectURL(await t.blob()),a=document.createElement("a");a.href=i,a.setAttribute("download",decodeURI(e.split("/").pop())),a.click(),URL.revokeObjectURL(i)})))).reduce(((e,t)=>e.then((()=>t()))),Promise.resolve()).finally((()=>{this.toggleState()}))}downloadSafariIos(e){const t=e.map((e=>fetch(e).then((async t=>{const i=await t.blob(),a=URL.createObjectURL(i.slice(0,i.size,"application/octet-stream")),l=document.createElement("a");return l.href=a,l.setAttribute("download",decodeURI(e.split("/").pop())),l}))));Promise.all(t).then((e=>{e.forEach(((e,t)=>{setTimeout((()=>{e.click(),URL.revokeObjectURL(e.href)}),50*t)}))})).finally((()=>{this.toggleState()}))}}),Tn=class extends HTMLElement{connectedCallback(){this.dataset.inputId&&(document.getElementById(this.dataset.inputId).value=document.location.origin)}},In=class extends HTMLElement{connectedCallback(){if(this.dataset.inputId){const e=Intl.DateTimeFormat().resolvedOptions().timeZone;if("true"===this.dataset.params){const t=new URLSearchParams(this.input.value);t.set("timezone",e),this.input.value=t.toString()}else this.input.value=e}}get input(){return document.getElementById(this.dataset.inputId)}},$n=class extends HTMLElement{connectedCallback(){this.resize(),this.textarea.addEventListener("input",(()=>this.resize()))}resize(){this.textarea.clientHeight<this.textarea.scrollHeight&&(this.textarea.style.height=`${this.textarea.scrollHeight+5}px`)}get textarea(){return this.querySelector("textarea")}};var Pn=i(8609),qn=i.n(Pn);const Rn=class extends HTMLElement{connectedCallback(){qn()({input:this.input,preventSubmit:1,minLength:1,showOnFocus:!0,debounceWaitMs:200,onSelect:this.onSelect,render:this.render,fetch:this.fetch})}onSelect=e=>{const t=this.closest("submitter-item");["email","name","phone"].forEach((i=>{const a=t.querySelector(`submitters-autocomplete[data-field="${i}"] input`),l=t.querySelector(`submitters-autocomplete[data-field="${i}"] textarea`);a&&e[i]&&(a.value=e[i],a.dispatchEvent(new CustomEvent("linked-input.update",{bubbles:!0}))),l&&e[i]&&(l.value=l.value.replace(/[^;,\s]+$/,e[i]+" "),l.dispatchEvent(new Event("input",{bubbles:!0})))}))};fetch=(e,t)=>{const i=e.split(/[;,\s]+/).pop().trim();if(i){const e=new URLSearchParams({q:i,field:this.dataset.field});this.currentFetch||=fetch("/submitters_autocomplete?"+e),this.currentFetch.then((async e=>{const i=await e.json();t(i)})).catch((()=>{t([])})).finally((()=>{this.currentFetch=null}))}else t([])};render=e=>{const t=document.createElement("div");return t.setAttribute("dir","auto"),t.textContent=e[this.dataset.field],t};get input(){return this.querySelector("input")||this.querySelector("textarea")}},Mn=class extends HTMLElement{connectedCallback(){qn()({input:this.input,preventSubmit:"true"===this.dataset.submitOnSelect?0:1,minLength:0,showOnFocus:!0,onSelect:this.onSelect,render:this.render,fetch:this.fetch})}onSelect=e=>{this.input.value=e.name};fetch=(e,t)=>{const i=new URLSearchParams({q:e});fetch("/template_folders_autocomplete?"+i).then((async e=>{const i=await e.json();t(i)})).catch((()=>{t([])}))};render=e=>{const t=document.createElement("div");return t.setAttribute("dir","auto"),t.textContent=e.name,t};get input(){return this.querySelector("input")}};const Xn=(0,Fn.UJ)(class extends HTMLElement{static[Fn.aC.static]=["canvas","input","clear","button"];async connectedCallback(){this.canvas.width=3*this.canvas.parentNode.clientWidth,this.canvas.height=3*this.canvas.parentNode.clientHeight,this.canvas.getContext("2d").scale(3,3);const{default:e}=await i.e(492).then(i.bind(i,2492));this.pad=new e(this.canvas),this.clear.addEventListener("click",(e=>{e.preventDefault(),this.pad.clear()})),this.button.addEventListener("click",(e=>{e.preventDefault(),this.button.disabled=!0,this.submit()}))}async submit(){const e=await function(e,{errorOnTooSmall:t}={errorOnTooSmall:!1}){const i=e.getContext("2d"),a=e.width,l=e.height;let s=l,n=0,o=a,r=0;const d=i.getImageData(0,0,a,l).data;for(let m=0;m<l;m++)for(let e=0;e<a;e++)0!==d[4*(m*a+e)+3]&&(s=Math.min(s,m),n=Math.max(n,m),o=Math.min(o,e),r=Math.max(r,e));const u=r-o+1,c=n-s+1,p=document.createElement("canvas");p.width=u,p.height=c;const h=p.getContext("2d");return t&&(u<20||c<20)?Promise.reject(new Error("Image too small")):(h.drawImage(e,o,s,u,c,0,0,u,c),new Promise(((e,t)=>{p.toBlob((i=>{i?e(i):t(new Error("Failed to create a PNG blob."))}),"image/png")})))}(this.canvas),t=new File([e],"signature.png",{type:"image/png"}),i=new DataTransfer;i.items.add(t),this.input.files=i.files,this.input.webkitEntries.length&&(this.input.dataset.file=`${i.files[0].name}`),this.closest("form").requestSubmit()}}),Nn=class extends HTMLElement{connectedCallback(){this.querySelector("form").requestSubmit()}},zn=class extends HTMLElement{connectedCallback(){const e=document.createElement("input");e.type="hidden",e.name="password",e.value=prompt("Enter PDF password"),this.form.append(e),this.form.requestSubmit(),this.remove()}get form(){return this.closest("form")}},Bn=/([^@;,<>\s]+@[^@;,<>\s]+)/g,On=class extends HTMLElement{connectedCallback(){this.dataset.limit&&this.textarea.addEventListener("input",(()=>{const e=this.textarea.value.match(Bn)||[];this.updateCounter(e.length)}))}updateCounter(e){let t=document.getElementById("emails_counter"),i=document.getElementById("bulk_message");e<2?t?.remove():(e+10>this.dataset.limit&&(t||(t=document.createElement("span"),t.id="emails_counter",t.classList.add("text-xs","right-0","absolute"),t.style.bottom="-15px",this.textarea.parentNode.append(t)),t.innerText=`${e} / ${this.dataset.limit}`),"true"!==this.dataset.bulkEnabled&&(i||(i=document.createElement("span"),i.id="bulk_message",i.classList.add("text-xs","left-0","absolute"),i.style.bottom="-15px",this.textarea.parentNode.append(i)),i.innerHTML='<a class="link" data-turbo="false" href="/upgrade">Upgrade</a> to bulk send multiple recipients'))}get textarea(){return this.querySelector("textarea")}},Un=class extends HTMLElement{connectedCallback(){document.addEventListener("turbo:submit-end",this.onSubmitEnd),this.form.addEventListener("submit",this.onSubmit)}disconnectedCallback(){document.removeEventListener("turbo:submit-end",this.onSubmitEnd),this.form.removeEventListener("submit",this.onSubmit)}onSubmit=()=>{this.element.classList.add("invisible")};onSubmitEnd=e=>{if(e.target===this.form){const t=e.detail?.formSubmission?.result?.fetchResponse?.response;t?.status/100===2&&this.element.classList.remove("invisible")}};get element(){return document.getElementById(this.dataset.elementId)}get form(){return this.closest("form")}},Wn=(0,Fn.UJ)(class extends HTMLElement{static[Fn.aC.static]=["visiblePasswordIcon","hiddenPasswordIcon","passwordInput","togglePasswordVisibility"];connectedCallback(){this.togglePasswordVisibility.addEventListener("click",this.handleTogglePasswordVisibility),document.addEventListener("turbo:submit-start",this.setInitialPasswordType)}disconnectedCallback(){this.togglePasswordVisibility.removeEventListener("click",this.handleTogglePasswordVisibility),document.removeEventListener("turbo:submit-start",this.setInitialPasswordType)}handleTogglePasswordVisibility=()=>{this.passwordInput.type="password"===this.passwordInput.type?"text":"password",this.toggleIcon()};setInitialPasswordType=()=>{this.passwordInput.type="password",this.toggleIcon()};toggleIcon=()=>{this.visiblePasswordIcon.classList.toggle("hidden","password"===this.passwordInput.type),this.hiddenPasswordIcon.classList.toggle("hidden","text"===this.passwordInput.type)}}),Vn=class extends HTMLElement{connectedCallback(){this.input.addEventListener("focus",(()=>{this.title&&(this.title.classList.add("hidden","md:block"),this.input.classList.add("w-60"))})),this.input.addEventListener("blur",(e=>{this.title&&!e.target.value&&(this.title.classList.remove("hidden"),this.input.classList.remove("w-60"))}))}get input(){return this.querySelector("input")}get title(){return document.querySelector(this.dataset.title)}},jn=class extends HTMLElement{connectedCallback(){this.input.addEventListener("change",(e=>{this.dataset.attribute&&(this.target[this.dataset.attribute]=e.target.checked),this.dataset.className&&(this.target.classList.toggle(this.dataset.className,e.target.value!==this.dataset.value),"hidden"===this.dataset.className&&"INPUT"===this.target.tagName&&(this.target.disabled=e.target.value!==this.dataset.value)),"disabled"===this.dataset.attribute&&(this.target.value="")}))}get input(){return this.querySelector('input[type="checkbox"]')||this.querySelector("select")}get target(){return document.getElementById(this.dataset.targetId)}},Qn=class extends HTMLElement{connectedCallback(){this.target&&(this.input.value=this.target.value,this.target.addEventListener("input",(e=>{this.input.value=e.target.value})),this.target.addEventListener("linked-input.update",(e=>{this.input.value=e.target.value})))}get input(){return this.querySelector("input")}get target(){if(this.dataset.targetId){const e=this.closest('[data-targets="dynamic-list.items"]');return e?e.querySelector(`#${this.dataset.targetId}`):document.getElementById(this.dataset.targetId)}}},Yn=class extends HTMLElement{connectedCallback(){this.items.forEach((e=>{e.addEventListener("change",(e=>{this.items.forEach((t=>{t.checked=t===e.target&&e.target.checked}))}))}))}get items(){return this.querySelectorAll('input[type="checkbox"]')}},Hn=class extends HTMLElement{connectedCallback(){const e=this.input.value;this.input.addEventListener("focus",(()=>{this.input.value=this.dataset.token,this.input.select()})),this.input.addEventListener("focusout",(()=>{this.input.value=e}))}get input(){return this.querySelector("input")}},Kn=new Map,Jn=1e4;function Zn(e){let t;if(t="A"===e.target.tagName?e.target:e.target.closest("a"),!t)return;if(!function(e){const t=e.getAttribute("href");if(t&&"#"!==t&&"false"!==e.dataset.turbo&&"false"!==e.dataset.prefetch&&e.origin===document.location.origin&&["http:","https:"].includes(e.protocol)&&e.pathname+e.search!==document.location.pathname+document.location.search&&(!e.dataset.turboMethod||"get"===e.dataset.turboMethod))return!0}(t))return;const i=t.getAttribute("href"),a=new URL(i,location.protocol+"//"+location.host).toString(),l=Kn.get(a);if(l&&l.ttl>new Date)return;const s={credentials:"same-origin",headers:{Accept:"text/html, application/xhtml+xml","VND.PREFETCH":"true"},method:"GET",redirect:"follow"};if(t.dataset.turboFrame&&"_top"!==t.dataset.turboFrame)s.headers["Turbo-Frame"]=t.dataset.turboFrame;else if("_top"!==t.dataset.turboFrame){const e=t.closest("turbo-frame");e&&(s.headers["Turbo-Frame"]=e.id)}Kn.set(a,{request:fetch(a,s),ttl:new Date((new Date).getTime()+Jn)})}function Gn(e){if("FORM"!==e.target.tagName&&"GET"===e.detail.fetchOptions.method){const t=Kn.get(e.detail.url.toString());t&&t.ttl>new Date&&(e.detail.response=t.request)}Kn.clear()}i.p;window.turboInstantClickEnabled||(document.addEventListener("turbo:before-fetch-request",Gn),document.addEventListener("mouseover",Zn,{capture:!0,passive:!0})),window.turboInstantClickEnabled=!0,document.addEventListener("turbo:before-cache",(()=>{window.flash?.remove()})),document.addEventListener("keyup",(e=>{"Escape"===e.code&&document.activeElement?.blur()})),document.addEventListener("turbo:before-fetch-request",l.D),document.addEventListener("turbo:submit-end",(async e=>{const t=e.detail?.formSubmission?.result?.fetchResponse?.response;if(!t?.headers?.get("content-disposition")?.includes("attachment"))return;const i=URL.createObjectURL(await t.blob()),a=document.createElement("a");a.href=i,a.setAttribute("download",decodeURIComponent(t.headers.get("content-disposition").split('"')[1])),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}));const eo=(e,t,i={})=>!window.customElements.get(e)&&window.customElements.define(e,t,i);eo("toggle-visible",wn),eo("disable-hidden",xn),eo("turbo-modal",Cn),eo("file-dropzone",Dn),eo("menu-active",Sn),eo("clipboard-copy",Ln),eo("dynamic-list",En),eo("download-button",An),eo("set-origin-url",Tn),eo("set-timezone",In),eo("autoresize-textarea",$n),eo("submitters-autocomplete",Rn),eo("folder-autocomplete",Mn),eo("signature-form",Xn),eo("submit-form",Nn),eo("prompt-password",zn),eo("emails-textarea",On),eo("toggle-cookies",kn),eo("toggle-on-submit",Un),eo("password-input",Wn),eo("search-input",Vn),eo("toggle-attribute",jn),eo("linked-input",Qn),eo("checkbox-group",Yn),eo("masked-input",Hn),eo("template-builder",class extends HTMLElement{connectedCallback(){document.addEventListener("turbo:submit-end",this.onSubmit),this.appElem=document.createElement("div"),this.appElem.classList.add("md:h-screen"),this.app=(0,s.Ef)(Is,{template:(0,n.Kh)(JSON.parse(this.dataset.template)),backgroundColor:"#faf7f5",locale:this.dataset.locale,withPhone:"true"===this.dataset.withPhone,withLogo:"false"!==this.dataset.withLogo,editable:"false"!==this.dataset.editable,authenticityToken:document.querySelector('meta[name="csrf-token"]')?.content,withPayment:"true"===this.dataset.withPayment,isPaymentConnected:"true"===this.dataset.isPaymentConnected,withFormula:"true"===this.dataset.withFormula,withSendButton:"false"!==this.dataset.withSendButton,withSignYourselfButton:"false"!==this.dataset.withSignYourselfButton,withConditions:"true"===this.dataset.withConditions,currencies:(this.dataset.currencies||"").split(",").filter(Boolean),acceptFileTypes:this.dataset.acceptFileTypes}),this.component=this.app.mount(this.appElem),this.appendChild(this.appElem)}onSubmit=e=>{e.detail.success&&"submitters_form"===e.detail?.formSubmission?.formElement?.id&&e.detail.fetchResponse.response.json().then((e=>{this.component.template.submitters=e.submitters}))};disconnectedCallback(){document.removeEventListener("turbo:submit-end",this.onSubmit),this.app?.unmount(),this.appElem?.remove()}}),eo("import-list",class extends HTMLElement{connectedCallback(){this.appElem=document.createElement("div"),this.app=(0,s.Ef)(yn,{template:JSON.parse(this.dataset.template),multitenant:"true"===this.dataset.multitenant,authenticityToken:document.querySelector('meta[name="csrf-token"]')?.content,i18n:JSON.parse(this.dataset.i18n||"{}")}),this.app.mount(this.appElem),this.appendChild(this.appElem)}disconnectedCallback(){this.app?.unmount(),this.appElem?.remove()}})},8115:()=>{}},l={};function s(e){var t=l[e];if(void 0!==t)return t.exports;var i=l[e]={exports:{}};return a[e].call(i.exports,i,i.exports,s),i.exports}s.m=a,e=[],s.O=(t,i,a,l)=>{if(!i){var n=1/0;for(u=0;u<e.length;u++){i=e[u][0],a=e[u][1],l=e[u][2];for(var o=!0,r=0;r<i.length;r++)(!1&l||n>=l)&&Object.keys(s.O).every((e=>s.O[e](i[r])))?i.splice(r--,1):(o=!1,l<n&&(n=l));if(o){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[i,a,l]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,i)=>(s.f[i](e,t),t)),[])),s.u=e=>"js/"+e+"-21ba5661655cf8786dbe.chunk.js",s.miniCssF=e=>{},s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},i="docuseal:",s.l=(e,a,l,n)=>{if(t[e])t[e].push(a);else{var o,r;if(void 0!==l)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==i+l){o=c;break}}o||(r=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",i+l),o.src=e),t[e]=[a];var p=(i,a)=>{o.onerror=o.onload=null,clearTimeout(h);var l=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),l&&l.forEach((e=>e(a))),i)return i(a)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),r&&document.head.appendChild(o)}},s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/packs/",(()=>{var e={543:0};s.f.j=(t,i)=>{var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var l=new Promise(((i,l)=>a=e[t]=[i,l]));i.push(a[2]=l);var n=s.p+s.u(t),o=new Error;s.l(n,(i=>{if(s.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var l=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+l+": "+n+")",o.name="ChunkLoadError",o.type=l,o.request=n,a[1](o)}}),"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,i)=>{var a,l,n=i[0],o=i[1],r=i[2],d=0;if(n.some((t=>0!==e[t]))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(r)var u=r(s)}for(t&&t(i);d<n.length;d++)l=n[d],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(u)},i=self.webpackChunkdocuseal=self.webpackChunkdocuseal||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),s.O(void 0,[779],(()=>s(2357)));var n=s.O(void 0,[779],(()=>s(8115)));n=s.O(n)})();
//# sourceMappingURL=application-a42154f04f077ab71da2.js.map